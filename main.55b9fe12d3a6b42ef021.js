(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=s),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=Object(r.g)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=Object(r.e)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){e={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=Object(r.g)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.I)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.C)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.b("@firebase/database"),y=(c=1,function(){return c++}),m=function(t){var e=Object(i.H)(t),n=new i.c;n.update(e);var r=n.digest();return i.f.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.I)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=v.apply(null,t);b(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw g.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",x="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===k||e===x)return-1;if(e===k||t===x)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.I)(e))},R=function(t){if("object"!=typeof t||null===t)return Object(i.I)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.I)(e[o]),r+=":",r+=R(t[e[o]]);return r+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,o,s;Object(i.d)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(e){setTimeout(function(){throw T("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},U=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){T('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),H=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),z=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",G="long_polling",K=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.d)("string"==typeof e,"typeof type must == string"),Object(i.d)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==G)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return P(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.k)(this.counters_)},t}(),Z={},Y={};function J(t){var e=t.toString();return Z[e]||(Z[e]=new Q),Z[e]}var X=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,G,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new X(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.x)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.x)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.g)(e),r=D(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.x)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.I)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.x)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.x)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.x)()&&"undefined"!=typeof location&&location.hostname&&z.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,W,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.x)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.C)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.I)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.v)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function bt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function St(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Et=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.G)(this.parts_[n]);Tt(this)}}();function Tt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var kt,xt,At=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),jt=1e3,Nt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=jt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.x)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return At.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.I)(o)),Object(i.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.d)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.h)(t,"w")){var n=Object(i.F)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.p)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.B)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.d)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.I)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+Object(i.I)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,y=this;return Object(o.d)(this,function(m){switch(m.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.d)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.e.apply(void 0,[m.sent(),2]),f=d[0],p=d[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){T(t+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")},a)),[3,4];case 3:return g=m.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&T(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.t)(this.interruptReasons_)&&(this.reconnectDelay_=jt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return R(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.x)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.v)()?t["framework.cordova"]=1:Object(i.y)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.t)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),Rt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Rt(k,t),r=new Rt(k,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Rt.MIN},t}(),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return kt},set:function(t){kt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return new Rt(x,kt)},e.prototype.makePost=function(t,e){return Object(i.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Rt(t,kt)},e.prototype.toString=function(){return".key"},e}(Dt),Lt=new Pt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Mt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Mt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}();function qt(t,e){return A(t.name,e.name)}function Bt(t,e){return A(t,e)}var Ht,zt,Wt,Gt,Kt,$t=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Qt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.h)(e,".sv"),"Priority must be a string or number.")}else Object(i.d)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(i.d)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Zt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ht},set:function(t){Ht=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.d)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.d)(o>=0,"Unknown leaf type: "+n),Object(i.d)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Yt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return new Rt(x,new Zt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=zt(t);return new Rt(e,new Zt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Dt)),Jt=Math.log(2),Xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Mt(s,o.node,Mt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Mt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Mt.BLACK):(a(h,Mt.BLACK),a(h,Mt.RED))}return o}(new Xt(t.length));return new Ut(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.d)(ee&&Yt,"ChildrenNode.ts has not been loaded"),Gt=Gt||new t({".priority":ee},{".priority":Yt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.F)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(i.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.d)(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Rt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.D)(this.indexes_,function(t,o){var s=Object(i.F)(r.indexSet_,o);if(Object(i.d)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Rt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Rt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.D)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new Rt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&Object(i.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Kt||(Kt=new t(new Ut(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Kt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Kt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Rt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Kt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.d)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Yt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Yt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Rt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Rt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Rt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Rt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Rt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Lt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Yt),r=e.getIterator(Yt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Ut(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Zt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return P(t,function(e,r){if(Object(i.h)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new Rt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Yt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Yt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(Rt,{MIN:{value:new Rt(k,re.EMPTY_NODE)},MAX:{value:new Rt(x,ie)}}),Pt.__EMPTY_NODE=re.EMPTY_NODE,Zt.__childrenNodeConstructor=re,xt=ie,Wt=ie,zt=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.d)(!_t(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new Rt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new Rt(x,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Dt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Rt.MIN},e.prototype.maxPost=function(){return Rt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new Rt(e,n)},e.prototype.toString=function(){return".value"},e}(Dt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.d)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.d)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return k;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ye(e,a)):Object(i.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(me(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Yt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),be=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Rt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Yt,function(t,e){i.matches(new Rt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new be(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Rt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.d)(u.numChildren()===this.limit_,"");var c=new Rt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(me(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(ye(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(ye(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e){var n=t.copy();return n.index_=e,n}function Ee(t){var e,n={};return t.isDefault()||(t.index_===Yt?e="$priority":t.index_===ce?e="$value":t.index_===Lt?e="$key":(Object(i.d)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.I)(e),t.startSet_&&(n.startAt=Object(i.I)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.I)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.I)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.I)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Te(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var Ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.d)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ee(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.F)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ee(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.e)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.E)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.C)(h.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),ke=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function Ae(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,xe()),Ae(t.children.get(r),e=gt(e),n)}}function je(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Yt,function(e,n){Ae(t,new ht(e),n)}),je(t,e)}if(t.children.size>0){var r=ft(e);return e=gt(e),t.children.has(r)&&je(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new ht(e.toString()+"/"+t),n)})}var Re=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),De=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Re(t);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,o){o>0&&Object(i.h)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Pe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Le(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Fe,Me=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.d)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ve=function(){function t(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ue(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.d)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),He=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function ze(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.e)("Should only compare child_ events.");var r=new Rt(e.childName,e.snapshotNode),o=new Rt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function Ge(t,e,n,r){return We(new Be(e,n,r),t.serverCache)}function Ke(t,e,n,r){return We(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ze=function(){function t(t,e){void 0===e&&(Fe||(Fe=new Ut(j)),e=Fe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:bt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(bt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),bt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),bt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(bt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Ye=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ze(null))},t}();function Je(t,e,n){if(_t(e))return new Ye(new Ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Ye(t.writeTree_.set(i,o))}var a=new Ze(n),u=t.writeTree_.setTree(e,a);return new Ye(u)}function Xe(t,e,n){var r=t;return P(n,function(t,n){r=Je(r,bt(e,t),n)}),r}function tn(t,e){if(_t(e))return Ye.empty();var n=t.writeTree_.setTree(e,new Ze(null));return new Ye(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Yt,function(t,n){e.push(new Rt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Rt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Ye(null!=n?new Ze(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(dt(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.d)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(bt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(bt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return St(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&St(bt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Ye.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)St(n,a)?r=Je(r,u=wt(n,a),s.snap):St(a,n)&&(u=wt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.e)("WriteRecord should have .snap or .children");if(St(n,a))r=Xe(r,u=wt(n,a),s.children);else if(St(a,n))if(_t(u=wt(a,n)))r=Xe(r,dt(),s.children);else{var c=Object(i.F)(s.children,ft(u));if(c){var l=c.getChild(gt(u));r=Je(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(St(t.path,e)||St(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Yt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,o){Object(i.d)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=bt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,bt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=bt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function bn(t,e){return _n(bt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function Sn(t,e,n,r,o,s){var a=e.eventCache;if(null!=mn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Qe(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.d)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=yn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=gt(n),m=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=yn(r,n,a.getNode(),c);m=null!=v?a.getNode().getImmediateChild(f).updateChild(y,v):a.getNode().getImmediateChild(f)}else m=vn(r,f,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),f,m,y,o,s):a.getNode()}}return Ge(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function En(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Cn,null)}var g=Ke(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return Sn(t,g,n,i,new On(i,g,o),a)}function Tn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new On(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ge(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ge(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=gt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===yt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:Ge(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function In(t,e){return t.eventCache.isCompleteForChild(e)}function kn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ze(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=kn(0,e.serverCache.getNode().getImmediateChild(n),r);c=En(t,c,new ht(n),h,i,o,s,a)}}),c}var An,jn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new be(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new He(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function Rn(t){return 0===t.eventRegistrations_.length}function Dn(t,e,n){var r=[];if(n){Object(i.d)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Pn(t,e,n,r){e.type===Pe.MERGE&&null!==e.source.queryId&&(Object(i.d)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.d)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===Pe.OVERWRITE){var c=n;c.source.fromUser?s=Tn(t,e,c.path,c.snap,r,o,u):(Object(i.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=En(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===Pe.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=bt(n,r);In(e,ft(c))&&(a=Tn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=bt(n,r);In(e,ft(c))||(a=Tn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,o,a,u))}else if(n.type===Pe.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=mn(r,n))return e;var u=new On(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Qe(e));else{var d=e.serverCache.getNode();Object(i.d)(d instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ft(n),p=vn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,gt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=mn(r,dt()),Ge(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=mn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return En(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Ze(null);return u.getNode().forEachChild(Lt,function(t,e){c=c.set(new ht(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Ze(null);return r.foreach(function(t,e){var r=bt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Pe.LISTEN_COMPLETE)throw Object(i.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return Sn(t,Ke(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.d)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.d)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Ln(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Ln(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),ze(t,i,"child_removed",e,r,n),ze(t,i,"child_added",e,r,n),ze(t,i,"child_moved",o,r,n),ze(t,i,"child_changed",e,r,n),ze(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn,Mn=function(){return function(){this.views=new Map}}();function Vn(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.d)(null!=c,"SyncTree gave us an op for an invalid query."),Pn(c,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Pn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Un(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=We(new Be(s,a,!1),new Be(r,i,!1));return new jn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.g)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function Hn(t,e){return e._queryParams.loadsAllData()?Gn(t):t.views.get(e._queryIdentifier)}function zn(t,e){return null!=Hn(t,e)}function Wn(t){return null!=Gn(t)}function Gn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Kn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ze(null),this.pendingWriteTree_={visibleWrites:Ye.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Zn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:St(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,bt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Ze(null);return null!=r.snap?o=o.set(dt(),!0):P(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Me(r.path,o,n))}return[]}function Yn(t,e,n){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||zn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var d=Object(o.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.e)(f.value,2),y=g[0];l=l.concat(Dn(p=g[1],n,r)),Rn(p)&&(t.views.delete(y),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(m){s={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Dn(p,n,r)),Rn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(i.d)(An,"Reference.ts has not been loaded"),An)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Wn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Gn(e)];var r=[];return e&&(r=qn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var y=p[g],m=y.query,v=ir(t,y);t.listenProvider_.startListening(lr(m),or(t,m),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Xn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),o=o||Bn(u,dt())):(u=new Mn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var c=zn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Kn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Un(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Yt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Ln(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=Hn(u,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.d)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Wn(e))return[Gn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=bn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Vn(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=bn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Vn(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ve(Le(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.d)(r,"Missing sync point for query tag that we're tracking"),Vn(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.d)(Fn,"Reference.ts has not been loaded"),Fn)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=bt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.d)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.d)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.d)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},yr=function(t,e,n,r){return vr(e,new dr(n,t),r)},mr=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Zt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Zt(o))),u.forEachChild(Yt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var br=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.F)(r.node.children,o)||{children:{},childCount:0};r=new br(o,r,s),o=ft(n=gt(n))}return r}function wr(t){return t.node.value}function Cr(t,e){t.node.value=e,Ir(t)}function Or(t){return t.node.childCount>0}function Sr(t,e){P(t.node.children,function(n,r){e(new br(n,t,r))})}function Er(t,e,n,r){n&&!r&&e(t),Sr(t,function(t){Er(t,e,!0,r)}),n&&r&&e(t)}function Tr(t){return new ht(null===t.parent?t.name:Tr(t.parent)+"/"+t.name)}function Ir(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Or(t)}(n),o=Object(i.h)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Ir(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Ir(t))}(t.parent,t.name,t)}var kr=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,Ar=10485760,jr=function(t){return"string"==typeof t&&0!==t.length&&!kr.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},Rr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(i.h)(t,".sv")},Dr=function(t,e,n,r){r&&void 0===e||Pr(Object(i.m)(t,"value"),e,n)},Pr=function(t,e,n){var r=n instanceof ht?new Et(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+It(r));if("function"==typeof e)throw new Error(t+"contains a function "+It(r)+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+It(r));if("string"==typeof e&&e.length>Ar/3&&Object(i.G)(e)>Ar)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+It(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(P(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!jr(e)))throw new Error(t+" contains an invalid key ("+e+") "+It(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.G)(e),Tt(t)}(r,e),Pr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.G)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+It(r)+" in addition to actual children.")}},Lr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.m)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];P(e,function(t,e){var r=new ht(t);if(Pr(o,e,bt(n,r)),".priority"===yt(r)&&!Rr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!jr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&St(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Fr=function(t,e,n){if(!n||void 0!==e){if(I(e))throw new Error(Object(i.m)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Rr(e))throw new Error(Object(i.m)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.m)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Vr=function(t,e,n,r){if(!(r&&void 0===n||jr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ur=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(i.m)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!jr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error(Object(i.m)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Hr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.m)(t,e)+"must be a boolean.")},zr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Gr(t,e,n){Wr(t,n),$r(t,function(t){return Ot(t,e)})}function Kr(t,e,n){Wr(t,n),$r(t,function(t){return St(t,e)||St(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Qr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Qr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&C("event: "+n.toString()),V(r)}}}var Zr="repo_interrupt",Yr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new br,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Xr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.D)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Ze.fromObject(n);return cr(t,s,new qe(Le(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ue(Le(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.D)(n,function(t){return oe(t)});a=function(t,e,n){var r=Ze.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Yn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Kr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Xr(t),n=xe();Ne(t.onDisconnect_,dt(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Ae(n,r,o)});var r=[];Ne(n,dt(),function(e,n){r=r.concat(Yn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=xe(),Kr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Yn(t.infoSyncTree_,r,i);Kr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Xr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=mr(s,a,o),c=ri(t),l=Qn(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||T("set at "+e+" failed: "+n);var s=Zn(t.serverSyncTree_,c,!o);Kr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);fi(t,h),Kr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&je(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Ae(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Zr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function li(t,e,n,r){e&&V(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||mi(t,e),wr(e)){var n=gi(t,e);Object(i.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ci(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Zn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(mi(t,_r(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Kr(t.eventQueue_,e,i),a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(T("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,Tr(e),n)}else Or(e)&&Sr(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=Tr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.d)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=hi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Pr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,y=Xr(t),m=mr(p,d,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Qn(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Zn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Zn(t.serverSyncTree_,c.currentWriteId,!0))}Kr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(mi(t,t.transactionQueueTree_),u=0;u<r.length;u++)V(r[u]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=ft(e=gt(e));return r}function gi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Sr(e,function(e){yi(t,e,n)})}function mi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Sr(e,function(e){mi(t,e)})}function vi(t,e){var n=Tr(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){bi(t,e)}),bi(t,r),Er(r,function(e){bi(t,e)}),n}function bi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Zn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Kr(t.eventQueue_,Tr(e),o),a=0;a<r.length;a++)V(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.I)(this.snapshot.exportVal())},t}(),Oi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Si=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.d)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ei=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.a;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Dr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Dr("OnDisconnect.setWithPriority",t,this._path,!1),Fr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Ae(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Lr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.t)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=oe(r);Ae(t.onDisconnect_,bt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ti=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ai(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Te(this._queryParams),e=R(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Te(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.n)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ot(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ii(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ki(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Yt){if(null!=e&&!Rr(e)||null!=n&&!Rr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.d)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ai=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ti),ji=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Di(this.ref,e);return new t(this._node.getChild(n),r,Yt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Di(n.ref,r),Yt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=Object(i.n)(t))._checkNotDeleted("ref"),void 0!==e?Di(t._root,e):t._root}function Ri(t,e){(t=Object(i.n)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Di(t,e){var n;return null===ft((t=Object(i.n)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ur("child","path",n,!1)):Ur("child","path",e,!1),new Ai(t._repo,bt(t._path,e))}function Pi(t,e){t=Object(i.n)(t),qr("push",t._path),Dr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=Di(t,o),a=Di(t,o);return n=null!=e?Fi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Li(t){return qr("remove",t._path),Fi(t,null)}function Fi(t,e){t=Object(i.n)(t),qr("set",t._path),Dr("set",e,t._path,!1);var n=new i.a;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Mi(t,e){t=Object(i.n)(t),qr("setPriority",t._path),Fr("setPriority",e,!1);var n=new i.a;return ii(t._repo,bt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Vi(t,e,n){if(qr("setWithPriority",t._path),Dr("setWithPriority",e,t._path,!1),Fr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Ui(t,e){Lr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Xr(t),a={};if(P(n,function(n,r){o=!1,a[n]=yr(bt(e,n),oe(r),t.serverSyncTree_,s)}),o)C("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Xe(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Ze.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||T("update at "+e+" failed: "+n);var s=Zn(t.serverSyncTree_,u,!o),a=s.length>0?fi(t,e):e;Kr(t.eventQueue_,a,s),li(0,r,n,i)}),P(n,function(n){var r=vi(t,bt(e,n));fi(t,r)}),Kr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new ji(t.snapshotNode,new Ai(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.d)(null!=t.childName,"Child events should have a childName.");var n=Di(new Ai(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new ji(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Hi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){ai(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Si(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function zi(t,e,n,r){return Hi(t,"value",e,n,r)}function Wi(t,e,n,r){return Hi(t,"child_added",e,n,r)}function Gi(t,e,n,r){return Hi(t,"child_changed",e,n,r)}function Ki(t,e,n,r){return Hi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return Hi(t,"child_removed",e,n,r)}function Qi(t,e,n){var r=null,i=n?new Si(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Zi=function(){return function(){}}(),Yi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("endAt",this._value,t._path,!0);var e=Oe(t._queryParams,this._value,this._key);if(xi(e),ki(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Zi);function Ji(t,e){return Vr("endAt","key",e,!0),new Yi(t,e)}var Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=fe(n)),i=Oe(e,n,r)):i=Oe(e,n,null==r?k:fe(r)),i.endBeforeSet_=!0,i);if(xi(o),ki(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Zi);function to(t,e){return Vr("endBefore","key",e,!0),new Xi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(xi(e),ki(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ti(t._repo,t._path,e,t._orderByCalled)},e}(Zi);function no(t,e){return void 0===t&&(t=null),Vr("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Dr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?x:de(r)),i.startAfterSet_=!0,i);if(xi(o),ki(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ti(t._repo,t._path,o,t._orderByCalled)},e}(Zi);function io(t,e){return Vr("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Zi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ti(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Zi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Se(t._queryParams,n);return ki(r),new Ti(t._repo,t._path,r,!0)},e}(Zi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ur("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByKey");var e=Se(t._queryParams,Lt);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByPriority");var e=Se(t._queryParams,Yt);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function go(){return new po}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ii(t,"orderByValue");var e=Se(t._queryParams,ce);return ki(e),new Ti(t._repo,t._path,e,!0)},e}(Zi);function mo(){return new yo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Dr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Zi);function bo(t,e){return Vr("equalTo","key",e,!0),new vo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.n)(t);try{for(var u=Object(o.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.d)(!An,"__referenceConstructor has already been defined"),An=t}(Ai),function(t){Object(i.d)(!Fn,"__referenceConstructor has already been defined"),Fn=t}(Ai);var wo={},Co=!1;function Oo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new H(H.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Yr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new So(h,t)}var So=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ie(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.I)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){P(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new De(t.stats_,t.server_)},o=t.repoInfo_.toString(),Y[o]||(Y[o]=r()),Y[o]),t.infoData_=new ke,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Yn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Kr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ai(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||E("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")},t}();function Eo(t){(t=Object(i.n)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function To(t){var e;(t=Object(i.n)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Zr)}var Io={".sv":"timestamp"},ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(i.n)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=zi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new ji(r,new Ai(t._repo,t._path),Yt),s.resolve(new ko(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pr("transaction failed: Data returned ",h,c.path),c.status=0;var d=_r(e.transactionQueueTree_,n),f=wr(d)||[];f.push(c),Cr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.h)(h,".priority")?(p=Object(i.F)(h,".priority"),Object(i.d)(Rr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Xr(e),m=oe(h,p),v=mr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(e);var b=Qn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Kr(e.eventQueue_,n,b),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Ao=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.J)("OnDisconnect.cancel",0,1,arguments.length),Object(i.K)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.J)("OnDisconnect.remove",0,1,arguments.length),Object(i.K)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.J)("OnDisconnect.set",1,2,arguments.length),Object(i.K)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.J)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.K)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.J)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.K)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),jo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.J)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.J)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.J)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.J)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.J)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.J)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ur("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.J)("DataSnapshot.hasChild",1,1,arguments.length),Ur("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.J)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.J)("DataSnapshot.forEach",1,1,arguments.length),Object(i.K)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.J)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.J)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.J)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ro=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.J)("Query.on",2,4,arguments.length),Object(i.K)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new No(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return zi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Gi(this._delegate,c,l),n;case"child_moved":return Ki(this._delegate,c,l),n;default:throw new Error(Object(i.m)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.J)("Query.off",0,3,arguments.length),Mr("Query.off",t,!0),Object(i.K)("Query.off","callback",e,!0),Object(i.L)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Qi(this._delegate,t,r)}else Qi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,dt()):(i=new Mn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Un(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n).withIndex(e._queryParams.getIndex()),i=Yn(t.serverSyncTree_,e._path,r);return Gr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.I)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.n)(t))._repo,t).then(function(e){return new ji(e,new Ai(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.J)("Query.once",1,4,arguments.length),Object(i.K)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.a,c=function(t,e){var r=new No(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Gi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ki(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.m)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.J)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.J)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.J)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.J)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.J)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.J)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,mo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.J)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.J)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,bo(e,n)))},t.prototype.toString=function(){return Object(i.J)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.J)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.J)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.K)(t,"cancel",r.cancel,!0),r.context=n,Object(i.L)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.m)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Do(this.database,new Ai(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Do=function(t){function e(e,n){var r=t.call(this,e,new Ti(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.J)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.J)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Di(this._delegate,t))},e.prototype.getParent=function(){Object(i.J)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.J)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.J)("Reference.set",1,2,arguments.length),Object(i.K)("Reference.set","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.J)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.K)("Reference.update","onComplete",e,!0);var o=Ui(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.J)("Reference.setWithPriority",2,3,arguments.length),Object(i.K)("Reference.setWithPriority","onComplete",n,!0);var r=Vi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.J)("Reference.remove",0,1,arguments.length),Object(i.K)("Reference.remove","onComplete",t,!0);var e=Li(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.J)("Reference.transaction",1,3,arguments.length),Object(i.K)("Reference.transaction","transactionUpdate",t,!1),Object(i.K)("Reference.transaction","onComplete",e,!0),Hr("Reference.transaction","applyLocally",n,!0);var o=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new jo(t.committed,new No(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.J)("Reference.setPriority",1,2,arguments.length),Object(i.K)("Reference.setPriority","onComplete",e,!0);var n=Mi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.J)("Reference.push",0,2,arguments.length),Object(i.K)("Reference.push","onComplete",n,!0);var o=Pi(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ao(new Ei(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Ro),Po=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.n)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new H(H.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:Object(i.i)(r.mockUserToken,t.app.options.projectId);s=new H(a)}!function(t,e,n,r){t.repoInfo_=new K(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.J)("database.ref",0,1,arguments.length),t instanceof Do){var e=Ri(this._delegate,t.toString());return new Do(this,e)}return e=Ni(this._delegate,t),new Do(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.J)(e,1,1,arguments.length);var n=Ri(this._delegate,t);return new Do(this,n)},t.prototype.goOffline=function(){return Object(i.J)("database.goOffline",0,0,arguments.length),Eo(this._delegate)},t.prototype.goOnline=function(){return Object(i.J)("database.goOnline",0,0,arguments.length),To(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Lo=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Re(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new Po(Oo(e,c,void 0,n,a),e),namespace:o}}}),Fo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mo=Object.freeze({__proto__:null,DataConnection:Fo,RealTimeConnection:at,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:K,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Vo=Po.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Po(Oo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Do,Query:Ro,Database:Po,DataSnapshot:No,enableLogging:w,INTERNAL:Lo,ServerValue:Vo,TEST_ACCESS:Mo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),Object(i.x)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a});var i="8.10.0";r.a.registerVersion("firebase",i,"app"),r.a.SDK_VERSION=i},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return cn}),n.d(e,"b",function(){return tl}),n.d(e,"c",function(){return Qc}),n.d(e,"d",function(){return Kc}),n.d(e,"e",function(){return $c}),n.d(e,"f",function(){return Kl}),n.d(e,"g",function(){return Fl}),n.d(e,"h",function(){return Vu}),n.d(e,"i",function(){return hl}),n.d(e,"j",function(){return cu}),n.d(e,"k",function(){return rl}),n.d(e,"l",function(){return fu}),n.d(e,"m",function(){return Sr}),n.d(e,"n",function(){return Tc}),n.d(e,"o",function(){return So}),n.d(e,"p",function(){return xn}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return un}),n.d(e,"s",function(){return Uo}),n.d(e,"t",function(){return Nu}),n.d(e,"u",function(){return Du}),n.d(e,"v",function(){return nl}),n.d(e,"w",function(){return Zu}),n.d(e,"x",function(){return Vl}),n.d(e,"y",function(){return Qu}),n.d(e,"z",function(){return Nl}),n.d(e,"A",function(){return pl}),n.d(e,"B",function(){return An}),n.d(e,"C",function(){return Xc}),n.d(e,"D",function(){return Jc}),n.d(e,"E",function(){return yu}),n.d(e,"F",function(){return gu}),n.d(e,"G",function(){return Ar}),n.d(e,"H",function(){return vu}),n.d(e,"I",function(){return br}),n.d(e,"J",function(){return jn}),n.d(e,"K",function(){return Bl}),n.d(e,"L",function(){return Wu}),n.d(e,"M",function(){return wl}),n.d(e,"N",function(){return ln}),n.d(e,"O",function(){return _u}),n.d(e,"P",function(){return bu}),n.d(e,"Q",function(){return Ju}),n.d(e,"R",function(){return L}),n.d(e,"S",function(){return Rl}),n.d(e,"T",function(){return Al}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return xl}),n.d(e,"W",function(){return Wl}),n.d(e,"X",function(){return Sl}),n.d(e,"Y",function(){return el}),n.d(e,"Z",function(){return To}),n.d(e,"ab",function(){return oa}),n.d(e,"bb",function(){return y}),n.d(e,"cb",function(){return mr}),n.d(e,"db",function(){return Xn}),n.d(e,"eb",function(){return qn}),n.d(e,"fb",function(){return Hn}),n.d(e,"gb",function(){return Kn}),n.d(e,"hb",function(){return Wn}),n.d(e,"ib",function(){return zn}),n.d(e,"jb",function(){return Gn}),n.d(e,"kb",function(){return ea}),n.d(e,"lb",function(){return zl}),n.d(e,"mb",function(){return na}),n.d(e,"nb",function(){return ra}),n.d(e,"ob",function(){return Bn}),n.d(e,"pb",function(){return q}),n.d(e,"qb",function(){return Zo}),n.d(e,"rb",function(){return ys}),n.d(e,"sb",function(){return ps}),n.d(e,"tb",function(){return gs}),n.d(e,"ub",function(){return ta}),n.d(e,"vb",function(){return Tt}),n.d(e,"wb",function(){return l}),n.d(e,"xb",function(){return Un}),n.d(e,"yb",function(){return Bo}),n.d(e,"zb",function(){return _t}),n.d(e,"Ab",function(){return su}),n.d(e,"Bb",function(){return Ti}),n.d(e,"Cb",function(){return es}),n.d(e,"Db",function(){return Ds}),n.d(e,"Eb",function(){return Qs}),n.d(e,"Fb",function(){return Rs}),n.d(e,"Gb",function(){return Uc}),n.d(e,"Hb",function(){return X}),n.d(e,"Ib",function(){return st}),n.d(e,"Jb",function(){return w}),n.d(e,"Kb",function(){return C}),n.d(e,"Lb",function(){return rt}),n.d(e,"Mb",function(){return at}),n.d(e,"Nb",function(){return os}),n.d(e,"Ob",function(){return ls}),n.d(e,"Pb",function(){return ds}),n.d(e,"Qb",function(){return hs}),n.d(e,"Rb",function(){return cs}),n.d(e,"Sb",function(){return us}),n.d(e,"Tb",function(){return fs}),n.d(e,"Ub",function(){return nn}),n.d(e,"Vb",function(){return Zs}),n.d(e,"Wb",function(){return Za}),n.d(e,"Xb",function(){return Ja}),n.d(e,"Yb",function(){return Ya}),n.d(e,"Zb",function(){return Tn}),n.d(e,"ac",function(){return on}),n.d(e,"bc",function(){return Gc}),n.d(e,"cc",function(){return ms}),n.d(e,"dc",function(){return qc}),n.d(e,"ec",function(){return _s}),n.d(e,"fc",function(){return _c}),n.d(e,"gc",function(){return wc}),n.d(e,"hc",function(){return Cc}),n.d(e,"ic",function(){return Os}),n.d(e,"jc",function(){return Cs}),n.d(e,"kc",function(){return ss}),n.d(e,"lc",function(){return Ss}),n.d(e,"mc",function(){return Es}),n.d(e,"nc",function(){return fc}),n.d(e,"oc",function(){return pc}),n.d(e,"pc",function(){return gc}),n.d(e,"qc",function(){return yc}),n.d(e,"rc",function(){return Mc}),n.d(e,"sc",function(){return is}),n.d(e,"tc",function(){return Gt}),n.d(e,"uc",function(){return _r}),n.d(e,"vc",function(){return it}),n.d(e,"wc",function(){return Ns}),n.d(e,"xc",function(){return rs}),n.d(e,"yc",function(){return Wc}),n.d(e,"zc",function(){return Gs}),n.d(e,"Ac",function(){return Ks}),n.d(e,"Bc",function(){return $s}),n.d(e,"Cc",function(){return Vc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function _(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function O(t){return S(t,T)||S(t,k)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(x))?t[I]:null}const T=u({"\u0275prov":u}),I=u({"\u0275inj":u}),k=u({ngInjectableDef:u}),x=u({ngInjectorDef:u});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function N(t){const e=j;return j=t,e}function R(t,e,n){const r=O(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function D(t){return{toString:t}.toString()}var P=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),L=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=F||U||M||V,B={},H=[],z=[],W=u({"\u0275cmp":u}),G=u({"\u0275dir":u}),K=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),Q=u({"\u0275loc":u}),Z=u({"\u0275fac":u}),Y=u({__NG_ELEMENT_ID__:u});let J=0;function X(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===P.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[G]||null}(t)}function et(t){return function(t){return t[K]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{nt[t.id]=t.type}),e}function it(t,e){return D(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[W]||null}function ct(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Z)?t[Z]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ot),Ct}function Ct(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ot(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===B),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Et;function Tt(t){Et=t}function It(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function kt(t){return!!t.listen}_t.ngInherit=!0;const xt={createRenderer:(t,e)=>It()};function At(t){for(;Array.isArray(t);)t=t[0];return t}function jt(t,e){return At(e[t])}function Nt(t,e){return At(e[t.index])}function Rt(t,e){return t.data[e]}function Dt(t,e){return t[e]}function Pt(t,e){const n=e[t];return dt(n)?n:n[0]}function Lt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Ft(t){return 4==(4&t[2])}function Mt(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function qt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function zt(){return Bt.lFrame.lView}function Wt(){return Bt.lFrame.tView}function Gt(t){Bt.lFrame.contextLView=t}function Kt(){let t=$t();for(;null!==t&&64===t.type;)t=t.parent;return t}function $t(){return Bt.lFrame.currentTNode}function Qt(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zt(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function Yt(){return Bt.lFrame.isParent}function Jt(){Bt.lFrame.isParent=!1}function Xt(){return Bt.isInCheckNoChangesMode}function te(t){Bt.isInCheckNoChangesMode=t}function ee(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ne(){return Bt.lFrame.bindingIndex}function re(){return Bt.lFrame.bindingIndex++}function ie(t){const e=Bt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t){Bt.lFrame.inI18n=t}function se(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ae(e)}function ae(t){Bt.lFrame.currentDirectiveIndex=t}function ue(){return Bt.lFrame.currentQueryIndex}function ce(t){Bt.lFrame.currentQueryIndex=t}function le(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=fe();return r.currentTNode=e,r.lView=t,!0}function de(t){const e=fe(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fe(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ge(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ye=ge;function me(){const t=ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return Bt.lFrame.selectedIndex}function be(t){Bt.lFrame.selectedIndex=t}function _e(){const t=Bt.lFrame;return Rt(t.tView,t.selectedIndex)}function we(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ce(t,e,n){Ee(t,e,3,n)}function Oe(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Se(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ie=-1;class ke{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function xe(t,e,n){const r=kt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];je(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ae(t){return 3===t||4===t||6===t}function je(t){return 64===t.charCodeAt(0)}function Ne(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Re(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Re(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function De(t){return t!==Ie}function Pe(t){return 32767&t}function Le(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Fe=!0;function Me(t){const e=Fe;return Fe=t,e}let Ve=0;function Ue(t,e){const n=Be(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,qe(r.data,t),qe(e,null),qe(r.blueprint,null));const i=He(t,e),o=t.injectorIndex;if(De(i)){const t=Pe(i),n=Le(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function qe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Be(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Ve++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function We(t,e,n){if(n&A.Optional)return t;b(e,"NodeInjector")}function Ge(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&A.Optional):R(e,r,n&A.Optional)}finally{N(o)}}return We(r,e,n)}function Ke(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Y)?t[Y]:void 0;return"number"==typeof e?e>=0?255&e:Qe:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&A.Host?We(i,n,r):Ge(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;b(n)}finally{ye()}}else if("number"==typeof o){let i=null,s=Be(t,e),a=Ie,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?He(t,e):e[s+8],a!==Ie&&tn(r,!1)?(i=e[1],s=Pe(a),e=Le(a,e)):s=-1);-1!==s;){const t=e[1];if(Xe(o,s,t.data)){const t=Ze(s,e,n,i,r,u);if(t!==$e)return t}a=e[s+8],a!==Ie&&tn(r,e[1].data[s+8]===u)&&Xe(o,s,e)?(i=t,s=Pe(a),e=Le(a,e)):s=-1}}}return Ge(e,n,r,i)}const $e={};function Qe(){return new en(Kt(),zt())}function Ze(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ye(a,s,n,null==r?gt(a)&&Fe:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?Je(e,s,u,a):$e}function Ye(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function Je(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ke){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Me(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;he(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Me(a),s.resolving=!1,ye()}}return i}function Xe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function tn(t,e){return!(t&A.Self||t&A.Host&&e)}class en{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ke(this._tNode,this._lView,t,void 0,e)}}function nn(t){return D(()=>{const e=t.prototype.constructor,n=e[Z]||rn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Z]||rn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function rn(t){return g(t)?()=>{const e=rn(p(t));return e&&e()}:vt(t)}function on(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ae(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const sn="__parameters__";function an(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(sn)?t[sn]:Object.defineProperty(t,sn,{value:[]})[sn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class un{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cn=new un("AnalyzeForEntryComponents"),ln=Function;function hn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),hn(r,e)):e!==t&&e.push(r)}return e}function dn(t,e){t.forEach(t=>Array.isArray(t)?dn(t,e):e(t))}function fn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function yn(t,e,n){let r=vn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=vn(t,e);if(n>=0)return t[1|n]}function vn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const bn={},_n=/\n/gm,wn="__source",Cn=u({provide:String,useValue:u});let On;function Sn(t){const e=On;return On=t,e}function En(t,e=A.Default){if(void 0===On)throw new Error("inject() must be called from an injection context");return null===On?R(t,void 0,e):On.get(t,e&A.Optional?null:void 0,e)}function Tn(t,e=A.Default){return(j||En)(p(t),e)}function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function kn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const xn=kn(an("Inject",t=>({token:t})),-1),An=kn(an("Optional"),8),jn=kn(an("SkipSelf"),4);let Nn;function Rn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,q.trustedTypes))try{Nn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Dn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Pn extends Dn{getTypeName(){return"HTML"}}class Ln extends Dn{getTypeName(){return"Style"}}class Fn extends Dn{getTypeName(){return"Script"}}class Mn extends Dn{getTypeName(){return"URL"}}class Vn extends Dn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof Dn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Bn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Bn(t){return t instanceof Dn&&t.getTypeName()||null}function Hn(t){return new Pn(t)}function zn(t){return new Ln(t)}function Wn(t){return new Fn(t)}function Gn(t){return new Mn(t)}function Kn(t){return new Vn(t)}function $n(t){const e=new Zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Rn(""),"text/html")}catch(t){return!1}}()?new Qn(e):e}class Qn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Rn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Rn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Rn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xn(t){return(t=String(t)).match(Yn)||t.match(Jn)?t:"unsafe:"+t}function tr(t){return(t=String(t)).split(",").map(t=>Xn(t.trim())).join(", ")}function er(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function nr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const rr=er("area,br,col,hr,img,wbr"),ir=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=er("rp,rt"),sr=nr(or,ir),ar=nr(rr,nr(ir,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(or,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),ur=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cr=er("srcset"),lr=nr(ur,cr,er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hr=er("script,style,template");class dr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ar.hasOwnProperty(e))return this.sanitizedSomething=!0,!hr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!lr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;ur[i]&&(o=Xn(o)),cr[i]&&(o=tr(o)),this.buf.push(" ",e,'="',gr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ar.hasOwnProperty(e)&&!rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(fr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(pr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function mr(t,e){let n=null;try{yr=yr||$n(t);let r=e?String(e):"";n=yr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==o);return Rn((new dr).sanitizeChildren(vr(n)||n))}finally{if(n){const t=vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function _r(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(br.URL,t)||"":qn(t,"URL")?Un(t):Xn(m(t))}function wr(t){return t.ngDebugContext}function Cr(t){return t.ngOriginalError}function Or(t,...e){t.error(...e)}class Sr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?wr(t)?wr(t):this._findContext(Cr(t)):null}_findOriginalError(t){let e=Cr(t);for(;e&&Cr(e);)e=Cr(e);return e}}const Er=/^>|^->|<!--|-->|--!>|<!-$/g,Tr=/(<|>)/;function Ir(t,e){t.__ngContext__=e}const kr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function xr(t){return t instanceof Function?t():t}var Ar=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let jr;function Nr(t,e){return jr(t,e)}function Rr(t){const e=t[3];return ft(e)?e[3]:e}function Dr(t){return Lr(t[13])}function Pr(t){return Lr(t[4])}function Lr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Fr(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?Qr(e,n,a):$r(e,n,a,i||null,!0):1===t&&null!==n?$r(e,n,a,i||null,!0):2===t?ai(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==At(n)&&Fr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];ci(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Mr(t,e){return kt(t)?t.createText(e):t.createTextNode(e)}function Vr(t,e,n){kt(t)?t.setValue(e,n):e.textContent=n}function Ur(t,e){return t.createComment(function(t){return t.replace(Er,t=>t.replace(Tr,"\u200b$1\u200b"))}(e))}function qr(t,e,n){return kt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Br(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Hr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Br(o,r),e>0&&(t[n-1][4]=r[4]);const s=pn(t,ht+e);ci(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function zr(t,e){if(!(256&e[2])){const n=e[11];kt(n)&&n.destroyNode&&ci(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Wr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Wr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Wr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Wr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ke)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):At(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&kt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Br(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Gr(t,e,n){return Kr(t,e.parent,n)}function Kr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Nt(r,n)}function $r(t,e,n,r,i){kt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Qr(t,e,n){kt(t)?t.appendChild(e,n):e.appendChild(n)}function Zr(t,e,n,r,i){null!==r?$r(t,e,n,r,i):Qr(t,e,n)}function Yr(t,e){return kt(t)?t.parentNode(e):e.parentNode}function Jr(t,e,n){return ei(t,e,n)}function Xr(t,e,n){return 40&t.type?Nt(t,n):null}let ti,ei=Xr;function ni(t,e){ei=t,ti=e}function ri(t,e,n,r){const i=Gr(t,r,e),o=e[11],s=Jr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Zr(o,i,n[a],s,!1);else Zr(o,i,n,s,!1);void 0!==ti&&ti(o,r,e,n,i)}function ii(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return si(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ii(t,n);{const n=t[e.index];return ft(n)?si(-1,n):At(n)}}if(32&n)return Nr(e,t)()||At(t[e.index]);{const n=oi(t,e);return null!==n?Array.isArray(n)?n[0]:ii(Rr(t[16]),n):ii(t,e.next)}}return null}function oi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function si(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ii(t,r)}return e[7]}function ai(t,e,n){const r=Yr(t,e);r&&function(t,e,n,r){kt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function ui(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Ir(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)ui(t,e,n.child,r,i,o,!1),Fr(e,t,i,a,o);else if(32&u){const s=Nr(n,r);let u;for(;u=s();)Fr(e,t,i,u,o);Fr(e,t,i,a,o)}else 16&u?li(t,e,r,n,i,o):Fr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ci(t,e,n,r,i,o){ui(n,r,t.firstChild,e,i,o,!1)}function li(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Fr(e,t,i,a[u],o);else ui(t,e,a,s[3],i,o,!0)}function hi(t,e,n){kt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function di(t,e,n){kt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function fi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const pi="ng-template";function gi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==fi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function yi(t){return 4===t.type&&t.value!==pi}function mi(t,e,n){return e===(4!==t.type||n?t.value:pi)}function vi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ae(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!mi(t,u,n)||""===u&&1===e.length){if(bi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!gi(t.attrs,c,n)){if(bi(r))return!1;s=!0}continue}const l=_i(8&r?"class":u,i,yi(t),n);if(-1===l){if(bi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==fi(e,c,0)||2&r&&c!==t){if(bi(r))return!1;s=!0}}}}else{if(!s&&!bi(r)&&!bi(u))return!1;if(s&&bi(u))continue;s=!1,r=u|1&r}}return bi(r)||s}function bi(t){return 0==(1&t)}function _i(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function wi(t,e,n=!1){for(let r=0;r<e.length;r++)if(vi(t,e[r],n))return!0;return!1}function Ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Oi(t,e){return t?":not("+e.trim()+")":e}function Si(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||bi(s)||(e+=Oi(o,i),i=""),r=s,o=o||!bi(r);n++}return""!==i&&(e+=Oi(o,i)),e}const Ei={};function Ti(t){Ii(Wt(),zt(),ve()+t,Xt())}function Ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ce(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Oe(e,r,0,n)}be(n)}function ki(t,e){return t<<17|e<<2}function xi(t){return t>>17&32767}function Ai(t){return 2|t}function ji(t){return(131068&t)>>2}function Ni(t,e){return-131069&t|e<<2}function Ri(t){return 1|t}function Di(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ce(i),n.contentQueries(2,e[o],o)}}}function Pi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Li(t,e,n,r,i){let o=t.data[e];if(null===o)o=Fi(t,e,n,r,i),Bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Qt();o.injectorIndex=null===t?-1:t.injectorIndex}return Zt(o,!0),o}function Fi(t,e,n,r,i){const o=$t(),s=Yt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Mi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vi(t,e,n){de(e);try{const r=t.viewQuery;null!==r&&mo(1,r,n);const i=t.template;null!==i&&Bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Di(t,e),t.staticViewQueries&&mo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ho(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function Ui(t,e,n,r){const i=e[2];if(256==(256&i))return;de(e);const o=Xt();try{Ut(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Bi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ce(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Oe(e,n,0,null),Se(e,0)}if(function(t){for(let e=Dr(t);null!==e;e=Pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&qt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Dr(t);null!==e;e=Pr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Mt(n)&&Ui(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Di(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ce(e,n)}else{const n=t.contentHooks;null!==n&&Oe(e,n,1),Se(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)be(~r);else{const i=r,o=n[++t],s=n[++t];se(o,i),s(2,e[i])}}}finally{be(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)co(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&mo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ce(e,n)}else{const n=t.viewHooks;null!==n&&Oe(e,n,2),Se(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{me()}}function qi(t,e,n,r){const i=e[10],o=!Xt(),s=Ft(e);try{o&&!s&&i.begin&&i.begin(),s&&Vi(t,e,r),Ui(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Bi(t,e,n,r,i){const o=ve(),s=2&r;try{be(-1),s&&e.length>lt&&Ii(t,e,lt,Xt()),n(r,i)}finally{be(o)}}function Hi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function zi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&io(e,n,r);const u=Je(e,t,a,n);Ir(u,e),null!==s&&so(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bt.lFrame.currentDirectiveIndex;try{be(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ae(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Xi(r,i)}}finally{be(-1),ae(s)}}(t,e,n))}function Wi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Gi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ki(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ki(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ei);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function $i(t,e,n,r){const i=bo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&_o(t).push(r,i.length-1))}function Qi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Zi(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Co(t,n,c,r,i),gt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,kt(o)?o.setProperty(u,r,i):je(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Yi(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];wi(n,s.selectors,!1)&&(i||(i=[]),ze(Ue(n,e),t,s.type),mt(s)?(to(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,no(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Mi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ne(n.mergedAttrs,c.hostAttrs),ro(t,n,e,u,c),eo(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||yi(e)?null:ao(n,i);o.push(c),s=Qi(n,u,s),a=Qi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ne(n.mergedAttrs,n.attrs),i}function Ji(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Xi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function to(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function eo(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function no(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ro(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new ke(o,mt(i),null);t.blueprint[r]=s,n[r]=s,Ji(t,e,0,r,Mi(t,n,i.hostVars,Ei),i)}function io(t,e,n){const r=Nt(e,t),i=Gi(n),o=t[10],s=fo(t,Pi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function oo(t,e,n,r,i,o,s){if(null==o)kt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);kt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function so(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ao(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function uo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function co(t,e){const n=Pt(e,t);if(Mt(n)){const t=n[1];80&n[2]?Ui(t,n,t.template,n[8]):n[5]>0&&lo(n)}}function lo(t){for(let n=Dr(t);null!==n;n=Pr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ui(t,e,t.template,e[8])}else e[5]>0&&lo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Mt(r)&&r[5]>0&&lo(r)}}function ho(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Vi(r,n,n[8])}function fo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function po(t){for(;t;){t[2]|=64;const e=Rr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function go(t,e,n){const r=e[10];r.begin&&r.begin();try{Ui(t,e,t.template,n)}catch(i){throw wo(e,i),i}finally{r.end&&r.end()}}function yo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Lt(n),i=r[1];qi(i,r,i.template,n)}}(t[8])}function mo(t,e,n){ce(0),e(t,n)}const vo=(()=>Promise.resolve(null))();function bo(t){return t[7]||(t[7]=[])}function _o(t){return t.cleanup||(t.cleanup=[])}function wo(t,e){const n=t[9],r=n?n.get(Sr,null):null;r&&r.handleError(e)}function Co(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Oo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const So=new un("INJECTOR",-1);class Eo{get(t,e=bn){if(e===bn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const To=new un("Set Injector scope."),Io={},ko={},xo=[];let Ao;function jo(){return void 0===Ao&&(Ao=new Eo),Ao}function No(t,e=null,n=null,r){return new Ro(t,n,e||jo(),r)}class Ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&dn(e,n=>this.processProvider(n,t,e)),dn([t],t=>this.processInjectorType(t,[],i)),this.records.set(So,Lo(void 0,this));const o=this.records.get(To);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=bn,n=A.Default){this.assertNotDestroyed();const r=Sn(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof un)&&O(t);e=n&&this.injectableDefInScope(n)?Lo(Do(t),Io):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?jo():this.parent).get(t,e=n&A.Optional&&e===bn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[wn]&&i.unshift(e[wn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_n,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Sn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{dn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];dn(r,t=>this.processProvider(t,n,r||xo))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,Lo(a,Io));const u=r.providers;if(null!=u&&!s){const e=t;dn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Mo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Fo(t)?Lo(void 0,t.useValue):Lo(Po(t),Io)}(t);if(Mo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Lo(void 0,Io,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Io&&(e.value=ko,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Do(t){const e=O(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof un)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=gn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[k]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Po(t,e,n){let r;if(Mo(t)){const e=p(t);return vt(e)||Do(e)}if(Fo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||Do(e);r=()=>new e(...In(t.deps))}var i;return r}function Lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fo(t){return null!==t&&"object"==typeof t&&Cn in t}function Mo(t){return"function"==typeof t}const Vo=function(t,e,n){return function(t,e=null,n=null,r){const i=No(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Uo=(()=>{class t{static create(t,e){return Array.isArray(t)?Vo(t,e,""):Vo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=bn,t.NULL=new Eo,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>Tn(So)}),t.__NG_ELEMENT_ID__=-1,t})();function qo(t,e){we(Lt(t)[1],Kt())}function Bo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Ho(t.inputs),e.declaredInputs=Ho(t.declaredInputs),e.outputs=Ho(t.outputs);const n=i.hostBindings;n&&Go(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&zo(t,o),s&&Wo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Bo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ne(i.hostAttrs,n=Ne(n,i.hostAttrs))}}(r)}function Ho(t){return t===B?{}:t===z?[]:t}function zo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Wo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Go(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ko=null;function $o(){if(!Ko){const t=q.Symbol;if(t&&t.iterator)Ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ko=n)}}}return Ko}class Qo{constructor(t){this.wrapped=t}static wrap(t){return new Qo(t)}static unwrap(t){return Qo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Qo}}function Zo(t){return!!Yo(t)&&(Array.isArray(t)||!(t instanceof Map)&&$o()in t)}function Yo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Jo(t,e,n){return t[e]=n}function Xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function ts(t,e,n,r){const i=Xo(t,e,n);return Xo(t,e+1,r)||i}function es(t,e,n,r){const i=zt();return Xo(i,re(),e)&&(Wt(),function(t,e,n,r,i,o){const s=Nt(t,e);oo(e[11],s,o,t.value,n,r,i)}(_e(),i,t,e,n,r)),es}function ns(t,e,n,r){return Xo(t,re(),n)?e+m(n)+r:Ei}function rs(t,e,n,r,i,o,s,a){const u=zt(),c=Wt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Li(e,t,4,s||null,Vt(c,a));Yi(e,n,l,Vt(c,u)),we(e,l);const h=l.tViews=Ki(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Zt(h,!1);const d=u[11].createComment("");ri(c,u,d,h),Ir(d,u),fo(u,u[l]=uo(d,u,d,h)),yt(h)&&zi(c,u,h),null!=s&&Wi(u,h,a)}function is(t){return Dt(Bt.lFrame.contextLView,lt+t)}function os(t,e=A.Default){const n=zt();return null===n?Tn(t,e):Ke(Kt(),n,p(t),e)}function ss(t,e,n){const r=zt();return Xo(r,re(),e)&&Zi(Wt(),_e(),r,t,e,r[11],n,!1),ss}function as(t,e,n,r,i){const o=i?"class":"style";Co(t,n,e.inputs[o],o,r)}function us(t,e,n,r){const i=zt(),o=Wt(),s=lt+t,a=i[11],u=i[s]=qr(a,e,Bt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Li(e,t,2,i,Vt(a,o));return Yi(e,n,u,Vt(a,s)),null!==u.attrs&&Oo(u,u.attrs,!1),null!==u.mergedAttrs&&Oo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Zt(c,!0);const l=c.mergedAttrs;null!==l&&xe(a,u,l);const h=c.classes;null!==h&&di(a,u,h);const d=c.styles;null!==d&&hi(a,u,d),64!=(64&c.flags)&&ri(o,i,u,c),0===Bt.lFrame.elementDepthCount&&Ir(u,i),Bt.lFrame.elementDepthCount++,yt(c)&&(zi(o,i,c),Hi(o,c,i)),null!==r&&Wi(i,c)}function cs(){let t=Kt();Yt()?Jt():(t=t.parent,Zt(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=Wt();n.firstCreatePass&&(we(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&as(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&as(n,e,zt(),e.stylesWithoutHost,!1)}function ls(t,e,n,r){us(t,e,n,r),cs()}function hs(t,e,n){const r=zt(),i=Wt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Li(e,t,8,"ng-container",s);return null!==s&&Oo(a,s,!0),Yi(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Zt(s,!0);const a=r[o]=r[11].createComment("");ri(i,r,a,s),Ir(a,r),yt(s)&&(zi(i,r,s),Hi(i,s,r)),null!=n&&Wi(r,s)}function ds(){let t=Kt();const e=Wt();Yt()?Jt():(t=t.parent,Zt(t,!1)),e.firstCreatePass&&(we(e,t),pt(t)&&e.queries.elementEnd(t))}function fs(){return zt()}function ps(t){return!!t&&"function"==typeof t.then}function gs(t){return!!t&&"function"==typeof t.subscribe}const ys=gs;function ms(t,e,n=!1,r){const i=zt(),o=Wt(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&_o(t),l=bo(e);let h=!0;if(3&r.type){const d=Nt(r,e),f=a?a(d):B,p=f.target||d,g=l.length,y=a?t=>a(At(t[r.index])).target:r.index;if(kt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=bs(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=bs(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=bs(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ms}function vs(t,e,n,r){try{return!1!==n(r)}catch(i){return wo(t,i),!1}}function bs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&po(s);let a=vs(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=vs(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function _s(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function ws(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?wi(t,o,!0):Ci(r,o))return i}else n=i}return n}function Cs(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=gn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ws(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Os(t,e=0,n){const r=zt(),i=Wt(),o=Li(i,lt+t,16,null,n||null);null===o.projection&&(o.projection=e),Jt(),64!=(64&o.flags)&&function(t,e,n){li(e[11],0,e,n,Gr(t,n,e),Jr(n.parent||e[6],n,e))}(i,r,o)}function Ss(t,e,n){return Es(t,"",e,"",n),Ss}function Es(t,e,n,r,i){const o=zt(),s=ns(o,e,n,r);return s!==Ei&&Zi(Wt(),_e(),o,t,s,o[11],i,!1),Es}function Ts(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?xi(o):ji(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Is(t[a],e)&&(u=!0,t[a+1]=r?Ri(n):Ai(n)),a=r?xi(n):ji(n)}u&&(t[n+1]=r?Ai(o):Ri(o))}function Is(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vn(t,e)>=0}const ks={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xs(t){return t.substring(ks.key,ks.keyEnd)}function As(t,e){const n=ks.textEnd;return n===e?-1:(e=ks.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ks.key=e,n),js(t,e,n))}function js(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ns(t,e,n){return Ls(t,e,n,!1),Ns}function Rs(t,e){return Ls(t,e,null,!0),Rs}function Ds(t){Fs(yn,Ps,t,!0)}function Ps(t,e){for(let n=function(t){return function(t){ks.key=0,ks.keyEnd=0,ks.value=0,ks.valueEnd=0,ks.textEnd=t.length}(t),As(t,js(t,0,ks.textEnd))}(e);n>=0;n=As(e,n))yn(t,xs(e),!0)}function Ls(t,e,n,r){const i=zt(),o=Wt(),s=ie(2);o.firstUpdatePass&&Vs(o,t,s,r),e!==Ei&&Xo(i,s,e)&&Bs(o,o.data[ve()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Un(t)))),t}(e,n),r,s)}function Fs(t,e,n,r){const i=Wt(),o=ie(2);i.firstUpdatePass&&Vs(i,null,o,r);const s=zt();if(n!==Ei&&Xo(s,o,n)){const a=i.data[ve()];if(Ws(a,r)&&!Ms(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),as(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Ei&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&Bs(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Un(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ms(t,e){return e>=t.expandoStartIndex}function Vs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ve()],s=Ms(t,n);Ws(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Bt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=qs(n=Us(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Us(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ji(r))return t[xi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Us(null,t,e,n[1],r),n=qs(n,e.attrs,r),function(t,e,n,r){t[xi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qs(r,t[o].hostAttrs,n);return qs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xi(s),u=ji(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||vn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=xi(t[a+1]);t[r+1]=ki(e,a),0!==e&&(t[e+1]=Ni(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ki(a,0),0!==a&&(t[a+1]=Ni(t[a+1],r)),a=r;else t[r+1]=ki(u,0),0===a?a=r:t[u+1]=Ni(t[u+1],r),u=r;l&&(t[r+1]=Ai(t[r+1])),Ts(t,c,r,!0),Ts(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vn(o,e)>=0&&(n[r+1]=Ri(n[r+1]))}(e,c,t,r,o),s=ki(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Us(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Bs(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];zs(1==(1&c)?Hs(u,e,n,i,ji(c),s):void 0)||(zs(o)||2==(2&c)&&(o=Hs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=kt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Ar.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Ar.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,jt(ve(),n),i,o))}function Hs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Ei&&(l=c?H:void 0);let h=c?mn(l,r):u===r?l:void 0;if(o&&!zs(h)&&(h=mn(e,r)),zs(h)&&(a=h,s))return a;const d=t[i+1];i=s?xi(d):ji(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function zs(t){return void 0!==t}function Ws(t,e){return 0!=(t.flags&(e?16:32))}function Gs(t,e=""){const n=zt(),r=Wt(),i=t+lt,o=r.firstCreatePass?Li(r,i,1,e,null):r.data[i],s=n[i]=Mr(n[11],e);ri(r,n,s,o),Zt(o,!1)}function Ks(t){return $s("",t,""),Ks}function $s(t,e,n){const r=zt(),i=ns(r,t,e,n);return i!==Ei&&function(t,e,n){const r=jt(e,t);Vr(t[11],r,n)}(r,ve(),i),$s}function Qs(t,e,n,r,i,o,s,a,u){Fs(yn,Ps,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=ts(t,e,n,r);return ts(t,e+2,i,o)||s}(t,ne(),n,i,s,u);return ie(4),l?e+m(n)+r+m(i)+o+m(s)+a+m(u)+c:Ei}(zt(),t,e,n,r,i,o,s,a,u),!0)}function Zs(t,e,n){const r=zt();return Xo(r,re(),e)&&Zi(Wt(),_e(),r,t,e,r[11],n,!0),Zs}const Ys=void 0;var Js=["en",[["a","p"],["AM","PM"],Ys],[["AM","PM"],Ys,Ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ys,"{1} 'at' {0}",Ys],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Xs={};function ta(t,e,n){"string"!=typeof e&&(n=e,e=t[oa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Xs[e]=t,n&&(Xs[e][oa.ExtraData]=n)}function ea(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ia(e);if(n)return n;const r=e.split("-")[0];if(n=ia(r),n)return n;if("en"===r)return Js;throw new Error(`Missing locale data for the locale "${t}".`)}function na(t){return ea(t)[oa.CurrencyCode]||null}function ra(t){return ea(t)[oa.PluralCase]}function ia(t){return t in Xs||(Xs[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Xs[t]}var oa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const sa=["zero","one","two","few","many"],aa="en-US",ua={marker:"element"},ca={marker:"ICU"};var la=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let ha=aa;function da(t){var e;null==(e=t)&&_("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(ha=t.toLowerCase().replace(/_/g,"-"))}function fa(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Xr(t,0,n):At(n[i])}function pa(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)$r(t,s,n[o[e]],a,!1)}}function ga(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];ya(r)||ma(r,e)&&null===va(r)&&ba(r,e.index)}}function ya(t){return!(64&t.type)}function ma(t,e){return ya(e)||t.index>e.index}function va(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function ba(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(ni(fa,pa),t.insertBeforeIndex=e)}function _a(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function wa(t,e,n){const r=Fi(t,n,64,null,null);return ga(e,r),r}function Ca(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Oa=0,Sa=0;function Ea(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Mr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=Yr(i,r)),c===s?(l=r,h=o):(l=null,h=At(n[c])),null!==h){const e=(131070&u)>>>1;$r(i,h,n[e],l,!1);const r=_a(t,e);if(null!==r&&"object"==typeof r){const e=Ca(r,n);null!==e&&Ea(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];oo(i,jt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case ca:const t=e[++a],r=e[++a];null===n[r]&&Ir(n[r]=Ur(i,t),n);break;case ua:const o=e[++a],s=e[++a];null===n[s]&&Ir(n[s]=qr(i,o,null),n)}}}function Ta(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=m(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?oo(e[11],e[a],null,c,o,i,u):Zi(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Vr(e[11],l,i);break;case 2:ka(t,_a(t,a),e,i);break;case 3:Ia(t,_a(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=_a(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Ia(t,n,r,e)}}o+=a}}function Ia(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Oa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),Ta(t,r,e.update[i],n,o)}}function ka(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=ra(e)(parseInt(t,10)),r=sa[n];return void 0!==r?r:"other"}(e,ha);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ca(e,n)!==i&&(xa(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ea(t,e.create[i],n,r)}}function xa(t,e,n){let r=Ca(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=jt(r,n);null!==t&&ai(n[11],t)}else xa(t,_a(t,~r),n)}}}const Aa=/\ufffd(\d+):?\d*\ufffd/gi,ja=/\ufffd(\d+)\ufffd/,Na=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ra=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Da=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Pa=/\uE500/g;function La(t,e,n,r,i,o,s){const a=Mi(t,r,1,null);let u=a<<la.SHIFT,c=Qt();e===c&&(c=null),null===c&&(u|=la.APPEND_EAGERLY),s&&(u|=la.COMMENT,void 0===jr&&(jr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ca(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Fi(t,a,s?32:1,null===o?"":o,null);ga(n,l);const h=l.index;return Zt(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(ni(fa,pa),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&_("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Fa(t,e,n,r,i,o,s){const a=s.match(Aa),u=La(t,e,n,o,r,a?null:s,!1);a&&Ma(i,s,u.index,null,0,null)}function Ma(t,e,n,r,i,o){const s=t.length,a=s+1;t.push(null,null);const u=s+2,c=e.split(Aa);let l=0;for(let h=0;h<c.length;h++){const e=c[h];if(1&h){const n=i+parseInt(e,10);t.push(-1-n),l|=Va(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,o),t[s]=l,t[a]=t.length-u,l}function Va(t){return 1<<Math.min(t,31)}function Ua(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Ra.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function qa(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Mi(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(Va(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=za(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function Ba(t){const e=[],n=[];let r=1,i=0;const o=Ha(t=t.replace(Na,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Ha(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Ha(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Na.test(n)?r.push(Ba(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function za(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=$n(It()).getInertBodyElement(s),d=vr(h)||h;return d?Wa(t,e,n,r,u,c,l,d,i,a,0):0}function Wa(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Mi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(ar.hasOwnProperty(p)){$a(i,ua,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Aa)?lr.hasOwnProperty(n)&&Ma(s,e.value,a,e.name,0,ur[n]?Xn:cr[n]?tr:null):Qa(i,a,e)}h=Wa(t,e,n,r,i,o,s,d,a,c,l+1)|h,Ga(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",y=g.match(Aa);$a(i,null,y?"":g,u,a),Ga(o,a,l),y&&(h=Ma(s,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const m=ja.exec(d.textContent||"");if(m){const e=c[parseInt(m[1],10)];$a(i,ca,"",u,a),qa(t,n,r,u,e,a),Ka(o,a,l)}}d=d.nextSibling}return h}function Ga(t,e,n){0===n&&t.push(e)}function Ka(t,e,n){0===n&&(t.push(~e),t.push(e))}function $a(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function Qa(t,e,n){t.push(e<<1|1,n.name,n.value)}function Za(t,e,n){(function(t,e,n=-1){const r=Wt(),i=zt(),o=lt+t,s=Vt(r.consts,e),a=Qt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Qt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Ua(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Ua(t.substring(n,r))}}(i,o),h.replace(Pa," ")).split(Da);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=Ha(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Fa(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);qa(t,n,u,e,r,La(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),lt+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),Zt(Qt(),!1);else{const e=wa(t,c[0],n);c.unshift([]),Zt(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=Kr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&la.COMMENT)===la.COMMENT,c=(s&la.APPEND_EAGERLY)===la.APPEND_EAGERLY,l=s>>>la.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Mr(i,a)),c&&null!==n&&$r(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),oe(!0)})(t,e,n),oe(!1)}function Ya(t){return Xo(zt(),re(),t)&&(Oa|=1<<Math.min(Sa,31)),Sa++,Ya}function Ja(t){!function(t,e,n){if(Sa>0){const r=t.data[n];Ta(t,e,Array.isArray(r)?r:r.update,ne()-Sa-1,Oa)}Oa=0,Sa=0}(Wt(),zt(),t+lt)}function Xa(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xa(t[o],e,n,r,i);else{const o=Wt(),s=zt();let a=Mo(t)?t:p(t.provide),u=Po(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Mo(t)||!t.multi){const r=new ke(u,i,os),f=nu(a,e,i?l:l+d,h);-1===f?(ze(Ue(c,s),o,a),tu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=nu(a,e,l+d,h),p=nu(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){ze(Ue(c,s),o,a);const l=function(t,e,n,r,i){const o=new ke(t,n,os);return o.multi=[],o.index=e,o.componentProviders=0,eu(o,i,r&&!n),o}(i?iu:ru,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),tu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else tu(o,t,f>-1?f:p,eu(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function tu(t,e,n,r){const i=Mo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function eu(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function nu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ru(t,e,n,r){return ou(this.multi,[])}function iu(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Je(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ou(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ou(i,o);return o}function ou(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function su(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Wt();if(r.firstCreatePass){const i=mt(t);Xa(n,r.data,r.blueprint,i,!0),Xa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class au{}class uu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let cu=(()=>{class t{}return t.NULL=new uu,t})();function lu(...t){}function hu(t,e){return new fu(Nt(t,e))}const du=function(){return hu(Kt(),zt())};let fu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=du,t})();function pu(t){return t instanceof fu?t.nativeElement:t}class gu{}let yu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>mu(),t})();const mu=function(){const t=zt(),e=Pt(Kt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let vu=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class bu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const _u=new bu("11.2.14");class wu{constructor(){}supports(t){return Zo(t)}create(t){return new Ou(t)}}const Cu=(t,e)=>e;class Ou{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Cu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Iu(n,r,i)?e:n,s=Iu(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[$o()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Su(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Tu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Su{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Eu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Tu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Eu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Iu(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ku{constructor(){}supports(t){return t instanceof Map||Yo(t)}create(){return new xu}}class xu{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Yo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Au(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Au{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ju(){return new Nu([new wu])}let Nu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ju()),deps:[[t,new jn,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:ju}),t})();function Ru(){return new Du([new ku])}let Du=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ru()),deps:[[t,new jn,new An]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Ru}),t})();function Pu(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(At(o)),ft(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Pu(e[1],e,n,r)}const s=n.type;if(8&s)Pu(t,e,n.child,r);else if(32&s){const t=Nr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=oi(e,n);if(Array.isArray(t))r.push(...t);else{const n=Rr(e[16]);Pu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Lu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Pu(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Hr(t,n),pn(e,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(t){$i(this._lView[1],this._lView,null,t)}markForCheck(){po(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){go(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{go(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ci(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Fu extends Lu{constructor(t){super(t),this._view=t}detectChanges(){yo(this._view)}checkNoChanges(){!function(t){te(!0);try{yo(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Mu=Uu;let Vu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Mu,t.__ChangeDetectorRef__=!0,t})();function Uu(t=!1){return function(t,e,n){if(!n&&gt(t)){const n=Pt(t.index,e);return new Lu(n,n)}return 47&t.type?new Lu(e[16],e):null}(Kt(),zt(),t)}const qu=[new ku],Bu=new Nu([new wu]),Hu=new Du(qu),zu=function(){return $u(Kt(),zt())};let Wu=(()=>{class t{}return t.__NG_ELEMENT_ID__=zu,t})();const Gu=Wu,Ku=class extends Gu{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Pi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Vi(e,n,t),new Lu(n)}};function $u(t,e){return 4&t.type?new Ku(e,t,hu(t,e)):null}class Qu{}class Zu{}const Yu=function(){return rc(Kt(),zt())};let Ju=(()=>{class t{}return t.__NG_ELEMENT_ID__=Yu,t})();const Xu=Ju,tc=class extends Xu{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return hu(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const t=He(this._hostTNode,this._hostLView);if(De(t)){const e=Le(t,this._hostLView),n=Pe(t);return new en(e[1].data[n+8],e)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ec(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Qu,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new tc(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],fn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=si(i,o),a=n[11],u=Yr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ci(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),fn(nc(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ec(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);n&&(pn(nc(this._lContainer),e),zr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);return n&&null!=pn(nc(this._lContainer),e)?new Lu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ec(t){return t[8]}function nc(t){return t[8]||(t[8]=[])}function rc(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);$r(n,Yr(n,r),i,function(t,e){return kt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=uo(r,e,i,t),fo(e,n)}return new tc(n,t,e)}const ic={};class oc extends cu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new uc(e,this.ngModule)}}function sc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ac=new un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kr});class uc extends au{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Si).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return sc(this.componentDef.inputs)}get outputs(){return sc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ic,i);return o!==ic||r===ic?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(gu,xt),s=i.get(vu,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(kt(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):qr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:kr,clean:vo,playerHandler:null,flags:0},d=Ki(0,null,null,1,0,null,null,null,null,null),f=Pi(null,d,h,l,null,null,o,a,s,i);let p,g;de(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Li(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Oo(a,u,!0),null!==t&&(xe(i,t,u),null!==a.classes&&di(i,t,a.classes),null!==a.styles&&hi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Pi(n,Gi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ze(Ue(a,n),s,e.type),to(s,a),no(a,n.length,1)),fo(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)xe(a,c,["ng-version",_u.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!bi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&xe(a,c,t),e&&e.length>0&&di(a,c,e.join(" "))}if(g=Rt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ro(t,r,e,Mi(t,e,1,null),n));const i=Je(e,t,r.directiveStart,r);Ir(i,e);const o=Nt(r,e);return o&&Ir(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(be(a.index),Ji(n[1],a,0,a.directiveStart,a.directiveEnd,e),Xi(e,s)),s}(t,this.componentDef,f,h,[qo]),Vi(d,f,null)}finally{me()}return new cc(this.componentType,p,hu(g,f),f,g)}}class cc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Fu(r),this.componentType=t}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const lc=new Map;class hc extends Qu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new oc(this);const n=ct(t),r=t[Q]||null;r&&da(r),this._bootstrapComponents=xr(n.bootstrap),this._r3Injector=No(t,e,[{provide:Qu,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Uo.THROW_IF_NOT_FOUND,n=A.Default){return t===Uo||t===Qu||t===So?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class dc extends Zu{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,lc.get(i),n),lc.set(i,n));const o=xr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new hc(this.moduleType,t)}}function fc(t,e,n){const r=ee()+t,i=zt();return i[r]===Ei?Jo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function pc(t,e,n,r){return vc(zt(),ee(),t,e,n,r)}function gc(t,e,n,r,i){return bc(zt(),ee(),t,e,n,r,i)}function yc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=ts(t,e,n,r);return Xo(t,e+2,i)||o}(t,u,i,o,s)?Jo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):mc(t,u+3)}(zt(),ee(),t,e,n,r,i,o)}function mc(t,e){const n=t[e];return n===Ei?void 0:n}function vc(t,e,n,r,i,o){const s=e+n;return Xo(t,s,i)?Jo(t,s+1,o?r.call(o,i):r(i)):mc(t,s+1)}function bc(t,e,n,r,i,o,s){const a=e+n;return ts(t,a,i,o)?Jo(t,a+2,s?r.call(s,i,o):r(i,o)):mc(t,a+2)}function _c(t,e){const n=Wt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new y("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vt(r.type)),s=N(os);try{const t=Me(!1),e=o();return Me(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{N(s)}}function wc(t,e,n){const r=t+lt,i=zt(),o=Dt(i,r);return Sc(i,Oc(i,r)?vc(i,ee(),e,o.transform,n,o):o.transform(n))}function Cc(t,e,n,r){const i=t+lt,o=zt(),s=Dt(o,i);return Sc(o,Oc(o,i)?bc(o,ee(),e,s.transform,n,r,s):s.transform(n,r))}function Oc(t,e){return t[1].data[e].pure}function Sc(t,e){return Qo.isWrapped(e)&&(e=Qo.unwrap(e),t[ne()]=Ei),e}function Ec(t){return e=>{setTimeout(t,void 0,e)}}const Tc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Ec(u),a&&(a=Ec(a)),c&&(c=Ec(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function Ic(){return this._results[$o()]()}class kc{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=$o(),n=kc.prototype;n[e]||(n[e]=Ic)}get changes(){return this._changes||(this._changes=new Tc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=hn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class xc{constructor(t){this.queryList=t,this.matches=null}clone(){return new xc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ac{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ac(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==zc(t,e).matches&&this.queries[e].setDirty()}}class jc{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Nc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Nc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Rc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Rc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Dc(e,i)),this.matchTNodeWithReadOption(t,e,Ye(e,t,i,!1,!1))}else n===Wu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ye(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===fu||r===Ju||r===Wu&&4&e.type)this.addMatch(e.index,-2);else{const n=Ye(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Dc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Pc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?hu(t,e):4&t.type?$u(t,e):null}(e,t):-2===n?function(t,e,n){return n===fu?hu(e,t):n===Wu?$u(e,t):n===Ju?rc(e,t):void 0}(t,e,r):Je(t,t[1],n,e)}function Lc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Pc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Fc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Lc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&Fc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Fc(n[1],n,i,r)}}}}}return r}function Mc(t){const e=zt(),n=Wt(),r=ue();ce(r+1);const i=zc(n,r);if(t.dirty&&Ft(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Fc(n,e,r,[]):Lc(n,e,i,r);t.reset(o,pu),t.notifyOnChanges()}return!0}return!1}function Vc(t,e,n){const r=Wt();r.firstCreatePass&&(Hc(r,new jc(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Bc(r,zt(),e)}function Uc(t,e,n,r){const i=Wt();if(i.firstCreatePass){const o=Kt();Hc(i,new jc(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Bc(i,zt(),n)}function qc(){return t=zt(),e=ue(),t[19].queries[e].queryList;var t,e}function Bc(t,e,n){const r=new kc(4==(4&n));$i(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ac),e[19].queries.push(new xc(r))}function Hc(t,e,n){null===t.queries&&(t.queries=new Nc),t.queries.track(new Rc(e,n))}function zc(t,e){return t.queries.getByIndex(e)}function Wc(t,e){return $u(t,e)}function Gc(t=A.Default){const e=Uu(!0);if(null!=e||t&A.Optional)return e;b("ChangeDetectorRef")}const Kc=new un("Application Initializer");let $c=(()=>{class t{constructor(t){this.appInits=t,this.resolve=lu,this.reject=lu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();ps(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(Kc,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Qc=new un("AppId"),Zc={provide:Qc,useFactory:function(){return`${Yc()}${Yc()}${Yc()}`},deps:[]};function Yc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Jc=new un("Platform Initializer"),Xc=new un("Platform ID"),tl=new un("appBootstrapListener");let el=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const nl=new un("LocaleId"),rl=new un("DefaultCurrencyCode");class il{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ol=function(t){return new dc(t)},sl=ol,al=function(t){return Promise.resolve(ol(t))},ul=function(t){const e=ol(t),n=xr(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new uc(n)),t},[]);return new il(e,n)},cl=ul,ll=function(t){return Promise.resolve(ul(t))};let hl=(()=>{class t{constructor(){this.compileModuleSync=sl,this.compileModuleAsync=al,this.compileModuleAndAllComponentsSync=cl,this.compileModuleAndAllComponentsAsync=ll}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const dl=(()=>Promise.resolve(0))();function fl(t){"undefined"==typeof Zone?dl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class pl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tc(!1),this.onMicrotaskEmpty=new Tc(!1),this.onStable=new Tc(!1),this.onError=new Tc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ml(t),yl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ml(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return vl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),bl(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return vl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),bl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,ml(t),yl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,gl,lu,lu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const gl={};function yl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ml(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bl(t){t._nesting--,yl(t)}class _l{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tc,this.onMicrotaskEmpty=new Tc,this.onStable=new Tc,this.onError=new Tc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let wl=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pl.assertNotInAngularZone(),fl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(pl))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),Cl=(()=>{class t{constructor(){this._applications=new Map,Tl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Tl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Ol{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Sl(t){Tl=t}let El,Tl=new Ol,Il=!0,kl=!1;function xl(){return kl=!0,Il}function Al(){if(kl)throw new Error("Cannot enable prod mode after platform setup.");Il=!1}const jl=new un("AllowMultipleToken");class Nl{constructor(t,e){this.name=t,this.token=e}}function Rl(t,e,n=[]){const r=`Platform: ${e}`,i=new un(r);return(e=[])=>{let o=Dl();if(!o||o.injector.get(jl,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:To,useValue:"platform"});!function(t){if(El&&!El.destroyed&&!El.injector.get(jl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");El=t.get(Pl);const e=t.get(Jc,null);e&&e.forEach(t=>t())}(Uo.create({providers:t,name:r}))}return function(t){const e=Dl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Dl(){return El&&!El.destroyed?El:null}let Pl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new _l:("zone.js"===t?void 0:t)||new pl({enableLongStackTrace:xl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:pl,useValue:n}];return n.run(()=>{const e=Uo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Sr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ml(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ps(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get($c);return t.runInitializers(),t.donePromise.then(()=>(da(i.injector.get(nl,aa)||aa),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ll({},e);return function(t,e,n){const r=new dc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Fl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(Uo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ll(t,e){return Array.isArray(e)?e.reduce(Ll,t):Object.assign(Object.assign({},t),e)}let Fl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{pl.assertNotInAngularZone(),fl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{pl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof au?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Qu),i=n.create(Uo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(wl,null),a=s&&i.injector.get(Cl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ml(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ml(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tl,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(pl),Tn(Uo),Tn(Sr),Tn(cu),Tn($c))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ml(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Vl{}class Ul{}const ql={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Bl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ql}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Hl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Hl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(hl),Tn(Ul,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Hl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const zl=function(t){return null},Wl=Rl(null,"core",[{provide:Xc,useValue:"unknown"},{provide:Pl,deps:[Uo]},{provide:Cl,deps:[]},{provide:el,deps:[]}]),Gl=[{provide:Fl,useClass:Fl,deps:[pl,Uo,Sr,cu,$c]},{provide:ac,deps:[pl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:$c,useClass:$c,deps:[[new An,Kc]]},{provide:hl,useClass:hl,deps:[]},Zc,{provide:Nu,useFactory:function(){return Bu},deps:[]},{provide:Du,useFactory:function(){return Hu},deps:[]},{provide:nl,useFactory:function(t){return da(t=t||"undefined"!=typeof $localize&&$localize.locale||aa),t},deps:[[new xn(nl),new An,new jn]]},{provide:rl,useValue:"USD"}];let Kl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(Fl))},t.\u0275mod=rt({type:t}),t.\u0275inj=C({providers:Gl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return I}),n.d(e,"c",function(){return U}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return P}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return q}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return d}),n.d(e,"m",function(){return W}),n.d(e,"n",function(){return Z}),n.d(e,"o",function(){return g}),n.d(e,"p",function(){return D}),n.d(e,"q",function(){return v}),n.d(e,"r",function(){return b}),n.d(e,"s",function(){return w}),n.d(e,"t",function(){return F}),n.d(e,"u",function(){return C}),n.d(e,"v",function(){return y}),n.d(e,"w",function(){return m}),n.d(e,"x",function(){return S}),n.d(e,"y",function(){return _}),n.d(e,"z",function(){return E}),n.d(e,"A",function(){return O}),n.d(e,"B",function(){return R}),n.d(e,"C",function(){return A}),n.d(e,"D",function(){return M}),n.d(e,"E",function(){return V}),n.d(e,"F",function(){return L}),n.d(e,"G",function(){return Q}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return j}),n.d(e,"J",function(){return z}),n.d(e,"K",function(){return G}),n.d(e,"L",function(){return K});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){return u(t).replace(/\./g,"")},l=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function b(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function C(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O(){return g().indexOf("MSAppHost/")>=0}function S(){return!1}function E(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var T=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.c)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?k(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new T(i,a,r);return u},t}();function k(t,e){return t.replace(x,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var x=/\{\$([^}]+)}/g;function A(t){return JSON.parse(t)}function j(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=A(l(o[0])||""),n=A(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e){return t+" failed: "+e+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e)+"must be a valid context object.")}var $=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Z(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.5");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Zb(u.C))},t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=d),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.q)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.w)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.30",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Zb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Jb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Zb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Zb)(s).location;return new b(Object(r.Zb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(a),r.Zb(v,8))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(y),r.Zb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Jb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Zb)(y),Object(r.Zb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),E=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),T=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),I=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),k=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function x(t,e){return P(Object(r.kb)(t)[r.ab.DateFormat],e)}function A(t,e){return P(Object(r.kb)(t)[r.ab.TimeFormat],e)}function j(t,e){return P(Object(r.kb)(t)[r.ab.DateTimeFormat],e)}function N(t,e){const n=Object(r.kb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===k.CurrencyDecimal)return n[r.ab.NumberSymbols][k.Decimal];if(e===k.CurrencyGroup)return n[r.ab.NumberSymbols][k.Group]}return i}const R=r.nb;function D(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function P(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function L(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const F=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,M={},V=/((?:[^GyYMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var U=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),B=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e,n,r){let i=function(t){if(nt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return z(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(F))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!nt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=W(n,e)||e;let o,s=[];for(;e;){if(o=V.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=et(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(et(e,r)-r))}(i,r));let u="";return s.forEach(t=>{const e=function(t){if(tt[t])return tt[t];let e;switch(t){case"G":case"GG":case"GGG":e=Q(B.Eras,T.Abbreviated);break;case"GGGG":e=Q(B.Eras,T.Wide);break;case"GGGGG":e=Q(B.Eras,T.Narrow);break;case"y":e=$(q.FullYear,1,0,!1,!0);break;case"yy":e=$(q.FullYear,2,0,!0,!0);break;case"yyy":e=$(q.FullYear,3,0,!1,!0);break;case"yyyy":e=$(q.FullYear,4,0,!1,!0);break;case"Y":e=X(1);break;case"YY":e=X(2,!0);break;case"YYY":e=X(3);break;case"YYYY":e=X(4);break;case"M":case"L":e=$(q.Month,1,1);break;case"MM":case"LL":e=$(q.Month,2,1);break;case"MMM":e=Q(B.Months,T.Abbreviated);break;case"MMMM":e=Q(B.Months,T.Wide);break;case"MMMMM":e=Q(B.Months,T.Narrow);break;case"LLL":e=Q(B.Months,T.Abbreviated,E.Standalone);break;case"LLLL":e=Q(B.Months,T.Wide,E.Standalone);break;case"LLLLL":e=Q(B.Months,T.Narrow,E.Standalone);break;case"w":e=J(1);break;case"ww":e=J(2);break;case"W":e=J(1,!0);break;case"d":e=$(q.Date,1);break;case"dd":e=$(q.Date,2);break;case"E":case"EE":case"EEE":e=Q(B.Days,T.Abbreviated);break;case"EEEE":e=Q(B.Days,T.Wide);break;case"EEEEE":e=Q(B.Days,T.Narrow);break;case"EEEEEE":e=Q(B.Days,T.Short);break;case"a":case"aa":case"aaa":e=Q(B.DayPeriods,T.Abbreviated);break;case"aaaa":e=Q(B.DayPeriods,T.Wide);break;case"aaaaa":e=Q(B.DayPeriods,T.Narrow);break;case"b":case"bb":case"bbb":e=Q(B.DayPeriods,T.Abbreviated,E.Standalone,!0);break;case"bbbb":e=Q(B.DayPeriods,T.Wide,E.Standalone,!0);break;case"bbbbb":e=Q(B.DayPeriods,T.Narrow,E.Standalone,!0);break;case"B":case"BB":case"BBB":e=Q(B.DayPeriods,T.Abbreviated,E.Format,!0);break;case"BBBB":e=Q(B.DayPeriods,T.Wide,E.Format,!0);break;case"BBBBB":e=Q(B.DayPeriods,T.Narrow,E.Format,!0);break;case"h":e=$(q.Hours,1,-12);break;case"hh":e=$(q.Hours,2,-12);break;case"H":e=$(q.Hours,1);break;case"HH":e=$(q.Hours,2);break;case"m":e=$(q.Minutes,1);break;case"mm":e=$(q.Minutes,2);break;case"s":e=$(q.Seconds,1);break;case"ss":e=$(q.Seconds,2);break;case"S":e=$(q.FractionalSeconds,1);break;case"SS":e=$(q.FractionalSeconds,2);break;case"SSS":e=$(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Z(U.Short);break;case"ZZZZZ":e=Z(U.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Z(U.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Z(U.Long);break;default:return null}return tt[t]=e,e}(t);u+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function z(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function W(t,e){const n=function(t){return Object(r.kb)(t)[r.ab.LocaleId]}(t);if(M[n]=M[n]||{},M[n][e])return M[n][e];let i="";switch(e){case"shortDate":i=x(t,I.Short);break;case"mediumDate":i=x(t,I.Medium);break;case"longDate":i=x(t,I.Long);break;case"fullDate":i=x(t,I.Full);break;case"shortTime":i=A(t,I.Short);break;case"mediumTime":i=A(t,I.Medium);break;case"longTime":i=A(t,I.Long);break;case"fullTime":i=A(t,I.Full);break;case"short":const e=W(t,"shortTime"),n=W(t,"shortDate");i=G(j(t,I.Short),[e,n]);break;case"medium":const r=W(t,"mediumTime"),o=W(t,"mediumDate");i=G(j(t,I.Medium),[r,o]);break;case"long":const s=W(t,"longTime"),a=W(t,"longDate");i=G(j(t,I.Long),[s,a]);break;case"full":const u=W(t,"fullTime"),c=W(t,"fullDate");i=G(j(t,I.Full),[u,c])}return i&&(M[n][e]=i),i}function G(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function K(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function $(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,K(a,3).substr(0,u);var u;const c=N(s,k.MinusSign);return K(a,e,c,r,i)}}function Q(t,e,n=E.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case B.Months:return function(t,e,n){const i=Object(r.kb)(t),o=P([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return P(o,n)}(e,o,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=Object(r.kb)(t),o=P([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return P(o,n)}(e,o,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.kb)(t);return D(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?L(t):[L(t[0]),L(t[1])])}(e),n=function(t,e,n){const i=Object(r.kb)(t);D(i);const o=P([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return P(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.kb)(t),o=P([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return P(o,n)}(e,o,i)[a<12?0:1];case B.Eras:return function(t,e){return P(Object(r.kb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function Z(t){return function(e,n,r){const i=-1*r,o=N(n,k.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case U.Short:return(i>=0?"+":"")+K(s,2,o)+K(Math.abs(i%60),2,o);case U.ShortGMT:return"GMT"+(i>=0?"+":"")+K(s,1,o);case U.Long:return"GMT"+(i>=0?"+":"")+K(s,2,o)+":"+K(Math.abs(i%60),2,o);case U.Extended:return 0===r?"Z":(i>=0?"+":"")+K(s,2,o)+":"+K(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Y(t){return z(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function J(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Y(n),e=function(t){const e=z(t,0,1).getDay();return z(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return K(i,t,N(r,k.MinusSign))}}function X(t,e=!1){return function(n,r){return K(Y(n).getFullYear(),t,N(r,k.MinusSign),e)}}const tt={};function et(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nt(t){return t instanceof Date&&!isNaN(t.valueOf())}class rt{}let it=(()=>{class t extends rt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(R(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.v))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),ot=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.qb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.wb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.t),r.Nb(r.u),r.Nb(r.l),r.Nb(r.E))},t.\u0275dir=r.Ib({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class st{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let at=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new st(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new ut(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new ut(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.Q),r.Nb(r.L),r.Nb(r.t))},t.\u0275dir=r.Ib({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class ut{constructor(t,e){this.record=t,this.view=e}}let ct=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return H(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.wb)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.v))},t.\u0275pipe=r.Mb({name:"date",type:t,pure:!0}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[{provide:rt,useClass:it}]}),t})();function ht(t){return"server"===t}let dt=(()=>{class t{}return t.\u0275prov=Object(r.Jb)({token:t,providedIn:"root",factory:()=>new ft(Object(r.Zb)(s),window)}),t})();class ft{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=pt(this.window.history)||pt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function pt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class gt extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new gt,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=mt||(mt=document.querySelector("base"),mt)?mt.getAttribute("href"):null;return null==e?null:(n=e,yt||(yt=document.createElement("a")),yt.setAttribute("href",n),"/"===yt.pathname.charAt(0)?yt.pathname:"/"+yt.pathname);var n}resetBaseElement(){mt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let yt,mt=null;const vt=new r.r("TRANSITION_ID"),bt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[vt,s,r.s],multi:!0}];class _t{static init(){Object(r.X)(new _t)}addToWindow(t){r.pb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.pb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.pb.getAllAngularRootElements=()=>t.getAllRootElements(),r.pb.frameworkStabilizers||(r.pb.frameworkStabilizers=[]),r.pb.frameworkStabilizers.push(t=>{const e=r.pb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const wt=new r.r("EventManagerPlugins");let Ct=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(wt),r.Zb(r.A))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();class Ot{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let St=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),Et=(()=>{class t extends St{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Tt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Tt))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();function Tt(t){o().remove(t)}const It={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kt=/%COMP%/g;function xt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?xt(t,i,n):(i=i.replace(kt,t),n.push(i))}return n}function At(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let jt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new Dt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=xt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Ct),r.Zb(Et),r.Zb(r.c))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();class Nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(It[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=It[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=It[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,At(n)):this.eventManager.addEventListener(t,e,At(n))}}class Rt extends Nt{constructor(t,e,n,r){super(t),this.component=n;const i=xt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(kt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(kt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Dt extends Nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=xt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Pt=(()=>{class t extends Ot{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const Lt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Vt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ut=(()=>{class t extends Ot{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Mt.hasOwnProperty(e)&&(e=Mt[e]))}return Ft[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Lt.forEach(r=>{r!=n&&(0,Vt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const qt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){gt.makeCurrent(),_t.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.vb)(document),document},deps:[]}],Bt=Object(r.S)(r.W,"browser",qt),Ht=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:wt,useClass:Pt,multi:!0,deps:[s,r.A,r.C]},{provide:wt,useClass:Ut,multi:!0,deps:[s]},[],{provide:jt,useClass:jt,deps:[Ct,Et,r.c]},{provide:r.F,useExisting:jt},{provide:St,useExisting:Et},{provide:Et,useClass:Et,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:Ct,useClass:Ct,deps:[wt,r.A]},[]];let zt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:vt,useExisting:r.c},bt]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(t,12))},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:Ht,imports:[lt,r.f]}),t})();"undefined"!=typeof window&&window;var Wt=n("Cfvw"),Gt=n("HDdC"),Kt=n("DH7j"),$t=n("lJxs"),Qt=n("XoHu");function Zt(t,e){return new Gt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Wt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class Yt{}const Jt=new r.r("NgValueAccessor"),Xt={provide:Jt,useExisting:Object(r.U)(()=>ee),multi:!0},te=new r.r("CompositionEventMode");let ee=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.E),r.Nb(r.l),r.Nb(te,8))},t.\u0275dir=r.Ib({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.cc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.Ab([Xt])]}),t})();function ne(t){return null==t||0===t.length}function re(t){return null!=t&&"number"==typeof t.length}const ie=new r.r("NgValidators"),oe=new r.r("NgAsyncValidators"),se=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ae{static min(t){return function(t){return e=>{if(ne(e.value)||ne(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(ne(e.value)||ne(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return ne(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return ne(t.value)||se.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>ne(e.value)||!re(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>re(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return ue;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(ne(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return pe(t)}static composeAsync(t){return ye(t)}}function ue(t){return null}function ce(t){return null!=t}function le(t){const e=Object(r.sb)(t)?Object(Wt.a)(t):t;return Object(r.rb)(e),e}function he(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function de(t,e){return e.map(e=>e(t))}function fe(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function pe(t){if(!t)return null;const e=t.filter(ce);return 0==e.length?null:function(t){return he(de(t,e))}}function ge(t){return null!=t?pe(fe(t)):null}function ye(t){if(!t)return null;const e=t.filter(ce);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Kt.a)(e))return Zt(e,null);if(Object(Qt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Zt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Zt(t=1===t.length&&Object(Kt.a)(t[0])?t[0]:t,null).pipe(Object($t.a)(t=>e(...t)))}return Zt(t,null)}(de(t,e).map(le)).pipe(Object($t.a)(he))}}function me(t){return null!=t?ye(fe(t)):null}function ve(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function be(t){return t._rawValidators}function _e(t){return t._rawAsyncValidators}let we=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ge(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=me(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ib({type:t}),t})(),Ce=(()=>{class t extends we{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return Oe(e||t)},t.\u0275dir=r.Ib({type:t,features:[r.yb]}),t})();const Oe=r.Ub(Ce);class Se extends we{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ee{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let Te=(()=>{class t extends Ee{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Se,2))},t.\u0275dir=r.Ib({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Fb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.yb]}),t})(),Ie=(()=>{class t extends Ee{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Ce,10))},t.\u0275dir=r.Ib({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Fb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.yb]}),t})();function ke(t,e){je(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Re(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Re(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function xe(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ne(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ae(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function je(t,e,n){const r=be(t);null!==e.validator?t.setValidators(ve(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=_e(t);if(null!==e.asyncValidator?t.setAsyncValidators(ve(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Ae(e._rawValidators,n),Ae(e._rawAsyncValidators,n)}}function Ne(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=be(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=_e(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};Ae(e._rawValidators,t),Ae(e._rawAsyncValidators,t)}return r}function Re(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function De(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Pe="VALID",Le="INVALID",Fe="PENDING",Me="DISABLED";function Ve(t){return(He(t)?t.validators:t)||null}function Ue(t){return Array.isArray(t)?ge(t):t||null}function qe(t,e){return(He(e)?e.asyncValidators:t)||null}function Be(t){return Array.isArray(t)?me(t):t||null}function He(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ze{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Ue(this._rawValidators),this._composedAsyncValidatorFn=Be(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Pe}get invalid(){return this.status===Le}get pending(){return this.status==Fe}get disabled(){return this.status===Me}get enabled(){return this.status!==Me}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Ue(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Be(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Fe,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Me,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Pe,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Pe&&this.status!==Fe||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Me:Pe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Fe,this._hasOwnPendingAsyncValidator=!0;const e=le(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ge?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ke&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?Me:this.errors?Le:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fe)?Fe:this._anyControlsHaveStatus(Le)?Le:Pe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){He(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class We extends ze{constructor(t=null,e,n){super(Ve(e),qe(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){De(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){De(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ge extends ze{constructor(t,e,n){super(Ve(e),qe(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof We?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ke extends ze{constructor(t,e,n){super(Ve(e),qe(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof We?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let $e=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ib({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const Qe={provide:Jt,useExisting:Object(r.U)(()=>Ze),multi:!0};let Ze=(()=>{class t extends Yt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.E),r.Nb(r.l))},t.\u0275dir=r.Ib({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.cc("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.Ab([Qe]),r.yb]}),t})(),Ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();const Je=new r.r("NgModelWithFormControlWarning"),Xe={provide:Ce,useExisting:Object(r.U)(()=>tn)};let tn=(()=>{class t extends Ce{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ne(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return ke(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){xe(t.control||null,t,!1),De(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(xe(e||null,t),n instanceof We&&(ke(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){je(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Ne(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){je(this.form,this,!1),this._oldForm&&Ne(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(ie,10),r.Nb(oe,10))},t.\u0275dir=r.Ib({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.cc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.Ab([Xe]),r.yb,r.zb]}),t})();const en={provide:Se,useExisting:Object(r.U)(()=>nn)};let nn=(()=>{class t extends Se{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===ee?n=t:Object.getPrototypeOf(t.constructor)===Yt?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Ce,13),r.Nb(ie,10),r.Nb(oe,10),r.Nb(Jt,10),r.Nb(Je,8))},t.\u0275dir=r.Ib({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.Ab([en]),r.yb,r.zb]}),t._ngModelWarningSentOnce=!1,t})(),rn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[Ye]]}),t})(),on=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[rn]}),t})(),sn=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Je,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[rn]}),t})(),an=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new Ge(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new We(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Ke(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof We||t instanceof Ge||t instanceof Ke?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:function(){return new t},token:t,providedIn:sn}),t})();var un=n("EY2u"),cn=n("LRne"),ln=n("XNiG"),hn=n("n6bG");function dn(t,e,n,r){return Object(hn.a)(n)&&(r=n,n=void 0),r?dn(t,e,n).pipe(Object($t.a)(t=>Object(Kt.a)(t)?r(...t):r(t))):new Gt.a(r=>{fn(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function fn(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)fn(t[o],e,n,r,i)}r.add(o)}var pn=n("D0XW"),gn=n("Y7HM"),yn=n("z+Ro");function mn(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var vn=n("yCtX"),bn=n("7o/Q");class _n extends bn.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class wn extends bn.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Cn=n("SeVD");function On(t,e,n,r,i=new wn(t,n,r)){if(!i.closed)return e instanceof Gt.a?e.subscribe(i):Object(Cn.a)(e)(i)}class Sn{call(t,e){return e.subscribe(new En(t))}}class En extends _n{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=On(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}var Tn=n("9ppp");class In extends ln.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Tn.a;return this._value}next(t){super.next(this._value=t)}}const kn={};class xn{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new An(t,this.resultSelector))}}class An extends _n{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(kn),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(On(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===kn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n("KqfI");var jn=n("Lhse"),Nn=n("zx2A");function Rn(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(vn.a)(t,void 0).lift(new Dn(e))}class Dn{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Pn(t,this.resultSelector))}}class Pn extends bn.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(Kt.a)(t)?e.push(new Fn(t)):e.push("function"==typeof t[jn.a]?new Ln(t[jn.a]()):new Mn(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ln{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Fn{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[jn.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Mn extends Nn.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[jn.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(Nn.c)(this.observable,new Nn.a(this))}}var Vn=n("VRyK"),Un=n("bHdf");function qn(...t){return Object(Un.a)(1)(Object(cn.a)(...t))}function Bn(t){return e=>e.lift(new Hn(t))}class Hn{constructor(t){this.notifier=t}call(t,e){const n=new zn(t),r=Object(Nn.c)(this.notifier,new Nn.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class zn extends Nn.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Wn(t,e){return function(n){return n.lift(new Gn(t,e))}}class Gn{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Kn(t,this.predicate,this.thisArg))}}class Kn extends bn.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const $n=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Qn(t){return e=>0===t?Object(un.b)():e.lift(new Zn(t))}class Zn{constructor(t){if(this.total=t,this.total<0)throw new $n}call(t,e){return e.subscribe(new Yn(t,this.total))}}class Yn extends bn.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Jn(...t){const e=t[t.length-1];return Object(yn.a)(e)?(t.pop(),n=>qn(t,n,e)):e=>qn(t,e)}function Xn(t,e){return n=>n.lift(new tr(t,e))}class tr{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new er(t,this.compare,this.keySelector))}}class er extends bn.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function nr(t,e){return"function"==typeof e?n=>n.pipe(nr((n,r)=>Object(Wt.a)(t(n,r)).pipe(Object($t.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new rr(t))}class rr{constructor(t){this.project=t}call(t,e){return e.subscribe(new ir(t,this.project))}}class ir extends Nn.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Nn.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Nn.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var or=n("vkgz");function sr(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new ar(t,n))}}class ar{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ur(t,this.observables,this.project))}}class ur extends _n{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(On(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}n("WMd4");var cr=n("5+tZ"),lr=n("w1tV");const hr=["*"],dr=["dialog"];function fr(t){return null!=t}function pr(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const gr={animation:!0,transitionTimerDelayMs:5};let yr=(()=>{class t{constructor(){this.animation=gr.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Jb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const mr=()=>{},{transitionTimerDelayMs:vr}=gr,br=new Map,_r=(t,e,n,r)=>{let i=r.context||{};const o=br.get(e);if(o)switch(r.runningTransition){case"continue":return un.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),br.delete(e)}const s=n(e,r.animation,i)||mr;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(cn.a)(void 0).pipe(function(t){return e=>new Gt.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new ln.a,u=new ln.a,c=a.pipe(function(...t){return e=>qn(e,Object(cn.a)(...t))}(!0));br.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=dn(e,"transitionend").pipe(Bn(c),Wn(({target:t})=>t===e));(function(...t){if(1===t.length){if(!Object(Kt.a)(t[0]))return t[0];t=t[0]}return Object(vn.a)(t,void 0).lift(new Sn)})(function(t=0,e,n){let r=-1;return Object(gn.a)(e)?r=Number(e)<1?1:Number(e):Object(yn.a)(e)&&(n=e),Object(yn.a)(n)||(n=pn.a),new Gt.a(e=>{const i=Object(gn.a)(t)?t:+t-n.now();return n.schedule(mn,i,{index:0,period:r,subscriber:e})})}(l+vr).pipe(Bn(c)),n,u).pipe(Bn(c)).subscribe(()=>{br.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};let wr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Cr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})(),Sr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Er=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();var Tr=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Ir=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function kr(t){const e=Array.from(t.querySelectorAll(Ir)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+u+c);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,y=window.innerHeight||g.clientHeight,m=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=m&&p.bottom<=y}},new Date(1882,10,12),new Date(2174,10,25);let xr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt,on]]}),t})(),Ar=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Ib({type:t,selectors:[["",8,"navbar"]]}),t})(),jr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})(),Nr=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(yr))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(yr))},token:t,providedIn:"root"}),t})();class Rr{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const Dr=()=>{};let Pr=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):Dr}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(s))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(s))},token:t,providedIn:"root"}),t})(),Lr=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(Qn(1)).subscribe(()=>{_r(this._zone,this._el.nativeElement,(t,e)=>{e&&pr(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return _r(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(r.l),r.Nb(r.A))},t.\u0275cmp=r.Hb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Db("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Fb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class Fr{close(t){}dismiss(t){}}class Mr{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new ln.a,this._dismissed=new ln.a,this._hidden=new ln.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Bn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Bn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(cn.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Rn(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Vr=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let Ur=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new ln.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new ln.a,this.hidden=new ln.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Qn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=Rn(_r(this._zone,t,()=>t.classList.remove("show"),e),_r(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};Rn(_r(this._zone,this._elRef.nativeElement,(t,e)=>{e&&pr(t),t.classList.add("show")},t),_r(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{dn(t,"keydown").pipe(Bn(this._closed$),Wn(t=>t.which===Tr.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(Vr.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;dn(this._dialogEl.nativeElement,"mousedown").pipe(Bn(this._closed$),Object(or.a)(()=>e=!1),nr(()=>dn(t,"mouseup").pipe(Bn(this._closed$),Qn(1))),Wn(({target:e})=>t===e)).subscribe(()=>{e=!0}),dn(t,"click").pipe(Bn(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(Vr.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=kr(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&_r(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(s),r.Nb(r.l),r.Nb(r.A))},t.\u0275cmp=r.Hb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Cc(dr,3),2&t){let t;r.rc(t=r.dc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Cb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Db("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Fb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:hr,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.jc(),r.Sb(0,"div",0,1),r.Sb(2,"div",2),r.ic(3),r.Rb(),r.Rb()),2&t&&r.Db("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),qr=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new ln.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=dn(e,"focusin").pipe(Bn(n),Object($t.a)(t=>t.target));dn(e,"keydown").pipe(Bn(n),Wn(t=>t.which===Tr.Tab),sr(t)).subscribe(([t,n])=>{const[r,i]=kr(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&dn(e,"click").pipe(Bn(n),sr(t),Object($t.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:fr(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new Fr,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new Mr(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(Lr).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(Ur).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{fr(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{fr(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.L?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new Rr([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new Rr([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new Rr([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:Fr,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Rr([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.g),r.Zb(r.s),r.Zb(s),r.Zb(Pr),r.Zb(r.F),r.Zb(r.A))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(r.g),Object(r.Zb)(r.o),Object(r.Zb)(s),Object(r.Zb)(Pr),Object(r.Zb)(r.F),Object(r.Zb)(r.A))},token:t,providedIn:"root"}),t})(),Br=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.j),r.Zb(r.s),r.Zb(qr),r.Zb(Nr))},t.\u0275prov=Object(r.Jb)({factory:function(){return new t(Object(r.Zb)(r.j),Object(r.Zb)(r.o),Object(r.Zb)(qr),Object(r.Zb)(Nr))},token:t,providedIn:"root"}),t})(),Hr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[Br]}),t})(),zr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Wr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Gr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Kr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),$r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Qr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Zr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})(),Yr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let Jr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[lt]]}),t})();const Xr=[wr,Cr,Or,Sr,Er,xr,jr,Hr,zr,Wr,Gr,Kr,$r,Qr,Zr,Yr,Jr];let ti=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[Xr,wr,Cr,Or,Sr,Er,xr,jr,Hr,zr,Wr,Gr,Kr,$r,Qr,Zr,Yr,Jr]}),t})();var ei=n("spgP");function ni(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ri(t,e,n))}}class ri{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ii(t,this.accumulator,this.seed,this.hasSeed))}}class ii extends bn.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class oi{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new si(t,this.predicate))}}class si extends bn.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var ai=n("pxpQ"),ui=n("qgXg"),ci=n("quSY"),li=n("Ylt2");class hi extends ln.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new di(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Tn.a;if(this.isStopped||this.hasError?o=ci.a.EMPTY:(this.observers.push(t),o=new li.a(this,t)),r&&t.add(t=new ai.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ui.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class di{constructor(t,e){this.time=t,this.value=e}}function fi(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new hi(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const pi=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function gi(t=null){return e=>e.lift(new yi(t))}class yi{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new mi(t,this.defaultValue))}}class mi extends bn.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function vi(t=wi){return e=>e.lift(new bi(t))}class bi{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new _i(t,this.errorFactory))}}class _i extends bn.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(TC){t=TC}this.destination.error(t)}}}function wi(){return new pi}var Ci=n("SpAZ");function Oi(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Wn((e,n)=>t(e,n,r)):Ci.a,Qn(1),n?gi(e):vi(()=>new pi))}function Si(t,e){return e?nr(()=>t,e):nr(()=>t)}var Ei=n("tf+s");const Ti=new r.r("angularfire2.auth.use-emulator"),Ii=new r.r("angularfire2.auth.settings"),ki=new r.r("angularfire2.auth.tenant-id"),xi=new r.r("angularfire2.auth.langugage-code"),Ai=new r.r("angularfire2.auth.use-device-language"),ji=new r.r("angularfire.auth.persistence");let Ni=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new ei.d(i),d=Object(ei.h)(h),f=new ln.a,p=Object(cn.a)(void 0).pipe(Object(ai.b)(h.outsideAngular),nr(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object($t.a)(()=>Object(ei.g)(t,i,e)),Object($t.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(ei.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),fi({bufferSize:1,refCount:!1}));if(ht(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(cn.a)(null);else{p.pipe(Oi()).subscribe();const t=p.pipe(nr(t=>t.getRedirectResult().then(t=>t,()=>null)),d,fi({bufferSize:1,refCount:!1})),e=t=>new Gt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(nr(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(nr(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Si(n),Object(Ei.a)(h.outsideAngular),Object(ai.b)(h.insideAngular)),this.user=t.pipe(Si(r),Object(Ei.a)(h.outsideAngular),Object(ai.b)(h.insideAngular)),this.idToken=this.user.pipe(nr(t=>t?Object(Wt.a)(t.getIdToken()):Object(cn.a)(null))),this.idTokenResult=this.user.pipe(nr(t=>t?Object(Wt.a)(t.getIdTokenResult()):Object(cn.a)(null))),this.credential=Object(Vn.a)(t,f,this.authState.pipe(Wn(t=>!t))).pipe(Object($t.a)(t=>(null==t?void 0:t.user)?t:null),Object(Ei.a)(h.outsideAngular),Object(ai.b)(h.insideAngular))}return Object(ei.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(r.C),r.Zb(r.A),r.Zb(Ti,8),r.Zb(Ii,8),r.Zb(ki,8),r.Zb(xi,8),r.Zb(Ai,8),r.Zb(ji,8))},t.\u0275prov=r.Jb({factory:function(){return new t(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(r.C),r.Zb(r.A),r.Zb(Ti,8),r.Zb(Ii,8),r.Zb(ki,8),r.Zb(xi,8),r.Zb(Ai,8),r.Zb(ji,8))},token:t,providedIn:"any"}),t})();Object(ei.e)(Ni,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Ri=n("Jgta");function Di(t){return null==t}function Pi(t){return"function"==typeof t.set}function Li(t,e){return Pi(e)?e:t.ref(e)}function Fi(t,e){if("string"==typeof t)return e.stringCase();if(Pi(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Mi(t,e,n="on",r=pn.b){return new Gt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object($t.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(lr.a)())}function Vi(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Ui(t,e){const{payload:n,prevKey:r,key:i}=e,o=Vi(t,i),s=function(t,e){if(Di(e))return 0;{const n=Vi(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function qi(t){return(Di(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Bi(t,e,n){return function(t,e,n){return Mi(t,"value","once",n).pipe(nr(r=>{const i=[Object(cn.a)(r)];return e.forEach(e=>i.push(Mi(t,e,"on",n))),Object(Vn.a)(...i).pipe(ni(Ui,[]))}),Xn())}(t,e=qi(e),n)}function Hi(t,e,n){const r=(e=qi(e)).map(e=>Mi(t,e,"on",n));return Object(Vn.a)(...r)}function zi(t,e){return function(n,r){return Fi(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Wi(t,e){return function(){return Mi(t,"value","on",e)}}const Gi=new r.r("angularfire2.realtimeDatabaseURL"),Ki=new r.r("angularfire2.database.use-emulator");let $i=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new ei.d(i),this.keepUnstableUntilFirst=Object(ei.h)(this.schedulers);const a=o,u=Object(ei.g)(t,i,e);!Ri.a.auth&&s&&Object(ei.j)(),this.database=Object(ei.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Li(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:zi(r,"update"),set:zi(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Fi(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Bi(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Hi(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Mi(t,"value","on",e).pipe(Object($t.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(sr(e),Object($t.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new oi(r))),Object($t.a)(t=>t.actions));var r}(t,Hi(t,e).pipe(ni((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Bi(t,r,n).pipe(Object($t.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Li(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Wi(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Wi(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object($t.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(Gi,8),r.Zb(r.C),r.Zb(r.A),r.Zb(Ki,8),r.Zb(Ti,8))},t.\u0275prov=r.Jb({factory:function(){return new t(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(Gi,8),r.Zb(r.C),r.Zb(r.A),r.Zb(Ki,8),r.Zb(Ti,8))},token:t,providedIn:"any"}),t})(),Qi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({providers:[$i]}),t})();const Zi={apiKey:"AIzaSyCCcwYlNJNnrQaiwFhggteGYGdwINoNv0Y",authDomain:"tsf-banking.firebaseapp.com",projectId:"tsf-banking",storageBucket:"tsf-banking.appspot.com",messagingSenderId:"152044713732",appId:"1:152044713732:web:dccd1bea97d4a2efe2c251"};function Yi(t){return new Gt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Wt.a)(n):Object(un.b)()).subscribe(e)})}var Ji=n("EQ5u");function Xi(t){return function(e){const n=new to(t),r=e.lift(n);return n.caught=r}}class to{constructor(t){this.selector=t}call(t,e){return e.subscribe(new eo(t,this.selector,this.caught))}}class eo extends Nn.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Nn.a(this);this.add(r);const i=Object(Nn.c)(n,r);i!==r&&this.add(i)}}}function no(t,e){return Object(cr.a)(t,e,1)}function ro(t){return function(e){return 0===t?Object(un.b)():e.lift(new io(t))}}class io{constructor(t){if(this.total=t,this.total<0)throw new $n}call(t,e){return e.subscribe(new oo(t,this.total))}}class oo extends bn.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var so=n("x+ZX");class ao{constructor(t){this.callback=t}call(t,e){return e.subscribe(new uo(t,this.callback))}}class uo extends bn.a{constructor(t,e){super(t),this.add(new ci.a(e))}}class co{constructor(t,e){this.id=t,this.url=e}}class lo extends co{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ho extends co{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fo extends co{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class po extends co{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class go extends co{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yo extends co{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mo extends co{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vo extends co{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bo extends co{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _o{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wo{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Co{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oo{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class So{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eo{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Io="primary";class ko{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function xo(t){return new ko(t)}function Ao(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function jo(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function No(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ro(t[i],e[i]))return!1;return!0}function Ro(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Do(t){return Array.prototype.concat.apply([],t)}function Po(t){return t.length>0?t[t.length-1]:null}function Lo(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Fo(t){return Object(r.rb)(t)?t:Object(r.sb)(t)?Object(Wt.a)(Promise.resolve(t)):Object(cn.a)(t)}function Mo(t,e,n){return n?function(t,e){return No(t,e)}(t.queryParams,e.queryParams)&&Vo(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ro(t[n],e[n]))}(t.queryParams,e.queryParams)&&Uo(t.root,e.root)}function Vo(t,e){if(!Wo(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Vo(t.children[n],e.children[n]))return!1}return!0}function Uo(t,e){return qo(t,e,e.segments)}function qo(t,e,n){if(t.segments.length>n.length)return!!Wo(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Wo(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Uo(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Wo(t.segments,r)&&!!t.children.primary&&qo(t.children.primary,e,i)}}class Bo{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xo(this.queryParams)),this._queryParamMap}toString(){return $o.serialize(this)}}class Ho{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Lo(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qo(this)}}class zo{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=xo(this.parameters)),this._parameterMap}toString(){return ns(this)}}function Wo(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Go{}class Ko{parse(t){const e=new as(t);return new Bo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Zo(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Jo(e)}=${Jo(t)}`).join("&"):`${Jo(e)}=${Jo(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const $o=new Ko;function Qo(t){return t.segments.map(t=>ns(t)).join("/")}function Zo(t,e){if(!t.hasChildren())return Qo(t);if(e){const e=t.children.primary?Zo(t.children.primary,!1):"",n=[];return Lo(t.children,(t,e)=>{e!==Io&&n.push(`${e}:${Zo(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Lo(t.children,(t,r)=>{r===Io&&(n=n.concat(e(t,r)))}),Lo(t.children,(t,r)=>{r!==Io&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Io?[Zo(t.children.primary,!1)]:[`${n}:${Zo(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Qo(t)}/${e[0]}`:`${Qo(t)}/(${e.join("//")})`}}function Yo(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jo(t){return Yo(t).replace(/%3B/gi,";")}function Xo(t){return Yo(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ts(t){return decodeURIComponent(t)}function es(t){return ts(t.replace(/\+/g,"%20"))}function ns(t){return`${Xo(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Xo(t)}=${Xo(e[t])}`).join("")}`;var e}const rs=/^[^\/()?;=#]+/;function is(t){const e=t.match(rs);return e?e[0]:""}const os=/^[^=?&#]+/,ss=/^[^?&#]+/;class as{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ho([],{}):new Ho([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ho(t,e)),n}parseSegment(){const t=is(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new zo(ts(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=is(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=is(this.remaining);t&&(n=t,this.capture(n))}t[ts(e)]=ts(n)}parseQueryParam(t){const e=function(t){const e=t.match(os);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ss);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=es(e),i=es(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=is(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Io);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ho([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class us{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=cs(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=cs(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ls(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return ls(t,this._root).map(t=>t.value)}}function cs(t,e){if(t===e.value)return e;for(const n of e.children){const e=cs(t,n);if(e)return e}return null}function ls(t,e){if(t===e.value)return[e];for(const n of e.children){const r=ls(t,n);if(r.length)return r.unshift(e),r}return[]}class hs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ds(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class fs extends us{constructor(t,e){super(t),this.snapshot=e,bs(this,t)}toString(){return this.snapshot.toString()}}function ps(t,e){const n=function(t,e){const n=new ms([],{},{},"",{},Io,e,null,t.root,-1,{});return new vs("",new hs(n,[]))}(t,e),r=new In([new zo("",{})]),i=new In({}),o=new In({}),s=new In({}),a=new In(""),u=new gs(r,i,s,a,o,Io,e,n.root);return u.snapshot=n.root,new fs(new hs(u,[]),n)}class gs{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object($t.a)(t=>xo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object($t.a)(t=>xo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ys(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ms{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vs extends us{constructor(t,e){super(e),this.url=t,bs(this,e)}toString(){return _s(this._root)}}function bs(t,e){e.value._routerState=t,e.children.forEach(e=>bs(t,e))}function _s(t){const e=t.children.length>0?` { ${t.children.map(_s).join(", ")} } `:"";return`${t.value}${e}`}function ws(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,No(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),No(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!No(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),No(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Cs(t,e){return No(t.params,e.params)&&function(t,e){return Wo(t,e)&&t.every((t,n)=>No(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Cs(t.parent,e.parent))}function Os(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Os(t,e,r);return Os(t,e)})}(t,e,n);return new hs(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ss(e,t),t}}const n=new gs(new In((r=e.value).url),new In(r.params),new In(r.queryParams),new In(r.fragment),new In(r.data),r.outlet,r.component,r),i=e.children.map(e=>Os(t,e));return new hs(n,i)}var r}function Ss(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ss(t.children[n],e.children[n])}function Es(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ts(t){return"object"==typeof t&&null!=t&&t.outlets}function Is(t,e,n,r,i){let o={};return r&&Lo(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Bo(n.root===t?e:ks(n.root,t,e),o,i)}function ks(t,e,n){const r={};return Lo(t.children,(t,i)=>{r[i]=t===e?n:ks(t,e,n)}),new Ho(t.segments,r)}class xs{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Es(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ts);if(r&&r!==Po(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class As{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function js(t,e,n){if(t||(t=new Ho([],{})),0===t.segments.length&&t.hasChildren())return Ns(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Ts(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ls(a,u,e))return o;r+=2}else{if(!Ls(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ho(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ho(t.segments.slice(r.pathIndex),t.children),Ns(e,0,i)}return r.match&&0===i.length?new Ho(t.segments,{}):r.match&&!t.hasChildren()?Rs(t,e,n):r.match?Ns(t,0,i):Rs(t,e,n)}function Ns(t,e,n){if(0===n.length)return new Ho(t.segments,{});{const r=function(t){return Ts(t[0])?t[0].outlets:{[Io]:t}}(n),i={};return Lo(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=js(t.children[r],e,n))}),Lo(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ho(t.segments,i)}}function Rs(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ts(o)){const t=Ds(o.outlets);return new Ho(r,t)}if(0===i&&Es(n[0])){r.push(new zo(t.segments[e].path,Ps(n[0]))),i++;continue}const s=Ts(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Es(a)?(r.push(new zo(s,Ps(a))),i+=2):(r.push(new zo(s,{})),i++)}return new Ho(r,{})}function Ds(t){const e={};return Lo(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Rs(new Ho([],{}),0,t))}),e}function Ps(t){const e={};return Lo(t,(t,n)=>e[n]=`${t}`),e}function Ls(t,e,n){return t==n.path&&No(e,n.parameters)}class Fs{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ws(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ds(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Lo(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=ds(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=ds(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Eo(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Oo(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ws(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ms(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ms(t){ws(t.value),t.children.forEach(Ms)}class Vs{constructor(t,e){this.routes=t,this.module=e}}function Us(t){return"function"==typeof t}function qs(t){return t instanceof Bo}const Bs=Symbol("INITIAL_VALUE");function Hs(){return nr(t=>function(...t){let e,n;return Object(yn.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Kt.a)(t[0])&&(t=t[0]),Object(vn.a)(t,n).lift(new xn(e))}(t.map(t=>t.pipe(Qn(1),Jn(Bs)))).pipe(ni((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Bs)return t;if(r===Bs&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||qs(r))return r}return t},t)},Bs),Wn(t=>t!==Bs),Object($t.a)(t=>qs(t)?t:!0===t),Qn(1)))}let zs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Ob(0,"router-outlet")},directives:function(){return[Ua]},encapsulation:2}),t})();function Ws(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Gs(r,Ks(e,r))}}function Gs(t,e){t.children&&Ws(t.children,e)}function Ks(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function $s(t){const e=t.children&&t.children.map($s),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Io&&(n.component=zs),n}function Qs(t){return t.outlet||Io}function Zs(t,e){const n=t.filter(t=>Qs(t)===e);return n.push(...t.filter(t=>Qs(t)!==e)),n}const Ys={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Js(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Ys):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||jo)(n,t,e);if(!i)return Object.assign({},Ys);const o={};Lo(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Xs(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ta(t,e,n)&&Qs(n)!==Io)}(t,n,r)){const i=new Ho(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Qs(o)!==Io){const n=new Ho([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Qs(o)]=n}return i}(t,e,r,new Ho(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ta(t,e,n))}(t,n,r)){const o=new Ho(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ta(t,n,a)&&!i[Qs(a)]){const n=new Ho([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Qs(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ho(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ta(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function ea(t,e,n,r){return!!(Qs(t)===r||r!==Io&&ta(e,n,t))&&("**"===t.path||Js(e,t,n).matched)}function na(t,e,n){return 0===e.length&&!t.children[n]}class ra{constructor(t){this.segmentGroup=t||null}}class ia{constructor(t){this.urlTree=t}}function oa(t){return new Gt.a(e=>e.error(new ra(t)))}function sa(t){return new Gt.a(e=>e.error(new ia(t)))}function aa(t){return new Gt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class ua{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Xs(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ho(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Io).pipe(Object($t.a)(t=>this.createUrlTree(ca(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xi(t=>{if(t instanceof ia)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof ra)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Io).pipe(Object($t.a)(e=>this.createUrlTree(ca(e),t.queryParams,t.fragment))).pipe(Xi(t=>{if(t instanceof ra)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ho([],{[Io]:t}):t;return new Bo(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object($t.a)(t=>new Ho([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Wt.a)(r).pipe(no(r=>{const i=n.children[r],o=Zs(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object($t.a)(t=>({segment:t,outlet:r})))}),ni((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Wn((e,n)=>t(e,n,r)):Ci.a,ro(1),n?gi(e):vi(()=>new pi))}())}expandSegment(t,e,n,r,i,o){return Object(Wt.a)(n).pipe(no(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Xi(t=>{if(t instanceof ra)return Object(cn.a)(null);throw t}))),Oi(t=>!!t),Xi((t,n)=>{if(t instanceof pi||"EmptyError"===t.name){if(na(e,r,i))return Object(cn.a)(new Ho([],{}));throw new ra(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return ea(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):oa(e):oa(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?sa(i):this.lineralizeSegments(n,i).pipe(Object(cr.a)(n=>{const i=new Ho(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Js(e,r,i);if(!s)return oa(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?sa(l):this.lineralizeSegments(r,l).pipe(Object(cr.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(cn.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object($t.a)(t=>(n._loadedConfig=t,new Ho(r,{})))):Object(cn.a)(new Ho(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Js(e,n,r);if(!o)return oa(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(cr.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Xs(e,s,u,o),l=new Ho(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object($t.a)(t=>new Ho(s,t)));if(0===o.length&&0===c.length)return Object(cn.a)(new Ho(s,{}));const h=Qs(n)===i;return this.expandSegment(r,l,o,c,h?Io:i,!0).pipe(Object($t.a)(t=>new Ho(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(cn.a)(new Vs(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(cn.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(cr.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object($t.a)(t=>(e._loadedConfig=t,t))):function(t){return new Gt.a(e=>e.error(Ao(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(cn.a)(new Vs([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(cn.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Us(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Us(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Fo(o)});return Object(cn.a)(i).pipe(Hs(),Object(or.a)(t=>{if(!qs(t))return;const e=Ao(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object($t.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(cn.a)(n);if(r.numberOfChildren>1||!r.children.primary)return aa(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Bo(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Lo(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Lo(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ho(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function ca(t){const e={};for(const n of Object.keys(t.children)){const r=ca(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ho(t.segments.concat(e.segments),e.children)}return t}(new Ho(t.segments,e))}class la{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ha{constructor(t,e){this.component=t,this.route=e}}function da(t,e,n){const r=t._root;return pa(r,e?e._root:null,n,[r.value])}function fa(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function pa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ds(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Wo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(t.url,e.url)||!No(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cs(t,e)||!No(t.queryParams,e.queryParams);case"paramsChange":default:return!Cs(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new la(r)):(o.data=s.data,o._resolvedData=s._resolvedData),pa(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ha(a.outlet.component,s))}else s&&ga(e,a,i),i.canActivateChecks.push(new la(r)),pa(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Lo(o,(t,e)=>ga(t,n.getContext(e),i)),i}function ga(t,e,n){const r=ds(t),i=t.value;Lo(r,(t,r)=>{ga(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ha(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ya{}function ma(t){return new Gt.a(e=>e.error(t))}class va{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Xs(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Io);if(null===e)return null;const n=new ms([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Io,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new hs(n,e),i=new vs(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ys(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Zs(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=_a(n);return r.sort((t,e)=>t.value.outlet===Io?-1:e.value.outlet===Io?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return na(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!ea(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Po(n).parameters:{};i=new ms(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Oa(t),Qs(t),t.component,t,wa(e),Ca(e)+n.length,Sa(t))}else{const r=Js(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new ms(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Oa(t),Qs(t),t.component,t,wa(e),Ca(e)+o.length,Sa(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Xs(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new hs(i,t)]}if(0===a.length&&0===c.length)return[new hs(i,[])];const l=Qs(t)===r,h=this.processSegment(a,u,c,l?Io:r);return null===h?null:[new hs(i,h)]}}function ba(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function _a(t){const e=[],n=new Set;for(const r of t){if(!ba(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=_a(r.children);e.push(new hs(r.value,t))}return e.filter(t=>!n.has(t))}function wa(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ca(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Oa(t){return t.data||{}}function Sa(t){return t.resolve||{}}function Ea(t){return nr(e=>{const n=t(e);return n?Object(Wt.a)(n).pipe(Object($t.a)(()=>e)):Object(cn.a)(e)})}class Ta extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Ia=new r.r("ROUTES");class ka{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object($t.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Vs(Do(i.injector.get(Ia,void 0,r.q.Self|r.q.Optional)).map($s),i)}),Xi(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ji.a(n,()=>new ln.a).pipe(Object(so.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Wt.a)(this.loader.load(t)):Fo(t()).pipe(Object(cr.a)(t=>t instanceof r.w?Object(cn.a)(t):Object(Wt.a)(this.compiler.compileModuleAsync(t))))}}class xa{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Aa,this.attachRef=null}}class Aa{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new xa,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class ja{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Na(t){throw t}function Ra(t,e,n){return e.parse("/")}function Da(t,e){return Object(cn.a)(null)}let Pa=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ln.a,this.errorHandler=Na,this.malformedUriErrorHandler=Ra,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Da,afterPreactivation:Da},this.urlHandlingStrategy=new ja,this.routeReuseStrategy=new Ta,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Bo(new Ho([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ka(s,a,t=>this.triggerEvent(new _o(t)),t=>this.triggerEvent(new wo(t))),this.routerState=ps(this.currentUrlTree,this.rootComponentType),this.transitions=new In({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Wn(t=>0!==t.id),Object($t.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),nr(t=>{let n=!1,r=!1;return Object(cn.a)(t).pipe(Object(or.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nr(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(cn.a)(t).pipe(nr(t=>{const n=this.transitions.getValue();return e.next(new lo(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?un.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,nr(t=>function(t,e,n,r,i){return new ua(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object($t.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(or.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(cr.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new va(t,e,n,r,i,o).recognize();return null===s?ma(new ya):Object(cn.a)(s)}catch(TC){return ma(TC)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object($t.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(or.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new go(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new lo(n,this.serializeUrl(r),i,o);e.next(a);const u=ps(r,this.rootComponentType).snapshot;return Object(cn.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),un.a}),Ea(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(or.a)(t=>{const e=new yo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object($t.a)(t=>Object.assign(Object.assign({},t),{guards:da(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(cr.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(cn.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Wt.a)(t).pipe(Object(cr.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(cn.a)(!0);const s=o.map(o=>{const s=fa(o,e,i);let a;if(function(t){return t&&Us(t.canDeactivate)}(s))a=Fo(s.canDeactivate(t,e,n,r));else{if(!Us(s))throw new Error("Invalid CanDeactivate guard");a=Fo(s(t,e,n,r))}return a.pipe(Oi())});return Object(cn.a)(s).pipe(Hs())}(t.component,t.route,n,e,r)),Oi(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(cr.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Wt.a)(e).pipe(no(e=>qn(function(t,e){return null!==t&&e&&e(new Co(t)),Object(cn.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new So(t)),Object(cn.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Yi(()=>{const i=e.guards.map(i=>{const o=fa(i,e.node,n);let s;if(function(t){return t&&Us(t.canActivateChild)}(o))s=Fo(o.canActivateChild(r,t));else{if(!Us(o))throw new Error("Invalid CanActivateChild guard");s=Fo(o(r,t))}return s.pipe(Oi())});return Object(cn.a)(i).pipe(Hs())}));return Object(cn.a)(i).pipe(Hs())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(cn.a)(!0);const i=r.map(r=>Yi(()=>{const i=fa(r,e,n);let o;if(function(t){return t&&Us(t.canActivate)}(i))o=Fo(i.canActivate(e,t));else{if(!Us(i))throw new Error("Invalid CanActivate guard");o=Fo(i(e,t))}return o.pipe(Oi())}));return Object(cn.a)(i).pipe(Hs())}(t,e.route,n))),Oi(t=>!0!==t,!0))}(r,o,t,e):Object(cn.a)(n)),Object($t.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(or.a)(t=>{if(qs(t.guardsResult)){const e=Ao(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new mo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Wn(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new fo(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Ea(t=>{if(t.guards.canActivateChecks.length)return Object(cn.a)(t).pipe(Object(or.a)(t=>{const e=new vo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),nr(t=>{let n=!1;return Object(cn.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(cr.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(cn.a)(t);let o=0;return Object(Wt.a)(n).pipe(no(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(cn.a)({});const o={};return Object(Wt.a)(i).pipe(Object(cr.a)(i=>function(t,e,n,r){const i=fa(t,e,r);return Fo(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(or.a)(t=>{o[i]=t}))),ro(1),Object(cr.a)(()=>Object.keys(o).length===i.length?Object(cn.a)(o):un.a))}(t._resolve,t,e,r).pipe(Object($t.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ys(t,n).resolve),null)))}(t.route,e,r,i)),Object(or.a)(()=>o++),ro(1),Object(cr.a)(e=>o===n.length?Object(cn.a)(t):un.a))})),Object(or.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new fo(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(or.a)(t=>{const e=new bo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Ea(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object($t.a)(t=>{const e=function(t,e,n){const r=Os(t,e._root,n?n._root:void 0);return new fs(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(or.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object($t.a)(t=>(new Fs(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(or.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new fo(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new ao(i))),Xi(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=qs(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new fo(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new po(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Zf){t.reject(Zf)}}var i;return un.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ws(t),this.config=t.map($s),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Is(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xs(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Lo(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new xs(n,e,r)}(n);if(o.toRoot())return Is(e.root,new Ho([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new As(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new As(t,t===e.root,0)}const r=Es(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new As(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Ns(s.segmentGroup,s.index,o.commands):js(s.segmentGroup,s.index,o.commands);return Is(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=qs(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(TC){e=this.malformedUriErrorHandler(TC,this.urlSerializer,t)}return e}isActive(t,e){if(qs(t))return Mo(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Mo(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ho(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.N),r.Zb(Go),r.Zb(Aa),r.Zb(w),r.Zb(r.s),r.Zb(r.x),r.Zb(r.i),r.Zb(void 0))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),La=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new ln.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Ma(this.skipLocationChange),replaceUrl:Ma(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ma(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Pa),r.Nb(gs),r.ac("tabindex"),r.Nb(r.E),r.Nb(r.l))},t.\u0275dir=r.Ib({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.cc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.zb]}),t})(),Fa=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new ln.a,this.subscription=t.events.subscribe(t=>{t instanceof ho&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Ma(this.skipLocationChange),replaceUrl:Ma(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ma(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Pa),r.Nb(gs),r.Nb(y))},t.\u0275dir=r.Ib({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.cc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Vb("href",e.href,r.uc),r.Cb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.zb]}),t})();function Ma(t){return""===t||!!t}let Va=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof ho&&this.update()})}ngAfterContentInit(){Object(cn.a)(this.links.changes,this.linksWithHrefs.changes,Object(cn.a)(null)).pipe(Object(Un.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(Wt.a)(e).pipe(Object(Un.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Pa),r.Nb(r.l),r.Nb(r.E),r.Nb(r.h),r.Nb(La,8),r.Nb(Fa,8))},t.\u0275dir=r.Ib({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Gb(n,La,1),r.Gb(n,Fa,1)),2&t){let t;r.rc(t=r.dc())&&(e.links=t),r.rc(t=r.dc())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.zb]}),t})(),Ua=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Io,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new qa(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Aa),r.Nb(r.Q),r.Nb(r.j),r.ac("name"),r.Nb(r.h))},t.\u0275dir=r.Ib({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class qa{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===gs?this.route:t===Aa?this.childContexts:this.parent.get(t,e)}}class Ba{}class Ha{preload(t,e){return Object(cn.a)(null)}}let za=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ka(e,n,e=>t.triggerEvent(new _o(e)),e=>t.triggerEvent(new wo(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof ho),no(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Wt.a)(n).pipe(Object(Un.a)(),Object($t.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(cn.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(cr.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Pa),r.Zb(r.x),r.Zb(r.i),r.Zb(r.s),r.Zb(Ba))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})(),Wa=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ho&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof To&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new To(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Pa),r.Zb(dt),r.Zb(void 0))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();const Ga=new r.r("ROUTER_CONFIGURATION"),Ka=new r.r("ROUTER_FORROOT_GUARD"),$a=[w,{provide:Go,useClass:Ko},{provide:Pa,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Pa(null,t,e,n,r,i,s,Do(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Go,Aa,w,r.s,r.x,r.i,Ia,Ga,[class{},new r.B],[class{},new r.B]]},Aa,{provide:gs,useFactory:function(t){return t.routerState.root},deps:[Pa]},{provide:r.x,useClass:r.K},za,Ha,class{preload(t,e){return e().pipe(Xi(()=>Object(cn.a)(null)))}},{provide:Ga,useValue:{enableTracing:!1}}];function Qa(){return new r.z("Router",Pa)}let Za=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[$a,tu(e),{provide:Ka,useFactory:Xa,deps:[[Pa,new r.B,new r.J]]},{provide:Ga,useValue:n||{}},{provide:y,useFactory:Ja,deps:[a,[new r.p(v),new r.B],Ga]},{provide:Wa,useFactory:Ya,deps:[Pa,dt,Ga]},{provide:Ba,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ha},{provide:r.z,multi:!0,useFactory:Qa},[eu,{provide:r.d,multi:!0,useFactory:nu,deps:[eu]},{provide:iu,useFactory:ru,deps:[eu]},{provide:r.b,multi:!0,useExisting:iu}]]}}static forChild(e){return{ngModule:t,providers:[tu(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(Ka,8),r.Zb(Pa,8))},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({}),t})();function Ya(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Wa(t,e,n)}function Ja(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Xa(t){return"guarded"}function tu(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Ia,multi:!0,useValue:t}]}let eu=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ln.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Pa),r=this.injector.get(Ga);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(cn.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ga),n=this.injector.get(za),i=this.injector.get(Wa),o=this.injector.get(Pa),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(r.s))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac}),t})();function nu(t){return t.appInitializer.bind(t)}function ru(t){return t.bootstrapListener.bind(t)}const iu=new r.r("Router Initializer");var ou=n("mrSG");function su(){return t=>t.lift(new au)}class au{call(t,e){return e.subscribe(new uu(t))}}class uu extends bn.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var cu=n("zIRd"),lu=n("qOnz"),hu=n("q/0M"),du=function(t,e){return(du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function fu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var pu,gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yu=yu||{},mu=gu||self;function vu(){}function bu(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _u(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var wu="closure_uid_"+(1e9*Math.random()>>>0),Cu=0;function Ou(t,e,n){return t.call.apply(t.bind,arguments)}function Su(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Eu(t,e,n){return(Eu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ou:Su).apply(null,arguments)}function Tu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Iu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ku(){this.s=this.s,this.o=this.o}var xu={};ku.prototype.s=!1,ku.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,wu)&&t[wu]||(t[wu]=++Cu)}(this);delete xu[t]}},ku.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Au=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ju=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Nu(t){return Array.prototype.concat.apply([],arguments)}function Ru(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Du(t){return/^[\s\xa0]*$/.test(t)}var Pu,Lu=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Fu(t,e){return-1!=t.indexOf(e)}function Mu(t,e){return t<e?-1:t>e?1:0}t:{var Vu=mu.navigator;if(Vu){var Uu=Vu.userAgent;if(Uu){Pu=Uu;break t}}Pu=""}function qu(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Bu(t){var e={};for(var n in t)e[n]=t[n];return e}var Hu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zu(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Hu.length;o++)n=Hu[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wu(t){return Wu[" "](t),t}Wu[" "]=vu;var Gu,Ku,$u=Fu(Pu,"Opera"),Qu=Fu(Pu,"Trident")||Fu(Pu,"MSIE"),Zu=Fu(Pu,"Edge"),Yu=Zu||Qu,Ju=Fu(Pu,"Gecko")&&!(Fu(Pu.toLowerCase(),"webkit")&&!Fu(Pu,"Edge"))&&!(Fu(Pu,"Trident")||Fu(Pu,"MSIE"))&&!Fu(Pu,"Edge"),Xu=Fu(Pu.toLowerCase(),"webkit")&&!Fu(Pu,"Edge");function tc(){var t=mu.document;return t?t.documentMode:void 0}t:{var ec="",nc=(Ku=Pu,Ju?/rv:([^\);]+)(\)|;)/.exec(Ku):Zu?/Edge\/([\d\.]+)/.exec(Ku):Qu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ku):Xu?/WebKit\/(\S+)/.exec(Ku):$u?/(?:Version)[ \/]?(\S+)/.exec(Ku):void 0);if(nc&&(ec=nc?nc[1]:""),Qu){var rc=tc();if(null!=rc&&rc>parseFloat(ec)){Gu=String(rc);break t}}Gu=ec}var ic={};var oc=mu.document&&Qu&&(tc()||parseInt(Gu,10))||void 0,sc=function(){if(!mu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{mu.addEventListener("test",vu,e),mu.removeEventListener("test",vu,e)}catch(n){}return t}();function ac(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function uc(t,e){if(ac.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ju){t:{try{Wu(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:cc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&uc.Z.h.call(this)}}ac.prototype.h=function(){this.defaultPrevented=!0},Iu(uc,ac);var cc={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var lc="closure_listenable_"+(1e6*Math.random()|0),hc=0;function dc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++hc,this.ca=this.fa=!1}function fc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function pc(t){this.src=t,this.g={},this.h=0}function gc(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Au(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function yc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}pc.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=yc(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new dc(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var mc="closure_lm_"+(1e6*Math.random()|0),vc={};function bc(t,e,n,r,i){if(r&&r.once)return wc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bc(t,e[o],n,r,i);return null}return n=kc(n),t&&t[lc]?t.N(e,n,_u(r)?!!r.capture:!!r,i):_c(t,e,n,!1,r,i)}function _c(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=_u(i)?!!i.capture:!!i,a=Tc(t);if(a||(t[mc]=a=new pc(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ec;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)sc||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Sc(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)wc(t,e[o],n,r,i);return null}return n=kc(n),t&&t[lc]?t.O(e,n,_u(r)?!!r.capture:!!r,i):_c(t,e,n,!0,r,i)}function Cc(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Cc(t,e[o],n,r,i);else r=_u(r)?!!r.capture:!!r,n=kc(n),t&&t[lc]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=yc(o=t.g[e],n,r,i))&&(fc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Tc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yc(e,n,r,i)),(n=-1<t?e[t]:null)&&Oc(n))}function Oc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[lc])gc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Sc(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tc(e))?(gc(n,t),0==n.h&&(n.src=null,e[mc]=null)):fc(t)}}}function Sc(t){return t in vc?vc[t]:vc[t]="on"+t}function Ec(t,e){if(t.ca)t=!0;else{e=new uc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Oc(t),t=n.call(r,e)}return t}function Tc(t){return(t=t[mc])instanceof pc?t:null}var Ic="__closure_events_fn_"+(1e9*Math.random()>>>0);function kc(t){return"function"==typeof t?t:(t[Ic]||(t[Ic]=function(e){return t.handleEvent(e)}),t[Ic])}function xc(){ku.call(this),this.i=new pc(this),this.P=this,this.I=null}function Ac(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new ac(e,t);else if(e instanceof ac)e.target=e.target||t;else{var i=e;zu(e=new ac(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=jc(s,r,!0,e)&&i}if(i=jc(s=e.g=t,r,!0,e)&&i,i=jc(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=jc(s=e.g=n[o],r,!1,e)&&i}function jc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&gc(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Iu(xc,ku),xc.prototype[lc]=!0,xc.prototype.removeEventListener=function(t,e,n,r){Cc(this,t,e,n,r)},xc.prototype.M=function(){if(xc.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)fc(n[r]);delete e.g[t],e.h--}}this.I=null},xc.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},xc.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Nc=mu.JSON.stringify;function Rc(){var t=qc,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dc,Pc=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Lc.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Lc=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new Fc},function(t){return t.reset()}),Fc=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Mc(t){mu.setTimeout(function(){throw t},0)}function Vc(t,e){Dc||function(){var t=mu.Promise.resolve(void 0);Dc=function(){t.then(Bc)}}(),Uc||(Dc(),Uc=!0),qc.add(t,e)}var Uc=!1,qc=new Pc;function Bc(){for(var t;t=Rc();){try{t.h.call(t.g)}catch(n){Mc(n)}var e=Lc;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uc=!1}function Hc(t,e){xc.call(this),this.h=t||1,this.g=e||mu,this.j=Eu(this.kb,this),this.l=Date.now()}function zc(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Wc(t,e,n){if("function"==typeof t)n&&(t=Eu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Eu(t.handleEvent,t)}return 2147483647<Number(e)?-1:mu.setTimeout(t,e||0)}function Gc(t){t.g=Wc(function(){t.g=null,t.i&&(t.i=!1,Gc(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Iu(Hc,xc),(pu=Hc.prototype).da=!1,pu.S=null,pu.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ac(this,"tick"),this.da&&(zc(this),this.start()))}},pu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pu.M=function(){Hc.Z.M.call(this),zc(this),delete this.g};var Kc=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}du(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Gc(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(mu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ku);function $c(t){ku.call(this),this.h=t,this.g={}}Iu($c,ku);var Qc=[];function Zc(t,e,n,r){Array.isArray(n)||(n&&(Qc[0]=n.toString()),n=Qc);for(var i=0;i<n.length;i++){var o=bc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Yc(t){qu(t.g,function(t,e){this.g.hasOwnProperty(e)&&Oc(t)},t),t.g={}}function Jc(){this.g=!0}function Xc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Nc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}$c.prototype.M=function(){$c.Z.M.call(this),Yc(this)},$c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Jc.prototype.Aa=function(){this.g=!1},Jc.prototype.info=function(){};var tl={},el=null;function nl(){return el=el||new xc}function rl(t){ac.call(this,tl.Ma,t)}function il(t){var e=nl();Ac(e,new rl(e,t))}function ol(t,e){ac.call(this,tl.STAT_EVENT,t),this.stat=e}function sl(t){var e=nl();Ac(e,new ol(e,t))}function al(t,e){ac.call(this,tl.Na,t),this.size=e}function ul(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return mu.setTimeout(function(){t()},e)}tl.Ma="serverreachability",Iu(rl,ac),tl.STAT_EVENT="statevent",Iu(ol,ac),tl.Na="timingevent",Iu(al,ac);var cl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ll={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function hl(){}function dl(){}hl.prototype.h=null;var fl,pl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gl(){ac.call(this,"d")}function yl(){ac.call(this,"c")}function ml(){}function vl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new $c(this),this.P=_l,this.W=new Hc(t=Yu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bl}function bl(){this.i=null,this.g="",this.h=!1}Iu(gl,ac),Iu(yl,ac),Iu(ml,hl),ml.prototype.g=function(){return new XMLHttpRequest},ml.prototype.i=function(){return{}},fl=new ml;var _l=45e3,wl={},Cl={};function Ol(t,e,n){t.K=1,t.v=Gl(Ul(e)),t.s=n,t.U=!0,Sl(t,null)}function Sl(t,e){t.F=Date.now(),kl(t),t.A=Ul(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),oh(n.h,"t",r),t.C=0,n=t.l.H,t.h=new bl,t.g=sd(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Kc(Eu(t.Ia,t,t.g),t.O)),Zc(t.V,t.g,"readystatechange",t.gb),e=t.H?Bu(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),il(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function El(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Tl(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Il(t,n))==Cl){4==e&&(t.o=4,sl(14),i=!1),Xc(t.j,t.m,null,"[Incomplete Response]");break}if(r==wl){t.o=4,sl(15),Xc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Xc(t.j,t.m,r,null),Rl(t,r)}El(t)&&r!=Cl&&r!=wl&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,sl(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jh(e),e.L=!0,sl(11))):(Xc(t.j,t.m,n,"[Invalid Chunked Response]"),Nl(t),jl(t))}function Il(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Cl:(n=Number(e.substring(n,r)),isNaN(n)?wl:(r+=1)+n>e.length?Cl:(e=e.substr(r,n),t.C=r+n,e))}function kl(t){t.Y=Date.now()+t.P,xl(t,t.P)}function xl(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ul(Eu(t.eb,t),e)}function Al(t){t.B&&(mu.clearTimeout(t.B),t.B=null)}function jl(t){0==t.l.G||t.I||ed(t.l,t)}function Nl(t){Al(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,zc(t.W),Yc(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Rl(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||dh(n.i,t)))if(n.I=t.N,!t.J&&dh(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;td(n),Hh(n)}Yh(n),sl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ul(Eu(n.ab,n),6e3));if(1>=hh(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else rd(n,11)}else if((t.J||n.g==t)&&td(n),!Du(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Fu(l,"spdy")||Fu(l,"quic")||Fu(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(fh(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Wl(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=t;if((r=n).oa=od(r,r.H?r.la:null,r.W),f.J){ph(r.i,f);var p=f,g=r.K;g&&p.setTimeout(g),p.B&&(Al(p),kl(p)),r.g=f}else Zh(r);0<n.l.length&&Gh(n)}else"stop"!=o[0]&&"close"!=o[0]||rd(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?rd(n,7):Bh(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}il(4)}catch(o){}}function Dl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bu(t)||"string"==typeof t)ju(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(bu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(bu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Pl(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Pl)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ll(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Fl(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Fl(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Fl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(pu=vl.prototype).setTimeout=function(t){this.P=t},pu.gb=function(t){t=t.target;var e=this.L;e&&3==Fh(t)?e.l():this.Ia(t)},pu.Ia=function(t){try{if(t==this.g)t:{var e=Fh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Yu||this.g&&(this.h.h||this.g.ga()||Mh(this.g)))){this.I||4!=e||7==n||il(8==n||0>=r?3:2),Al(this);var i=this.g.ba();this.N=i;e:if(El(this)){var o=Mh(this.g);t="";var s=o.length,a=4==Fh(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nl(this),jl(this);var u="";break e}this.h.i=new mu.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Du(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,sl(12),Nl(this),jl(this);break t}Xc(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rl(this,i)}this.U?(Tl(this,e,u),Yu&&this.i&&3==e&&(Zc(this.V,this.W,"tick",this.fb),this.W.start())):(Xc(this.j,this.m,u,null),Rl(this,u)),4==e&&Nl(this),this.i&&!this.I&&(4==e?ed(this.l,this):(this.i=!1,kl(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,sl(12)):(this.o=0,sl(13)),Nl(this),jl(this)}}}catch(e){}},pu.fb=function(){if(this.g){var t=Fh(this.g),e=this.g.ga();this.C<e.length&&(Al(this),Tl(this,t,e),this.i&&4!=t&&kl(this))}},pu.cancel=function(){this.I=!0,Nl(this)},pu.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(il(3),sl(17)),Nl(this),this.o=2,jl(this)):xl(this,this.Y-t)},(pu=Pl.prototype).R=function(){Ll(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},pu.T=function(){return Ll(this),this.g.concat()},pu.get=function(t,e){return Fl(this.h,t)?this.h[t]:e},pu.set=function(t,e){Fl(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},pu.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ml=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vl(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Vl){this.g=void 0!==e?e:t.g,ql(this,t.j),this.s=t.s,Bl(this,t.i),Hl(this,t.m),this.l=t.l,e=t.h;var n=new eh;n.i=e.i,e.g&&(n.g=new Pl(e.g),n.h=e.h),zl(this,n),this.o=t.o}else t&&(n=String(t).match(Ml))?(this.g=!!e,ql(this,n[1]||"",!0),this.s=Kl(n[2]||""),Bl(this,n[3]||"",!0),Hl(this,n[4]),this.l=Kl(n[5]||"",!0),zl(this,n[6]||"",!0),this.o=Kl(n[7]||"")):(this.g=!!e,this.h=new eh(null,this.g))}function Ul(t){return new Vl(t)}function ql(t,e,n){t.j=n?Kl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bl(t,e,n){t.i=n?Kl(e,!0):e}function Hl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function zl(t,e,n){e instanceof eh?(t.h=e,function(t,e){e&&!t.j&&(nh(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(rh(this,e),oh(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=$l(e,Xl)),t.h=new eh(e,t.g))}function Wl(t,e,n){t.h.set(e,n)}function Gl(t){return Wl(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Kl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $l(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ql),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ql(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Vl.prototype.toString=function(){var t=[],e=this.j;e&&t.push($l(e,Zl,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push($l(e,Zl,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push($l(n,"/"==n.charAt(0)?Jl:Yl,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$l(n,th)),t.join("")};var Zl=/[#\/\?@]/g,Yl=/[#\?:]/g,Jl=/[#\?]/g,Xl=/[#\?@]/g,th=/#/g;function eh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function nh(t){t.g||(t.g=new Pl,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function rh(t,e){nh(t),e=sh(t,e),Fl(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Fl((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ll(t)))}function ih(t,e){return nh(t),e=sh(t,e),Fl(t.g.h,e)}function oh(t,e,n){rh(t,e),0<n.length&&(t.i=null,t.g.set(sh(t,e),Ru(n)),t.h+=n.length)}function sh(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(pu=eh.prototype).add=function(t,e){nh(this),this.i=null,t=sh(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},pu.forEach=function(t,e){nh(this),this.g.forEach(function(n,r){ju(n,function(n){t.call(e,n,r,this)},this)},this)},pu.T=function(){nh(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},pu.R=function(t){nh(this);var e=[];if("string"==typeof t)ih(this,t)&&(e=Nu(e,this.g.get(sh(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Nu(e,t[n])}return e},pu.set=function(t,e){return nh(this),this.i=null,ih(this,t=sh(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},pu.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},pu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var ah=function(){return function(t,e){this.h=t,this.g=e}}();function uh(t){this.l=t||ch,t=mu.PerformanceNavigationTiming?0<(t=mu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(mu.g&&mu.g.Ea&&mu.g.Ea()&&mu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ch=10;function lh(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hh(t){return t.h?1:t.g?t.g.size:0}function dh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fh(t,e){t.g?t.g.add(e):t.h=e}function ph(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function gh(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=fu(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ru(t.i)}function yh(){}function mh(){this.g=new yh}function vh(t,e,n){var r=n||"";try{Dl(t,function(t,n){var i=t;_u(t)&&(i=Nc(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(TC){throw e.push(r+"type="+encodeURIComponent("_badmap")),TC}}function bh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function _h(t){this.l=t.$b||null,this.j=t.ib||!1}function wh(t,e){xc.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ch,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uh.prototype.cancel=function(){var t,e;if(this.i=gh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=fu(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},yh.prototype.stringify=function(t){return mu.JSON.stringify(t,void 0)},yh.prototype.parse=function(t){return mu.JSON.parse(t,void 0)},Iu(_h,hl),_h.prototype.g=function(){return new wh(this.l,this.j)},_h.prototype.i=function(t){return function(){return t}}({}),Iu(wh,xc);var Ch=0;function Oh(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Sh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Eh(t)}function Eh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(pu=wh.prototype).open=function(t,e){if(this.readyState!=Ch)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Eh(this)},pu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||mu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sh(this)),this.readyState=Ch},pu.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Eh(this)),this.g&&(this.readyState=3,Eh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==mu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oh(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},pu.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sh(this):Eh(this),3==this.readyState&&Oh(this)}},pu.Ua=function(t){this.g&&(this.response=this.responseText=t,Sh(this))},pu.Ta=function(t){this.g&&(this.response=t,Sh(this))},pu.ha=function(){this.g&&Sh(this)},pu.setRequestHeader=function(t,e){this.v.append(t,e)},pu.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},pu.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Th=mu.JSON.parse;function Ih(t){xc.call(this),this.headers=new Pl,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kh,this.K=this.L=!1}Iu(Ih,xc);var kh="",xh=/^https?$/i,Ah=["POST","PUT"];function jh(t){return"content-type"==t.toLowerCase()}function Nh(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Rh(t),Ph(t)}function Rh(t){t.D||(t.D=!0,Ac(t,"complete"),Ac(t,"error"))}function Dh(t){if(t.h&&void 0!==yu&&(!t.C[1]||4!=Fh(t)||2!=t.ba()))if(t.v&&4==Fh(t))Wc(t.Fa,0,t);else if(Ac(t,"readystatechange"),4==Fh(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ml)[1]||null;if(!o&&mu.self&&mu.self.location){var s=mu.self.location.protocol;o=s.substr(0,s.length-1)}i=!xh.test(o?o.toLowerCase():"")}e=i}if(e)Ac(t,"complete"),Ac(t,"success");else{t.m=6;try{var a=2<Fh(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Rh(t)}}finally{Ph(t)}}}function Ph(t,e){if(t.g){Lh(t);var n=t.g,r=t.C[0]?vu:null;t.g=null,t.C=null,e||Ac(t,"ready");try{n.onreadystatechange=r}catch(TC){}}}function Lh(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(mu.clearTimeout(t.A),t.A=null)}function Fh(t){return t.g?t.g.readyState:0}function Mh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kh:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return qu(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Wl(t,e,n))}function Uh(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qh(t){this.za=0,this.l=[],this.h=new Jc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Uh("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Uh("baseRetryDelayMs",5e3,t),this.$a=Uh("retryDelaySeedMs",1e4,t),this.Ya=Uh("forwardChannelMaxRetries",2,t),this.ra=Uh("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new uh(t&&t.concurrentRequestLimit),this.Ca=new mh,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Bh(t){if(zh(t),3==t.G){var e=t.V++,n=Ul(t.F);Wl(n,"SID",t.J),Wl(n,"RID",e),Wl(n,"TYPE","terminate"),$h(t,n),(e=new vl(t,t.h,e,void 0)).K=2,e.v=Gl(Ul(n)),n=!1,mu.navigator&&mu.navigator.sendBeacon&&(n=mu.navigator.sendBeacon(e.v.toString(),"")),!n&&mu.Image&&((new Image).src=e.v,n=!0),n||(e.g=sd(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kl(e)}id(t)}function Hh(t){t.g&&(Jh(t),t.g.cancel(),t.g=null)}function zh(t){Hh(t),t.u&&(mu.clearTimeout(t.u),t.u=null),td(t),t.i.cancel(),t.m&&("number"==typeof t.m&&mu.clearTimeout(t.m),t.m=null)}function Wh(t,e){t.l.push(new ah(t.Za++,e)),3==t.G&&Gh(t)}function Gh(t){lh(t.i)||t.m||(t.m=!0,Vc(t.Ha,t),t.C=0)}function Kh(t,e){var n;n=e?e.m:t.V++;var r=Ul(t.F);Wl(r,"SID",t.J),Wl(r,"RID",n),Wl(r,"AID",t.U),$h(t,r),t.o&&t.s&&Vh(r,t.o,t.s),n=new vl(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Qh(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),fh(t.i,n),Ol(n,r,e)}function $h(t,e){t.j&&Dl({},function(t,n){Wl(e,n,t)})}function Qh(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Eu(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{vh(l,s,"req"+c+"_")}catch(Vd){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Zh(t){t.g||t.u||(t.Y=1,Vc(t.Ga,t),t.A=0)}function Yh(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=ul(Eu(t.Ga,t),nd(t,t.A)),t.A++,0))}function Jh(t){null!=t.B&&(mu.clearTimeout(t.B),t.B=null)}function Xh(t){t.g=new vl(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ul(t.oa);Wl(e,"RID","rpc"),Wl(e,"SID",t.J),Wl(e,"CI",t.N?"0":"1"),Wl(e,"AID",t.U),$h(t,e),Wl(e,"TYPE","xmlhttp"),t.o&&t.s&&Vh(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Gl(Ul(e)),n.s=null,n.U=!0,Sl(n,t)}function td(t){null!=t.v&&(mu.clearTimeout(t.v),t.v=null)}function ed(t,e){var n=null;if(t.g==e){td(t),Jh(t),t.g=null;var r=2}else{if(!dh(t.i,e))return;n=e.D,ph(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ac(r=nl(),new al(r,n,e,i)),Gh(t)}else Zh(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hh(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ul(Eu(t.Ha,t,e),nd(t,t.C)),t.C++,0)))}(t,e)||2==r&&Yh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:rd(t,5);break;case 4:rd(t,10);break;case 3:rd(t,6);break;default:rd(t,2)}}function nd(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function rd(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Eu(t.jb,t);n||(n=new Vl("//www.google.com/images/cleardot.gif"),mu.location&&"http"==mu.location.protocol||ql(n,"https"),Gl(n)),function(t,e){var n=new Jc;if(mu.Image){var r=new Image;r.onload=Tu(bh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Tu(bh,n,r,"TestLoadImage: error",!1,e),r.onabort=Tu(bh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tu(bh,n,r,"TestLoadImage: timeout",!1,e),mu.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else sl(2);t.G=0,t.j&&t.j.va(e),id(t),zh(t)}function id(t){t.G=0,t.I=-1,t.j&&(0==gh(t.i).length&&0==t.l.length||(t.i.i.length=0,Ru(t.l),t.l.length=0),t.j.ua())}function od(t,e,n){var r=function(t){return t instanceof Vl?Ul(t):new Vl(t,void 0)}(n);if(""!=r.i)e&&Bl(r,e+"."+r.i),Hl(r,r.m);else{var i=mu.location;r=function(t,e,n,r){var i=new Vl(null,void 0);return t&&ql(i,t),e&&Bl(i,e),n&&Hl(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&qu(t.aa,function(t,e){Wl(r,e,t)}),n=t.sa,(e=t.D)&&n&&Wl(r,e,n),Wl(r,"VER",t.ma),$h(t,r),r}function sd(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ih(n&&t.Ba&&!t.qa?new _h({ib:!0}):t.qa)).L=t.H,e}function ad(){}function ud(){if(Qu&&!(10<=Number(oc)))throw Error("Environmental error: no available transport.")}function cd(t,e){xc.call(this),this.g=new qh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Du(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Du(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new dd(this)}function ld(t){gl.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hd(){yl.call(this),this.status=1}function dd(t){this.g=t}(pu=Ih.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fl.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:fl),this.g.onreadystatechange=Eu(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Nh(this,o)}t=n||"";var i=new Pl(this.headers);r&&Dl(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=jh,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=mu.FormData&&t instanceof mu.FormData,!(0<=Au(Ah,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Lh(this),0<this.B&&((this.K=function(t){return Qu&&function(){return t=ic,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Lu(String(Gu)).split("."),n=Lu("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Mu(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Mu(0==o[2].length,0==s[2].length)||Mu(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Eu(this.pa,this)):this.A=Wc(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Nh(this,o)}},pu.pa=function(){void 0!==yu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ac(this,"timeout"),this.abort(8))},pu.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ac(this,"complete"),Ac(this,"abort"),Ph(this))},pu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ph(this,!0)),Ih.Z.M.call(this)},pu.Fa=function(){this.s||(this.F||this.v||this.l?Dh(this):this.cb())},pu.cb=function(){Dh(this)},pu.ba=function(){try{return 2<Fh(this)?this.g.status:-1}catch(Ku){return-1}},pu.ga=function(){try{return this.g?this.g.responseText:""}catch(Ku){return""}},pu.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Th(e)}},pu.Da=function(){return this.m},pu.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pu=qh.prototype).ma=8,pu.G=1,pu.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},pu.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new vl(this,this.h,t,void 0),n=this.s;if(this.P&&(n?zu(n=Bu(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Qh(this,e,r),Wl(i=Ul(this.F),"RID",t),Wl(i,"CVER",22),this.D&&Wl(i,"X-HTTP-Session-Id",this.D),$h(this,i),this.o&&n&&Vh(i,this.o,n),fh(this.i,e),this.Ra&&Wl(i,"TYPE","init"),this.ja?(Wl(i,"$req",r),Wl(i,"SID","null"),e.$=!0,Ol(e,i,null)):Ol(e,i,r),this.G=2}}else 3==this.G&&(t?Kh(this,t):0==this.l.length||lh(this.i)||Kh(this))},pu.Ga=function(){if(this.u=null,Xh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ul(Eu(this.bb,this),t)}},pu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,sl(10),Hh(this),Xh(this))},pu.ab=function(){null!=this.v&&(this.v=null,Hh(this),Yh(this),sl(19))},pu.jb=function(t){t?(this.h.info("Successfully pinged google.com"),sl(2)):(this.h.info("Failed to ping google.com"),sl(1))},(pu=ad.prototype).xa=function(){},pu.wa=function(){},pu.va=function(){},pu.ua=function(){},pu.Oa=function(){},ud.prototype.g=function(t,e){return new cd(t,e)},Iu(cd,xc),cd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Vc(Eu(t.hb,t,e))),sl(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=od(t,null,t.W),Gh(t)},cd.prototype.close=function(){Bh(this.g)},cd.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Wh(this.g,e)}else this.v?((e={}).__data__=Nc(t),Wh(this.g,e)):Wh(this.g,t)},cd.prototype.M=function(){this.g.j=null,delete this.j,Bh(this.g),delete this.g,cd.Z.M.call(this)},Iu(ld,gl),Iu(hd,yl),Iu(dd,ad),dd.prototype.xa=function(){Ac(this.g,"a")},dd.prototype.wa=function(t){Ac(this.g,new ld(t))},dd.prototype.va=function(t){Ac(this.g,new hd(t))},dd.prototype.ua=function(){Ac(this.g,"b")},ud.prototype.createWebChannel=ud.prototype.g,cd.prototype.send=cd.prototype.u,cd.prototype.open=cd.prototype.m,cd.prototype.close=cd.prototype.close,cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,ll.COMPLETE="complete",dl.EventType=pl,pl.OPEN="a",pl.CLOSE="b",pl.ERROR="c",pl.MESSAGE="d",xc.prototype.listen=xc.prototype.N,Ih.prototype.listenOnce=Ih.prototype.O,Ih.prototype.getLastError=Ih.prototype.La,Ih.prototype.getLastErrorCode=Ih.prototype.Da,Ih.prototype.getStatus=Ih.prototype.ba,Ih.prototype.getResponseJson=Ih.prototype.Qa,Ih.prototype.getResponseText=Ih.prototype.ga,Ih.prototype.send=Ih.prototype.ea;var fd=cl,pd=ll,gd=tl,yd=_h,md=dl,vd=Ih,bd=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();bd.o=-1;var _d={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ou.c)(e,t),e}(Error),Cd=new hu.b("@firebase/firestore");function Od(){return Cd.logLevel}function Sd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cd.logLevel<=hu.a.DEBUG){var r=e.map(Id);Cd.debug.apply(Cd,Object(ou.f)(["Firestore (8.10.0): "+t],r))}}function Ed(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cd.logLevel<=hu.a.ERROR){var r=e.map(Id);Cd.error.apply(Cd,Object(ou.f)(["Firestore (8.10.0): "+t],r))}}function Td(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Cd.logLevel<=hu.a.WARN){var r=e.map(Id);Cd.warn.apply(Cd,Object(ou.f)(["Firestore (8.10.0): "+t],r))}}function Id(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(TC){return t}}function kd(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Ed(e),new Error(e)}function xd(t,e){t||kd()}function Ad(t,e){return t}function jd(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Nd=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=jd(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Rd(t,e){return t<e?-1:t>e?1:0}function Dd(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Pd(t){return t+"\0"}var Ld=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new wd(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new wd(_d.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new wd(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wd(_d.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Rd(this.nanoseconds,t.nanoseconds):Rd(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Fd=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ld(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Md(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vd(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ud(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var qd=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&kd(),void 0===n?n=t.length-e:n>t.length-e&&kd(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new wd(_d.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(qd),Hd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Hd.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new wd(_d.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new wd(_d.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new wd(_d.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new wd(_d.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(qd),Wd=function(){function t(t){this.fields=t,t.sort(zd.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Dd(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Gd=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Rd(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Gd.EMPTY_BYTE_STRING=new Gd("");var Kd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $d(t){if(xd(!!t),"string"==typeof t){var e=0,n=Kd.exec(t);if(xd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qd(t.seconds),nanos:Qd(t.nanos)}}function Qd(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zd(t){return"string"==typeof t?Gd.fromBase64String(t):Gd.fromUint8Array(t)}function Yd(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jd(t){var e=t.mapValue.fields.__previous_value__;return Yd(e)?Jd(e):e}function Xd(t){var e=$d(t.mapValue.fields.__local_write_time__.timestampValue);return new Ld(e.seconds,e.nanos)}function tf(t){return null==t}function ef(t){return 0===t&&1/t==-1/0}function nf(t){return"number"==typeof t&&Number.isInteger(t)&&!ef(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var rf=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Bd.fromString(e))},t.fromName=function(e){return new t(Bd.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Bd.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Bd.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Bd(e.slice()))},t}();function of(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yd(t)?4:10:kd()}function sf(t,e){var n=of(t);if(n!==of(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xd(t).isEqual(Xd(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$d(t.timestampValue),r=$d(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zd(t.bytesValue).isEqual(Zd(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Qd(t.geoPointValue.latitude)===Qd(e.geoPointValue.latitude)&&Qd(t.geoPointValue.longitude)===Qd(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Qd(t.integerValue)===Qd(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Qd(t.doubleValue),r=Qd(e.doubleValue);return n===r?ef(n)===ef(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Dd(t.arrayValue.values||[],e.arrayValue.values||[],sf);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Md(n)!==Md(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sf(n[i],r[i])))return!1;return!0}(t,e);default:return kd()}}function af(t,e){return void 0!==(t.values||[]).find(function(t){return sf(t,e)})}function uf(t,e){var n=of(t),r=of(e);if(n!==r)return Rd(n,r);switch(n){case 0:return 0;case 1:return Rd(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Qd(t.integerValue||t.doubleValue),r=Qd(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return cf(t.timestampValue,e.timestampValue);case 4:return cf(Xd(t),Xd(e));case 5:return Rd(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Zd(t),r=Zd(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Rd(n[i],r[i]);if(0!==o)return o}return Rd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Rd(Qd(t.latitude),Qd(e.latitude));return 0!==n?n:Rd(Qd(t.longitude),Qd(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=uf(n[i],r[i]);if(o)return o}return Rd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Rd(r[s],o[s]);if(0!==a)return a;var u=uf(n[r[s]],i[o[s]]);if(0!==u)return u}return Rd(r.length,o.length)}(t.mapValue,e.mapValue);default:throw kd()}}function cf(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Rd(t,e);var n=$d(t),r=$d(e),i=Rd(n.seconds,r.seconds);return 0!==i?i:Rd(n.nanos,r.nanos)}function lf(t){return hf(t)}function hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$d(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zd(t.bytesValue).toBase64():"referenceValue"in t?rf.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=hf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+hf(t.fields[o])}return e+"}"}(t.mapValue):kd();var e}function df(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function ff(t){return!!t&&"integerValue"in t}function pf(t){return!!t&&"arrayValue"in t}function gf(t){return!!t&&"nullValue"in t}function yf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mf(t){return!!t&&"mapValue"in t}function vf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return Vd(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=vf(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=vf(t.arrayValue.values[r]);return n}return Object.assign({},t)}var bf=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!mf(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=vf(e)},t.prototype.setAll=function(t){var e=this,n=zd.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=vf(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());mf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return sf(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Vd(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(vf(this.value))},t}();function _f(t){var e=[];return Vd(t.fields,function(t,n){var r=new zd([t]);if(mf(n)){var i=_f(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Wd(e)}var wf=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Fd.min(),bf.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,bf.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,bf.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=bf.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=bf.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Cf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Of(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Cf(t,e,n,r,i,o,s)}function Sf(t){var e=Ad(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+lf(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),tf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ff(e.startAt)),e.endAt&&(n+="|ub:",n+=Ff(e.endAt)),e.h=n}return e.h}function Ef(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Vf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!sf(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qf(t.startAt,e.startAt)&&qf(t.endAt,e.endAt)}function Tf(t){return rf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var If=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ou.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new kf(t,n,r):"array-contains"===n?new Nf(t,r):"in"===n?new Rf(t,r):"not-in"===n?new Df(t,r):"array-contains-any"===n?new Pf(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new xf(t,n):new Af(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(uf(e,this.value)):null!==e&&of(this.value)===of(e)&&this.m(uf(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return kd()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=rf.fromName(r.referenceValue),i}return Object(ou.c)(e,t),e.prototype.matches=function(t){var e=rf.comparator(t.key,this.key);return this.m(e)},e}(If),xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=jf(0,n),r}return Object(ou.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(If),Af=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=jf(0,n),r}return Object(ou.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(If);function jf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return rf.fromName(t.referenceValue)})}var Nf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ou.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return pf(e)&&af(e.arrayValue,this.value)},e}(If),Rf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ou.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&af(this.value.arrayValue,e)},e}(If),Df=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ou.c)(e,t),e.prototype.matches=function(t){if(af(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!af(this.value.arrayValue,e)},e}(If),Pf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ou.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!pf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return af(e.value.arrayValue,t)})},e}(If),Lf=function(t,e){this.position=t,this.before=e};function Ff(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return lf(t)}).join(",")}var Mf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Vf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Uf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?rf.comparator(rf.fromName(s.referenceValue),n.key):uf(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function qf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sf(t.position[n],e.position[n]))return!1;return!0}var Bf=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Hf(t,e,n,r,i,o,s,a){return new Bf(t,e,n,r,i,o,s,a)}function zf(t){return new Bf(t)}function Wf(t){return!tf(t.limit)&&"F"===t.limitType}function Gf(t){return!tf(t.limit)&&"L"===t.limitType}function Kf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function $f(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Qf(t){return null!==t.collectionGroup}function Zf(t){var e=Ad(t);if(null===e.p){e.p=[];var n=$f(e),r=Kf(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Mf(n)),e.p.push(new Mf(zd.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Mf(zd.keyField(),u))}}}return e.p}function Yf(t){var e=Ad(t);if(!e.T)if("F"===e.limitType)e.T=Of(e.path,e.collectionGroup,Zf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zf(e);r<i.length;r++){var o=i[r];n.push(new Mf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Lf(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Lf(e.startAt.position,!e.startAt.before):null;e.T=Of(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Jf(t,e,n){return new Bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return Ef(Yf(t),Yf(e))&&t.limitType===e.limitType}function tp(t){return Sf(Yf(t))+"|lt:"+t.limitType}function ep(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+lf(e.value);var e}).join(", ")+"]"),tf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ff(t.startAt)),t.endAt&&(e+=", endAt: "+Ff(t.endAt)),"Target("+e+")"}(Yf(t))+"; limitType="+t.limitType+")"}function np(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):rf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Uf(t.startAt,Zf(t),e)||t.endAt&&Uf(t.endAt,Zf(t),e))}(t,e)}function rp(t){return function(e,n){for(var r=!1,i=0,o=Zf(t);i<o.length;i++){var s=o[i],a=ip(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ip(t,e,n){var r=t.field.isKeyField()?rf.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?uf(r,i):kd()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return kd()}}function op(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function sp(t){return{integerValue:""+t}}function ap(t,e){return nf(e)?sp(e):op(t,e)}var up=function(){this._=void 0};function cp(t,e,n){return t instanceof dp?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof fp?pp(t,e):t instanceof gp?yp(t,e):function(t,e){var n=hp(t,e),r=vp(n)+vp(t.A);return ff(n)&&ff(t.A)?sp(r):op(t.R,r)}(t,e)}function lp(t,e,n){return t instanceof fp?pp(t,e):t instanceof gp?yp(t,e):n}function hp(t,e){return t instanceof mp?ff(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e}(up),fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ou.c)(e,t),e}(up);function pp(t,e){for(var n=bp(e),r=function(t){n.some(function(e){return sf(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ou.c)(e,t),e}(up);function yp(t,e){for(var n=bp(e),r=function(t){n=n.filter(function(e){return!sf(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var mp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(ou.c)(e,t),e}(up);function vp(t){return Qd(t.integerValue||t.doubleValue)}function bp(t){return pf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var _p=function(t,e){this.field=t,this.transform=e},wp=function(t,e){this.version=t,this.transformResults=e},Cp=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Op(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Sp=function(){};function Ep(t,e,n){t instanceof Ap?function(t,e,n){var r=t.value.clone(),i=Rp(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof jp?function(t,e,n){if(Op(t.precondition,e)){var r=Rp(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Np(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Tp(t,e,n){t instanceof Ap?function(t,e,n){if(Op(t.precondition,e)){var r=t.value.clone(),i=Dp(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(xp(e),r).setHasLocalMutations()}}(t,e,n):t instanceof jp?function(t,e,n){if(Op(t.precondition,e)){var r=Dp(t.fieldTransforms,n,e),i=e.data;i.setAll(Np(t)),i.setAll(r),e.convertToFoundDocument(xp(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Op(t.precondition,e)&&e.convertToNoDocument(Fd.min())}(t,e)}function Ip(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=hp(o.transform,s||null);null!=a&&(null==n&&(n=bf.empty()),n.set(o.field,a))}return n||null}function kp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Dd(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fp&&e instanceof fp||t instanceof gp&&e instanceof gp?Dd(t.elements,e.elements,sf):t instanceof mp&&e instanceof mp?sf(t.A,e.A):t instanceof dp&&e instanceof dp}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function xp(t){return t.isFoundDocument()?t.version:Fd.min()}var Ap=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(ou.c)(e,t),e}(Sp),jp=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(ou.c)(e,t),e}(Sp);function Np(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Rp(t,e,n){var r=new Map;xd(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,lp(s,a,n[i]))}return r}function Dp(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,cp(a,u,e))}return r}var Pp,Lp,Fp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(ou.c)(e,t),e}(Sp),Mp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(ou.c)(e,t),e}(Sp),Vp=function(t){this.count=t};function Up(t){switch(t){case _d.OK:return kd();case _d.CANCELLED:case _d.UNKNOWN:case _d.DEADLINE_EXCEEDED:case _d.RESOURCE_EXHAUSTED:case _d.INTERNAL:case _d.UNAVAILABLE:case _d.UNAUTHENTICATED:return!1;case _d.INVALID_ARGUMENT:case _d.NOT_FOUND:case _d.ALREADY_EXISTS:case _d.PERMISSION_DENIED:case _d.FAILED_PRECONDITION:case _d.ABORTED:case _d.OUT_OF_RANGE:case _d.UNIMPLEMENTED:case _d.DATA_LOSS:return!0;default:return kd()}}function qp(t){if(void 0===t)return Ed("GRPC error has no .code"),_d.UNKNOWN;switch(t){case Pp.OK:return _d.OK;case Pp.CANCELLED:return _d.CANCELLED;case Pp.UNKNOWN:return _d.UNKNOWN;case Pp.DEADLINE_EXCEEDED:return _d.DEADLINE_EXCEEDED;case Pp.RESOURCE_EXHAUSTED:return _d.RESOURCE_EXHAUSTED;case Pp.INTERNAL:return _d.INTERNAL;case Pp.UNAVAILABLE:return _d.UNAVAILABLE;case Pp.UNAUTHENTICATED:return _d.UNAUTHENTICATED;case Pp.INVALID_ARGUMENT:return _d.INVALID_ARGUMENT;case Pp.NOT_FOUND:return _d.NOT_FOUND;case Pp.ALREADY_EXISTS:return _d.ALREADY_EXISTS;case Pp.PERMISSION_DENIED:return _d.PERMISSION_DENIED;case Pp.FAILED_PRECONDITION:return _d.FAILED_PRECONDITION;case Pp.ABORTED:return _d.ABORTED;case Pp.OUT_OF_RANGE:return _d.OUT_OF_RANGE;case Pp.UNIMPLEMENTED:return _d.UNIMPLEMENTED;case Pp.DATA_LOSS:return _d.DATA_LOSS;default:return kd()}}(Lp=Pp||(Pp={}))[Lp.OK=0]="OK",Lp[Lp.CANCELLED=1]="CANCELLED",Lp[Lp.UNKNOWN=2]="UNKNOWN",Lp[Lp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lp[Lp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lp[Lp.NOT_FOUND=5]="NOT_FOUND",Lp[Lp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lp[Lp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lp[Lp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lp[Lp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lp[Lp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lp[Lp.ABORTED=10]="ABORTED",Lp[Lp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lp[Lp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lp[Lp.INTERNAL=13]="INTERNAL",Lp[Lp.UNAVAILABLE=14]="UNAVAILABLE",Lp[Lp.DATA_LOSS=15]="DATA_LOSS";var Bp=function(){function t(t,e){this.comparator=t,this.root=e||zp.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zp.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zp.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Hp(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Hp(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Hp(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Hp(this.root,t,this.comparator,!0)},t}(),Hp=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),zp=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw kd();if(this.right.isRed())throw kd();var t=this.left.check();if(t!==this.right.check())throw kd();return t+(this.isRed()?0:1)},t}();zp.EMPTY=null,zp.RED=!0,zp.BLACK=!1,zp.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw kd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw kd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw kd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw kd()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw kd()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new zp(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Wp=function(){function t(t){this.comparator=t,this.data=new Bp(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Gp(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Gp(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Gp=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Kp=new Bp(rf.comparator);function $p(){return Kp}var Qp=new Bp(rf.comparator);function Zp(){return Qp}var Yp=new Bp(rf.comparator);function Jp(){return Yp}var Xp=new Wp(rf.comparator);function tg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Xp,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var eg=new Wp(Rd);function ng(){return eg}var rg=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ig.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Fd.min(),r,ng(),$p(),tg())},t}(),ig=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Gd.EMPTY_BYTE_STRING,n,tg(),tg(),tg())},t}(),og=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},sg=function(t,e){this.targetId=t,this.V=e},ag=function(t,e,n,r){void 0===n&&(n=Gd.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ug=function(){function t(){this.S=0,this.D=hg(),this.C=Gd.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=tg(),e=tg(),n=tg();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:kd()}}),new ig(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=hg()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),cg=function(){function t(t){this.W=t,this.G=new Map,this.H=$p(),this.J=lg(),this.Y=new Wp(Rd)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:kd()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Tf(i))if(0===n){var o=new rf(i.path);this.tt(e,o,wf.newNoDocument(o,Fd.min()))}else xd(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Tf(o.target)){var s=new rf(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,wf.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=tg();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new rg(t,n,this.Y,this.H,r);return this.H=$p(),this.J=lg(),this.Y=new Wp(Rd),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ug,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Wp(Rd),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Sd("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ug),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function lg(){return new Bp(rf.comparator)}function hg(){return new Bp(rf.comparator)}var dg={asc:"ASCENDING",desc:"DESCENDING"},fg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pg=function(t,e){this.databaseId=t,this.I=e};function gg(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function yg(t,e){return t.I?e.toBase64():e.toUint8Array()}function mg(t,e){return gg(t,e.toTimestamp())}function vg(t){return xd(!!t),Fd.fromTimestamp(function(t){var e=$d(t);return new Ld(e.seconds,e.nanos)}(t))}function bg(t,e){return function(t){return new Bd(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function _g(t){var e=Bd.fromString(t);return xd(zg(e)),e}function wg(t,e){return bg(t.databaseId,e.path)}function Cg(t,e){var n=_g(e);if(n.get(1)!==t.databaseId.projectId)throw new wd(_d.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new wd(_d.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new rf(Tg(n))}function Og(t,e){return bg(t.databaseId,e)}function Sg(t){var e=_g(t);return 4===e.length?Bd.emptyPath():Tg(e)}function Eg(t){return new Bd(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tg(t){return xd(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ig(t,e,n){return{name:wg(t,e),fields:n.value.mapValue.fields}}function kg(t,e,n){var r=Cg(t,e.name),i=vg(e.updateTime),o=new bf({mapValue:{fields:e.fields}}),s=wf.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function xg(t,e){var n;if(e instanceof Ap)n={update:Ig(t,e.key,e.value)};else if(e instanceof Fp)n={delete:wg(t,e.key)};else if(e instanceof jp)n={update:Ig(t,e.key,e.data),updateMask:Hg(e.fieldMask)};else{if(!(e instanceof Mp))return kd();n={verify:wg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof dp)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fp)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gp)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof mp)return{fieldPath:e.field.canonicalString(),increment:n.A};throw kd()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:mg(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:kd()}(t,e.precondition)),n}function Ag(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Cp.updateTime(vg(t.updateTime)):void 0!==t.exists?Cp.exists(t.exists):Cp.none()}(e.currentDocument):Cp.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(xd("REQUEST_TIME"===e.setToServerValue),n=new dp):"appendMissingElements"in e?n=new fp(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new gp(e.removeAllFromArray.values||[]):"increment"in e?n=new mp(t,e.increment):kd();var r=zd.fromServerFormat(e.fieldPath);return new _p(r,n)}(t,e)}):[];if(e.update){var i=Cg(t,e.update.name),o=new bf({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Wd((t.fieldPaths||[]).map(function(t){return zd.fromServerFormat(t)}))}(e.updateMask);return new jp(i,o,s,n,r)}return new Ap(i,o,n,r)}if(e.delete){var a=Cg(t,e.delete);return new Fp(a,n)}if(e.verify){var u=Cg(t,e.verify);return new Mp(u,n)}return kd()}function jg(t,e){return{documents:[Og(t,e.path)]}}function Ng(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Og(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Og(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(yf(t.value))return{unaryFilter:{field:Vg(t.field),op:"IS_NAN"}};if(gf(t.value))return{unaryFilter:{field:Vg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yf(t.value))return{unaryFilter:{field:Vg(t.field),op:"IS_NOT_NAN"}};if(gf(t.value))return{unaryFilter:{field:Vg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vg(t.field),op:Mg(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Vg(t.field),direction:Fg(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||tf(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Pg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pg(e.endAt)),n}function Rg(t){var e=Sg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xd(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Dg(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Mf(Ug(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return tf(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Lg(n.startAt));var l=null;return n.endAt&&(l=Lg(n.endAt)),Hf(e,i,a,s,u,"F",c,l)}function Dg(t){return t?void 0!==t.unaryFilter?[Bg(t)]:void 0!==t.fieldFilter?[qg(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Dg(t)}).reduce(function(t,e){return t.concat(e)}):kd():[]}function Pg(t){return{before:t.before,values:t.position}}function Lg(t){return new Lf(t.values||[],!!t.before)}function Fg(t){return dg[t]}function Mg(t){return fg[t]}function Vg(t){return{fieldPath:t.canonicalString()}}function Ug(t){return zd.fromServerFormat(t.fieldPath)}function qg(t){return If.create(Ug(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return kd()}}(t.fieldFilter.op),t.fieldFilter.value)}function Bg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ug(t.unaryFilter.field);return If.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Ug(t.unaryFilter.field);return If.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ug(t.unaryFilter.field);return If.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ug(t.unaryFilter.field);return If.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return kd()}}function Hg(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function zg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Wg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Kg(e)),e=Gg(t.get(n),e);return Kg(e)}function Gg(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Kg(t){return t+"\x01\x01"}function $g(t){var e=t.length;if(xd(e>=2),2===e)return xd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Bd.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&kd(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:kd()}o=s+2}return new Bd(r)}var Qg=function(t,e){this.seconds=t,this.nanoseconds=e},Zg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Zg.store="owner",Zg.key="owner";var Yg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Yg.store="mutationQueues",Yg.keyPath="userId";var Jg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Jg.store="mutations",Jg.keyPath="batchId",Jg.userMutationsIndex="userMutationsIndex",Jg.userMutationsKeyPath=["userId","batchId"];var Xg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Wg(e)]},t.key=function(t,e,n){return[t,Wg(e),n]},t}();Xg.store="documentMutations",Xg.PLACEHOLDER=new Xg;var ty=function(t,e){this.path=t,this.readTime=e},ey=function(t,e){this.path=t,this.version=e},ny=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ny.store="remoteDocuments",ny.readTimeIndex="readTimeIndex",ny.readTimeIndexPath="readTime",ny.collectionReadTimeIndex="collectionReadTimeIndex",ny.collectionReadTimeIndexPath=["parentPath","readTime"];var ry=function(t){this.byteSize=t};ry.store="remoteDocumentGlobal",ry.key="remoteDocumentGlobalKey";var iy=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};iy.store="targets",iy.keyPath="targetId",iy.queryTargetsIndexName="queryTargetsIndex",iy.queryTargetsKeyPath=["canonicalId","targetId"];var oy=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};oy.store="targetDocuments",oy.keyPath=["targetId","path"],oy.documentTargetsIndex="documentTargetsIndex",oy.documentTargetsKeyPath=["path","targetId"];var sy=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};sy.key="targetGlobalKey",sy.store="targetGlobal";var ay=function(t,e){this.collectionId=t,this.parent=e};ay.store="collectionParents",ay.keyPath=["collectionId","parent"];var uy=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};uy.store="clientMetadata",uy.keyPath="clientId";var cy=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};cy.store="bundles",cy.keyPath="bundleId";var ly=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ly.store="namedQueries",ly.keyPath="name";var hy=Object(ou.f)(Object(ou.f)([],Object(ou.f)(Object(ou.f)([],Object(ou.f)(Object(ou.f)([],Object(ou.f)(Object(ou.f)([],[Yg.store,Jg.store,Xg.store,ny.store,iy.store,Zg.store,sy.store,oy.store]),[uy.store])),[ry.store])),[ay.store])),[cy.store,ly.store]),dy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fy=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),py=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},gy=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&kd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),yy=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new py,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new by(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Sy(e.target.error);n.ft.reject(new by(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new by(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Sd("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new wy(e)},t}(),my=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(lu.o)())&&Ed("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Sd("SimpleDb","Removing database:",t),Cy(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(lu.o)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n=this;return Object(ou.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Sd("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new by(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new wd(_d.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new by(t,n))},i.onupgradeneeded=function(t){Sd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Sd("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(ou.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ou.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=yy.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),gy.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Sd("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),vy=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Cy(this.Pt.delete())},t}(),by=function(t){function e(e,n){var r=this;return(r=t.call(this,_d.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ou.c)(e,t),e}(wd);function _y(t){return"IndexedDbTransactionError"===t.name}var wy=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Sd("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Sd("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Cy(n)},t.prototype.add=function(t){return Sd("SimpleDb","ADD",this.store.name,t,t),Cy(this.store.add(t))},t.prototype.get=function(t){var e=this;return Cy(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Sd("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Sd("SimpleDb","DELETE",this.store.name,t),Cy(this.store.delete(t))},t.prototype.count=function(){return Sd("SimpleDb","COUNT",this.store.name),Cy(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.kt=function(t,e){Sd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new gy(function(n,r){e.onerror=function(t){var e=Sy(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new gy(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new vy(i),s=e(i.primaryKey,i.value,o);if(s instanceof gy){var a=s.catch(function(t){return o.done(),gy.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return gy.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Cy(t){return new gy(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Sy(t.target.error);n(e)}})}var Oy=!1;function Sy(t){var e=my._t(Object(lu.o)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new wd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Oy||(Oy=!0,setTimeout(function(){throw r},0)),r}}return t}var Ey=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(ou.c)(e,t),e}(fy);function Ty(t,e){var n=Ad(t);return my.It(n.Mt,e)}var Iy=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ep(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Tp(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Tp(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Fd.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},tg())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Dd(this.mutations,t.mutations,function(t,e){return kp(t,e)})&&Dd(this.baseMutations,t.baseMutations,function(t,e){return kp(t,e)})},t}(),ky=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){xd(e.mutations.length===r.length);for(var i=Jp(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),xy=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Fd.min()),void 0===o&&(o=Fd.min()),void 0===s&&(s=Gd.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Ay=function(t){this.Lt=t};function jy(t,e){if(e.document)return kg(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=rf.fromSegments(e.noDocument.path),r=Ly(e.noDocument.readTime),i=wf.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=rf.fromSegments(e.unknownDocument.path);return r=Ly(e.unknownDocument.version),wf.newUnknownDocument(o,r)}return kd()}function Ny(t,e,n){var r=Ry(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:wg(t,e.key),fields:e.data.value.mapValue.fields,updateTime:gg(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new ny(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Py(e.version);return s=e.hasCommittedMutations,new ny(null,new ty(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Py(e.version);return new ny(new ey(c,l),null,null,!0,r,i)}return kd()}function Ry(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dy(t){var e=new Ld(t[0],t[1]);return Fd.fromTimestamp(e)}function Py(t){var e=t.toTimestamp();return new Qg(e.seconds,e.nanoseconds)}function Ly(t){var e=new Ld(t.seconds,t.nanoseconds);return Fd.fromTimestamp(e)}function Fy(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ag(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ag(t.Lt,e)}),o=Ld.fromMillis(e.localWriteTimeMs);return new Iy(e.batchId,o,n,i)}function My(t){var e,n,r=Ly(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ly(t.lastLimboFreeSnapshotVersion):Fd.min();return void 0!==t.query.documents?(xd(1===(n=t.query).documents.length),e=Yf(zf(Sg(n.documents[0])))):e=function(t){return Yf(Rg(t))}(t.query),new xy(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Gd.fromBase64String(t.resumeToken))}function Vy(t,e){var n,r=Py(e.snapshotVersion),i=Py(e.lastLimboFreeSnapshotVersion);n=Tf(e.target)?jg(t.Lt,e.target):Ng(t.Lt,e.target);var o=e.resumeToken.toBase64();return new iy(e.targetId,Sf(e.target),r,o,e.sequenceNumber,i,n)}function Uy(t){var e=Rg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Jf(e,e.limit,"L"):e}var qy=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return By(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Ly(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return By(t).put({bundleId:(n=e).id,createTime:Py(vg(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Hy(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Uy(e.bundledQuery),readTime:Ly(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Hy(t).put(function(t){return{name:t.name,readTime:Py(vg(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function By(t){return Ty(t,cy.store)}function Hy(t){return Ty(t,ly.store)}var zy=function(){function t(){this.Bt=new Wy}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),gy.resolve()},t.prototype.getCollectionParents=function(t,e){return gy.resolve(this.Bt.getEntries(e))},t}(),Wy=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Wp(Bd.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Wp(Bd.comparator)).toArray()},t}(),Gy=function(){function t(){this.qt=new Wy}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Wg(i)};return Ky(t).put(o)}return gy.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Pd(e),""],!1,!0);return Ky(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($g(o.parent))}return n})},t}();function Ky(t){return Ty(t,ay.store)}var $y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qy=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Zy(t,e,n){var r=t.store(Jg.store),i=t.store(Xg.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){xd(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Xg.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return gy.waitFor(o).next(function(){return c})}function Yy(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw kd();e=t.noDocument}return JSON.stringify(e).length}Qy.DEFAULT_COLLECTION_PERCENTILE=10,Qy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qy.DEFAULT=new Qy(41943040,Qy.DEFAULT_COLLECTION_PERCENTILE,Qy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qy.DISABLED=new Qy(-1,0,0);var Jy=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return xd(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tm(t).$t({index:Jg.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=em(t),s=tm(t);return s.add({}).next(function(a){xd("number"==typeof a);for(var u=new Iy(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return xg(t.Lt,e)}),i=n.mutations.map(function(e){return xg(t.Lt,e)});return new Jg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Wp(function(t,e){return Rd(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Xg.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Xg.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),gy.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return tm(t).get(e).next(function(t){return t?(xd(t.userId===n.userId),Fy(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?gy.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return tm(t).$t({index:Jg.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(xd(e.batchId>=r),o=Fy(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tm(t).$t({index:Jg.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tm(t).Nt(Jg.userMutationsIndex,n).next(function(t){return t.map(function(t){return Fy(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Xg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return em(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=$g(r[1]);if(a===n.userId&&e.path.isEqual(c))return tm(t).get(u).next(function(t){if(!t)throw kd();xd(t.userId===n.userId),o.push(Fy(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wp(Rd),i=[];return e.forEach(function(e){var o=Xg.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=em(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=$g(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),gy.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Xg.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Wp(Rd);return em(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=$g(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(tm(t).get(e).next(function(t){if(null===t)throw kd();xd(t.userId===n.userId),r.push(Fy(n.R,t))}))}),gy.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Zy(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),gy.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return gy.resolve();var r=IDBKeyRange.lowerBound(Xg.prefixForUser(e.userId)),i=[];return em(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=$g(t[1]);i.push(o)}else r.done()}).next(function(){xd(0===i.length)})})},t.prototype.containsKey=function(t,e){return Xy(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return nm(t).get(this.userId).next(function(t){return t||new Yg(e.userId,-1,"")})},t}();function Xy(t,e,n){var r=Xg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return em(t).$t({range:o,Ft:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function tm(t){return Ty(t,Jg.store)}function em(t){return Ty(t,Xg.store)}function nm(t){return Ty(t,Yg.store)}var rm=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),im=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new rm(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Fd.fromTimestamp(new Ld(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return om(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return xd(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return om(t).$t(function(s,a){var u=My(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return gy.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return om(t).$t(function(t,n){var r=My(n);e(r)})},t.prototype.Xt=function(t){return sm(t).get(sy.key).next(function(t){return xd(null!==t),t})},t.prototype.Zt=function(t,e){return sm(t).put(sy.key,e)},t.prototype.te=function(t,e){return om(t).put(Vy(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Sf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return om(t).$t({range:r,index:iy.queryTargetsIndexName},function(t,n,r){var o=My(n);Ef(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=am(t);return e.forEach(function(e){var s=Wg(e.path);i.push(o.put(new oy(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),gy.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=am(t);return gy.forEach(e,function(e){var o=Wg(e.path);return gy.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=am(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=am(t),i=tg();return r.$t({range:n,Ft:!0},function(t,e,n){var r=$g(t[1]),o=new rf(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Wg(e.path),r=IDBKeyRange.bound([n],[Pd(n)],!1,!0),i=0;return am(t).$t({index:oy.documentTargetsIndex,Ft:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return om(t).get(e).next(function(t){return t?My(t):null})},t}();function om(t){return Ty(t,iy.store)}function sm(t){return Ty(t,sy.store)}function am(t){return Ty(t,oy.store)}function um(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){if(t.code!==_d.FAILED_PRECONDITION||t.message!==dy)throw t;return Sd("LocalStore","Unexpectedly lost primary lease"),[2]})})}function cm(t,e){var n=t[1],r=e[1],i=Rd(t[0],e[0]);return 0===i?Rd(n,r):i}var lm=function(){function t(t){this.ne=t,this.buffer=new Wp(cm),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();cm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),hm=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Sd("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(ou.b)(e,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return _y(e=n.sent())?(Sd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,um(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),dm=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return gy.resolve(bd.o);var r=new lm(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Sd("LruGarbageCollector","Garbage collection skipped; disabled"),gy.resolve($y)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Sd("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),$y):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Sd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Od()<=hu.a.DEBUG&&Sd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),gy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),fm=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new dm(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return pm(t,n)},t.prototype.removeReference=function(t,e,n){return pm(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return pm(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return nm(t).Ot(function(r){return Xy(t,r,e).next(function(t){return t&&(n=!0),gy.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),am(t).delete([0,Wg(s.path)])})});i.push(u)}}).next(function(){return gy.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return pm(t,e)},t.prototype.we=function(t,e){var n,r=am(t),i=bd.o;return r.$t({index:oy.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==bd.o&&e(new rf($g(n)),i),i=s,n=o):i=bd.o}).next(function(){i!==bd.o&&e(new rf($g(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function pm(t,e){return am(t).put(function(t,e){return new oy(0,Wg(t.path),e)}(e,t.currentSequenceNumber))}var gm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Vd(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Ud(this.inner)},t}(),ym=function(){function t(){this.changes=new gm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Fd.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:wf.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?gy.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),mm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return _m(t).put(wm(e),n)},t.prototype.removeEntry=function(t,e){var n=_m(t),r=wm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return _m(t).get(wm(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return _m(t).get(wm(e)).next(function(t){return{document:n.ye(e,t),size:Yy(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=$p();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=$p(),i=new Bp(rf.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Yy(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return gy.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return _m(t).$t({range:r},function(t,e,r){for(var s=rf.fromSegments(t);o&&rf.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=$p(),o=e.path.length+1,s={};if(n.isEqual(Fd.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ry(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ny.collectionReadTimeIndex}return _m(t).$t(s,function(t,n,s){if(t.length===o){var a=jy(r.R,n);e.path.isPrefixOf(a.key.path)?np(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new vm(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return bm(t).get(ry.key).next(function(t){return xd(!!t),t})},t.prototype.me=function(t,e){return bm(t).put(ry.key,e)},t.prototype.ye=function(t,e){if(e){var n=jy(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Fd.min()))return n}return wf.newInvalidDocument(t)},t}(),vm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new gm(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(ou.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Wp(function(t,e){return Rd(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ny(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Yy(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Ny(e.Ie.R,wf.newNoDocument(o,Fd.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),gy.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(ym);function bm(t){return Ty(t,ry.store)}function _m(t){return Ty(t,ny.store)}function wm(t){return t.path.toArray()}var Cm=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;xd(n<r&&n>=0&&r<=11);var o=new yy("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Zg.store)}(t),function(t){t.createObjectStore(Yg.store,{keyPath:Yg.keyPath}),t.createObjectStore(Jg.store,{keyPath:Jg.keyPath,autoIncrement:!0}).createIndex(Jg.userMutationsIndex,Jg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Xg.store)}(t),Om(t),function(t){t.createObjectStore(ny.store)}(t));var s=gy.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(oy.store),t.deleteObjectStore(iy.store),t.deleteObjectStore(sy.store)}(t),Om(t)),s=s.next(function(){return function(t){var e=t.store(sy.store),n=new sy(0,0,Fd.min().toTimestamp(),0);return e.put(sy.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Jg.store).Nt().next(function(n){t.deleteObjectStore(Jg.store),t.createObjectStore(Jg.store,{keyPath:Jg.keyPath,autoIncrement:!0}).createIndex(Jg.userMutationsIndex,Jg.userMutationsKeyPath,{unique:!0});var r=e.store(Jg.store),i=n.map(function(t){return r.put(t)});return gy.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(uy.store,{keyPath:uy.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(ry.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ny.store);e.createIndex(ny.readTimeIndex,ny.readTimeIndexPath,{unique:!1}),e.createIndex(ny.collectionReadTimeIndex,ny.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(cy.store,{keyPath:cy.keyPath})}(t),function(t){t.createObjectStore(ly.store,{keyPath:ly.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(ny.store).$t(function(t,n){e+=Yy(n)}).next(function(){var n=new ry(e);return t.store(ry.store).put(ry.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Yg.store),r=t.store(Jg.store);return n.Nt().next(function(n){return gy.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Jg.userMutationsIndex,i).next(function(r){return gy.forEach(r,function(r){xd(r.userId===n.userId);var i=Fy(e.R,r);return Zy(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(oy.store),n=t.store(ny.store);return t.store(sy.store).get(sy.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new Bd(n),s=function(t){return[0,Wg(t)]}(o);r.push(e.get(s).next(function(n){return n?gy.resolve():function(n){return e.put(new oy(0,Wg(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return gy.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(ay.store,{keyPath:ay.keyPath});var n=e.store(ay.store),r=new Wy,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Wg(i)})}};return e.store(ny.store).$t({Ft:!0},function(t,e){var n=new Bd(t);return i(n.popLast())}).next(function(){return e.store(Xg.store).$t({Ft:!0},function(t,e){var n=$g(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(iy.store);return n.$t(function(t,r){var i=My(r),o=Vy(e.R,i);return n.put(o)})},t}();function Om(t){t.createObjectStore(oy.store,{keyPath:oy.keyPath}).createIndex(oy.documentTargetsIndex,oy.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(iy.store,{keyPath:iy.keyPath}).createIndex(iy.queryTargetsIndexName,iy.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(sy.store)}var Sm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Em=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new wd(_d.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fm(this,i),this.Le=n+"main",this.R=new Ay(u),this.Be=new my(this.Le,11,new Cm(this.R)),this.qe=new im(this.referenceDelegate,this.R),this.Ut=new Gy,this.Ue=function(t,e){return new mm(t,e)}(this.R,this.Ut),this.Ke=new qy,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Ed("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new wd(_d.FAILED_PRECONDITION,Sm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new bd(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(ou.b)(e,void 0,void 0,function(){return Object(ou.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(ou.b)(e,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(ou.b)(e,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Im(e).put(new uy(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(_y(e))return Sd("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Sd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Tm(t).get(Zg.key).next(function(t){return gy.resolve(e.tn(t))})},t.prototype.en=function(t){return Im(t).delete(this.clientId)},t.prototype.nn=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(ou.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ty(t,uy.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return gy.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?gy.resolve(!0):Tm(t).get(Zg.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new wd(_d.FAILED_PRECONDITION,Sm);return!1}}return!(!e.networkEnabled||!e.inForeground)||Im(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Sd("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(ou.b)(this,void 0,void 0,function(){var t=this;return Object(ou.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Zg.store,uy.store],function(e){var n=new Ey(e,bd.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Im(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Jy.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Sd("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",hy,function(o){return r=new Ey(o,i.Ne?i.Ne.next():bd.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Ed("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new wd(_d.FAILED_PRECONDITION,dy);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Tm(t).get(Zg.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new wd(_d.FAILED_PRECONDITION,Sm)})},t.prototype.Ze=function(t){var e=new Zg(this.clientId,this.allowTabSynchronization,Date.now());return Tm(t).put(Zg.key,e)},t.yt=function(){return my.yt()},t.prototype.Xe=function(t){var e=this,n=Tm(t);return n.get(Zg.key).next(function(t){return e.tn(t)?(Sd("IndexedDbPersistence","Releasing primary lease."),n.delete(Zg.key)):gy.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ed("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),Object(lu.z)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Sd("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ed("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ed("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Tm(t){return Ty(t,Zg.store)}function Im(t){return Ty(t,uy.store)}function km(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var xm=function(t,e){this.progress=t,this.wn=e},Am=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return rf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Qf(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new rf(e)).next(function(t){var e=Zp();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Zp();return this.Ut.getCollectionParents(t,i).next(function(s){return gy.forEach(s,function(s){var a=function(t,e){return new Bf(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=wf.newInvalidDocument(c),r=r.insert(c,l)),Tp(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){np(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=tg(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof jp&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),jm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=tg(),i=tg(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nm=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Fd.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Wf(e)||Gf(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Od()<=hu.a.DEBUG&&Sd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ep(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Wp(rp(t));return e.forEach(function(e,r){np(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Od()<=hu.a.DEBUG&&Sd("QueryEngine","Using full collection scan to execute query:",ep(e)),this.Sn.getDocumentsMatchingQuery(t,e,Fd.min())},t}(),Rm=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Bp(Rd),this.Fn=new gm(function(t){return Sf(t)},Ef),this.$n=Fd.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Am(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.kn)})},t}();function Dm(t,e,n,r){return new Rm(t,e,n,r)}function Pm(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ou.d)(this,function(s){switch(s.label){case 0:return n=Ad(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Am(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=tg(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Lm(t,e){var n=Ad(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=gy.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);xd(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Fm(t){var e=Ad(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Mm(t,e){var n=Ad(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return xd(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=$p();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Vm(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Fd.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return gy.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.kn=i,t})}function Vm(t,e,n,r,i){var o=tg();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=$p();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Fd.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Sd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Um(t,e){var n=Ad(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function qm(t,e){var n=Ad(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?gy.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new xy(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t})}function Bm(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:r=Ad(t),i=r.kn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!_y(s=a.sent()))throw s;return Sd("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(i.target),[2]}})})}function Hm(t,e,n){var r=Ad(t),i=Fd.min(),o=tg();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ad(t),i=r.Fn.get(n);return void 0!==i?gy.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Yf(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Fd.min(),n?o:tg())}).next(function(t){return{documents:t,Bn:o}})})}function zm(t,e){var n=Ad(t),r=Ad(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Wm(t){var e=Ad(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ad(t),i=$p(),o=Ry(n),s=_m(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:ny.readTimeIndex,range:a},function(t,e){var n=jy(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Dy(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function Gm(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){return[2,(e=Ad(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=_m(t),n=Fd.min();return e.$t({index:ny.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Dy(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Km(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(ou.d)(this,function(p){switch(p.label){case 0:for(i=Ad(t),o=tg(),s=$p(),a=Jp(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,qm(i,function(t){return Yf(zf(Bd.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Vm(t,d,s,Fd.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function $m(t,e,n){return void 0===n&&(n=tg()),Object(ou.b)(this,void 0,void 0,function(){var r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return[4,qm(t,Yf(Uy(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ad(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=vg(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Gd.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Qm=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return gy.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:vg(n.createTime)}),gy.resolve()},t.prototype.getNamedQuery=function(t,e){return gy.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Uy(t.bundledQuery),readTime:vg(t.readTime)}}(e)),gy.resolve()},t}(),Zm=function(){function t(){this.Wn=new Wp(Ym.Gn),this.zn=new Wp(Ym.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ym(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Ym(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new rf(new Bd([])),r=new Ym(n,t),i=new Ym(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new rf(new Bd([])),n=new Ym(e,t),r=new Ym(e,t+1),i=tg();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ym(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ym=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return rf.comparator(t.key,e.key)||Rd(t.ns,e.ns)},t.Hn=function(t,e){return Rd(t.ns,e.ns)||rf.comparator(t.key,e.key)},t}(),Jm=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Wp(Ym.Gn)}return t.prototype.checkEmpty=function(t){return gy.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Iy(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Ym(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return gy.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return gy.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return gy.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return gy.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return gy.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ym(e,0),i=new Ym(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),gy.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Wp(Rd);return e.forEach(function(t){var e=new Ym(t,0),i=new Ym(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),gy.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;rf.isDocumentKey(i)||(i=i.child(""));var o=new Ym(new rf(i),0),s=new Wp(Rd);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),gy.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;xd(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return gy.forEach(e.mutations,function(i){var o=new Ym(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ym(e,0),r=this.rs.firstAfterOrEqual(n);return gy.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return gy.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Xm=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Bp(rf.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return gy.resolve(n?n.document.clone():wf.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=$p();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():wf.newInvalidDocument(t))}),gy.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=$p(),i=new rf(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||np(e,u)&&(r=r.insert(u.key,u.clone()))}return gy.resolve(r)},t.prototype.fs=function(t,e){return gy.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new tv(this)},t.prototype.getSize=function(t){return gy.resolve(this.size)},t}(),tv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(ou.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),gy.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ym),ev=function(){function t(t){this.persistence=t,this.ds=new gm(function(t){return Sf(t)},Ef),this.lastRemoteSnapshotVersion=Fd.min(),this.highestTargetId=0,this.ws=0,this._s=new Zm,this.targetCount=0,this.ys=rm.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),gy.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return gy.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return gy.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),gy.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),gy.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new rm(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,gy.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),gy.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,gy.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),gy.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return gy.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return gy.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),gy.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),gy.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),gy.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return gy.resolve(n)},t.prototype.containsKey=function(t,e){return gy.resolve(this._s.containsKey(e))},t}(),nv=function(){function t(t,e){var n=this;this.gs={},this.Ne=new bd(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ev(this),this.Ut=new zy,this.Ue=function(t,e){return new Xm(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Ay(e),this.Ke=new Qm(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Jm(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Sd("MemoryPersistence","Starting transaction:",t);var i=new rv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return gy.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),rv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(ou.c)(e,t),e}(fy),iv=function(){function t(t){this.persistence=t,this.As=new Zm,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw kd()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),gy.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),gy.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),gy.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gy.forEach(this.vs,function(r){var i=rf.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return gy.or([function(){return gy.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),ov=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function sv(t,e){return"firestore_clients_"+t+"_"+e}function av(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function uv(t,e){return"firestore_targets_"+t+"_"+e}ov.UNAUTHENTICATED=new ov(null),ov.GOOGLE_CREDENTIALS=new ov("google-credentials-uid"),ov.FIRST_PARTY=new ov("first-party-uid"),ov.MOCK_USER=new ov("mock-user");var cv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new wd(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ed("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wd(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ed("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),hv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ng(),s=0;i&&s<r.activeTargetIds.length;++s)i=nf(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ed("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),dv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ed("SharedClientState","Failed to parse online state: "+e),null)},t}(),fv=function(){function t(){this.activeTargetIds=ng()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),pv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Bp(Rd),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=sv(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new fv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ou.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(sv(this.persistenceKey,r)))&&(o=hv.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.ks(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(uv(this.persistenceKey,t));if(n){var r=lv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(uv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Sd("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Sd("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Sd("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Sd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ed("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(ou.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(ou.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=bd.o;if(null!=t)try{var n=JSON.parse(t);xd("number"==typeof n),e=n}catch(t){Ed("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==bd.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new cv(this.currentUser,t,e,n),i=av(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=av(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=uv(this.persistenceKey,t),i=new lv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return hv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return cv.Vs(new ov(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return lv.Vs(r,e)},t.prototype.js=function(t){return dv.Vs(t)},t.prototype.ii=function(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Sd("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.Fs=r})},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ng();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),gv=function(){function t(){this.li=new fv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new fv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),yv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),mv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Sd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Sd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},bv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),_v=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(ou.c)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise(function(i,o){var s=new vd;s.listenOnce(pd.COMPLETE,function(){try{switch(s.getLastErrorCode()){case fd.NO_ERROR:var e=s.getResponseJson();Sd("Connection","XHR received:",JSON.stringify(e)),i(e);break;case fd.TIMEOUT:Sd("Connection",'RPC "'+t+'" timed out'),o(new wd(_d.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:var n=s.getStatus();if(Sd("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(_d).indexOf(e)>=0?e:_d.UNKNOWN}(r.status);o(new wd(a,r.message))}else o(new wd(_d.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new wd(_d.UNAVAILABLE,"Connection failed."));break;default:kd()}}finally{Sd("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ud,i=nl(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new yd({})),this.ki(o.initMessageHeaders,e),Object(lu.v)()||Object(lu.y)()||Object(lu.s)()||Object(lu.u)()||Object(lu.A)()||Object(lu.r)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Sd("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new bv({Ei:function(t){c?Sd("Connection","Not sending because WebChannel is closed:",t):(u||(Sd("Connection","Opening WebChannel transport."),a.open(),u=!0),Sd("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,md.EventType.OPEN,function(){c||Sd("Connection","WebChannel transport opened.")}),h(a,md.EventType.CLOSE,function(){c||(c=!0,Sd("Connection","WebChannel transport closed"),l.Vi())}),h(a,md.EventType.ERROR,function(t){c||(c=!0,Td("Connection","WebChannel transport errored:",t),l.Vi(new wd(_d.UNAVAILABLE,"The operation could not be completed")))}),h(a,md.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];xd(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Sd("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Pp[t];if(void 0!==e)return qp(e)}(i),s=r.message;void 0===o&&(o=_d.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new wd(o,s)),a.close()}else Sd("Connection","WebChannel received:",n),l.Si(n)}}),h(i,gd.STAT_EVENT,function(t){10===t.stat?Sd("Connection","Detected buffering proxy"):11===t.stat&&Sd("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Sd("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then(function(t){return Sd("RestConnection","Received: ",t),t},function(e){throw Td("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+vv[t]},t}());function wv(){return"undefined"!=typeof window?window:null}function Cv(){return"undefined"!=typeof document?document:null}function Ov(t){return new pg(t,!0)}var Sv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Sd("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ev=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Sv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===_d.RESOURCE_EXHAUSTED?(Ed(e.toString()),Ed("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===_d.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new wd(_d.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(ou.b)(t,void 0,void 0,function(){return Object(ou.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Sd("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Sd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Tv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(ou.c)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:kd()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(xd(void 0===e||"string"==typeof e),Gd.fromBase64String(e||"")):(xd(void 0===e||e instanceof Uint8Array),Gd.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?_d.UNKNOWN:qp(t.code);return new wd(e,t.message||"")}(a);n=new ag(r,i,o,s||null)}else if("documentChange"in e){i=Cg(t,(r=e.documentChange).document.name),o=vg(r.document.updateTime);var a=new bf({mapValue:{fields:r.document.fields}}),u=(s=wf.newFoundDocument(i,o,a),r.targetIds||[]);n=new og(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Cg(t,(r=e.documentDelete).document),o=r.readTime?vg(r.readTime):Fd.min(),a=wf.newNoDocument(i,o),n=new og([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Cg(t,(r=e.documentRemove).document),n=new og([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return kd();var c=e.filter;i=new Vp(r=c.count||0),n=new sg(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Fd.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Fd.min():e.readTime?vg(e.readTime):Fd.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Eg(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Tf(r)?{documents:jg(t,r)}:{query:Ng(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=yg(t,e.resumeToken):e.snapshotVersion.compareTo(Fd.min())>0&&(n.readTime=gg(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return kd()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Eg(this.R),e.removeTarget=t,this.cr(e)},e}(Ev),Iv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(ou.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(xd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(xd(void 0!==e),t.map(function(t){return function(t,e){var n=vg(t.updateTime?t.updateTime:e);return n.isEqual(Fd.min())&&(n=vg(e)),new wp(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=vg(t.commitTime);return this.listener.Tr(n,e)}return xd(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Eg(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return xg(e.R,t)})};this.cr(n)},e}(Ev),kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(ou.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new wd(_d.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===_d.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new wd(_d.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===_d.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new wd(_d.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),xv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ed(e),this.Vr=!1):Sd("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Av=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(ou.b)(o,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return Vv(this)?(Sd("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return(e=Ad(t)).Or.add(4),[4,Nv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,jv(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new xv(n,r)};function jv(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:if(!Vv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Nv(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Rv(t,e){var n=Ad(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Mv(n)?Fv(n):tb(n).er()&&Pv(n,e))}function Dv(t,e){var n=Ad(t),r=tb(n);n.$r.delete(e),r.er()&&Lv(n,e),0===n.$r.size&&(r.er()?r.ir():Vv(n)&&n.Br.set("Unknown"))}function Pv(t,e){t.qr.U(e.targetId),tb(t).mr(e)}function Lv(t,e){t.qr.U(e),tb(t).yr(e)}function Fv(t){t.qr=new cg({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),tb(t).start(),t.Br.Sr()}function Mv(t){return Vv(t)&&!tb(t).tr()&&t.$r.size>0}function Vv(t){return 0===Ad(t).Or.size}function Uv(t){t.qr=void 0}function qv(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){return t.$r.forEach(function(e,n){Pv(t,e)}),[2]})})}function Bv(t,e){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(n){return Uv(t),Mv(t)?(t.Br.Nr(e),Fv(t)):t.Br.set("Unknown"),[2]})})}function Hv(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o;return Object(ou.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof ag&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(ou.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Sd("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zv(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof og?t.qr.X(e):e instanceof sg?t.qr.rt(e):t.qr.et(e),n.isEqual(Fd.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Fm(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Gd.EMPTY_BYTE_STRING,n.snapshotVersion)),Lv(t,e);var r=new xy(n.target,e,1,n.sequenceNumber);Pv(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Sd("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,zv(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function zv(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r=this;return Object(ou.d)(this,function(i){switch(i.label){case 0:if(!_y(e))throw e;return t.Or.add(1),[4,Nv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Fm(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(ou.b)(r,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return Sd("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,jv(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Wv(t,e){return e().catch(function(n){return zv(t,n,e)})}function Gv(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(ou.d)(this,function(s){switch(s.label){case 0:e=Ad(t),n=eb(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Vv(t)&&t.Fr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Um(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.Fr.push(e);var n=eb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,zv(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Kv(e)&&$v(e),[2]}})})}function Kv(t){return Vv(t)&&!eb(t).tr()&&t.Fr.length>0}function $v(t){eb(t).start()}function Qv(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){return eb(t).Ar(),[2]})})}function Zv(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n,r;return Object(ou.d)(this,function(i){for(e=eb(t),n=0,r=t.Fr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Yv(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return r=t.Fr.shift(),i=ky.from(r,e,n),[4,Wv(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Gv(t)];case 2:return o.sent(),[2]}})})}function Jv(t,e){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(n){switch(n.label){case 0:return e&&eb(t).pr?[4,function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:return Up(r=e.code)&&r!==_d.ABORTED?(n=t.Fr.shift(),eb(t).sr(),[4,Wv(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Gv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Kv(t)&&$v(t),[2]}})})}function Xv(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n;return Object(ou.d)(this,function(r){switch(r.label){case 0:return n=Ad(t),e?(n.Or.delete(2),[4,jv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Nv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function tb(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ad(t);return r.br(),new Tv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:qv.bind(null,t),Ri:Bv.bind(null,t),_r:Hv.bind(null,t)}),t.Mr.push(function(n){return Object(ou.b)(e,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Mv(t)?Fv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Uv(t),e.label=3;case 3:return[2]}})})})),t.Ur}function eb(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Ad(t);return r.br(),new Iv(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Qv.bind(null,t),Ri:Jv.bind(null,t),Ir:Zv.bind(null,t),Tr:Yv.bind(null,t)}),t.Mr.push(function(n){return Object(ou.b)(e,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Gv(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Sd("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var nb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new py,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wd(_d.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function rb(t,e){if(Ed("AsyncQueue",e+": "+t),_y(t))return new wd(_d.UNAVAILABLE,e+": "+t);throw t}var ib=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||rf.comparator(e.key,n.key)}:function(t,e){return rf.comparator(t.key,e.key)},this.keyedMap=Zp(),this.sortedSet=new Bp(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),ob=function(){function t(){this.Qr=new Bp(rf.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):kd():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),sb=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,ib.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Xf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ab=function(){this.Wr=void 0,this.listeners=[]},ub=function(){this.queries=new gm(function(t){return tp(t)},Xf),this.onlineState="Unknown",this.Gr=new Set};function cb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ou.d)(this,function(c){switch(c.label){case 0:if(n=Ad(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ab),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=rb(a,"Initialization of query '"+ep(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&fb(n),[2]}})})}function lb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ou.d)(this,function(a){return n=Ad(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function hb(t,e){for(var n=Ad(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&fb(n)}function db(t,e,n){var r=Ad(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function fb(t){t.Gr.forEach(function(t){t.next()})}var pb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=sb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),gb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),yb=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Cg(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?kg(this.R,t.document,!1):wf.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return vg(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new yb(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||tg()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return[4,Km(this.localStore,new yb(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,$m(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new xm(Object.assign({},this.progress),t))]}})})}}();var mb=function(t){this.key=t},vb=function(t){this.key=t},bb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=tg(),this.mutatedKeys=tg(),this.lo=rp(t),this.fo=new ib(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new ob,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Wf(this.query)&&i.size===this.query.limit?i.last():null,c=Gf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=np(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Wf(this.query)||Gf(this.query))for(;s.size>this.query.limit;){var l=Wf(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kd()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new sb(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new ob,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=tg(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new vb(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new mb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=tg();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return sb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),_b=function(t,e,n){this.query=t,this.targetId=e,this.view=n},wb=function(t){this.key=t,this.bo=!1},Cb=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new gm(function(t){return tp(t)},Xf),this.Vo=new Map,this.So=new Set,this.Do=new Bp(rf.comparator),this.Co=new Map,this.No=new Zm,this.xo={},this.ko=new Map,this.Fo=rm.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ob(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:return n=Jb(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,qm(n.localStore,Yf(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Sb(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Rv(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Sb(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(ou.d)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Hm(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Fb(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Hm(t.localStore,e,!0)];case 1:return i=l.sent(),o=new bb(e,i.Bn),s=o._o(i.documents),a=ig.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Fb(t,n,u.To),c=new _b(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Eb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return n=Ad(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Xf(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Bm(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Dv(n.remoteStore,r.targetId),Pb(n,r.targetId)}).catch(um)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Pb(n,r.targetId),[4,Bm(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Tb(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:r=Xb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ad(t),i=Ld.now(),o=e.reduce(function(t,e){return t.add(e.key)},tg());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ip(c,n.get(c.key));null!=l&&s.push(new jp(c.key,l,_f(l.value.mapValue),Cp.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Bp(Rd)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ub(r,i.changes)];case 3:return a.sent(),[4,Gv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=rb(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Ib(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:n=Ad(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Mm(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(xd(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?xd(r.bo):t.removedDocuments.size>0&&(xd(r.bo),r.bo=!1))}),[4,Ub(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,um(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function kb(t,e,n){var r=Ad(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ad(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&fb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xb(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(ou.d)(this,function(c){switch(c.label){case 0:return(r=Ad(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Bp(rf.comparator)).insert(o,wf.newNoDocument(o,Fd.min())),a=tg().add(o),u=new rg(Fd.min(),new Map,new Wp(Rd),s,a),[4,Ib(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Vb(r),[3,4];case 2:return[4,Bm(r.localStore,e,!1).then(function(){return Pb(r,e,n)}).catch(um)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Ab(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:n=Ad(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Lm(n.localStore,e)];case 2:return i=o.sent(),Db(n,r,null),Rb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ub(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,um(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function jb(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:r=Ad(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ad(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return xd(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Db(r,e,n),Rb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ub(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,um(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Nb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:Vv((n=Ad(t)).remoteStore)||Sd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ad(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.ko.get(r)||[]).push(e),n.ko.set(r,i),[3,4]);case 3:return o=a.sent(),s=rb(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Rb(t,e){(t.ko.get(e)||[]).forEach(function(t){t.resolve()}),t.ko.delete(e)}function Db(t,e,n){var r=Ad(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Pb(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Lb(t,e)})}function Lb(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Dv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Vb(t))}function Fb(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof mb?(t.No.addReference(o.key,e),Mb(t,o)):o instanceof vb?(Sd("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Lb(t,o.key)):kd()}}function Mb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Sd("SyncEngine","New document in limbo: "+n),t.So.add(r),Vb(t))}function Vb(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new rf(Bd.fromString(e)),r=t.Fo.next();t.Co.set(r,new wb(n)),t.Do=t.Do.insert(n,r),Rv(t.remoteStore,new xy(Yf(zf(n.path)),r,2,bd.o))}}function Ub(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:return r=Ad(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=jm.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(ou.d)(this,function(l){switch(l.label){case 0:n=Ad(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return gy.forEach(e,function(e){return gy.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return gy.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!_y(r=l.sent()))throw r;return Sd("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.kn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.kn=n.kn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function qb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:return(n=Ad(t)).currentUser.isEqual(e)?[3,3]:(Sd("SyncEngine","User change. New user:",e.toKey()),[4,Pm(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach(function(t){t.forEach(function(t){t.reject(new wd(_d.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ub(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Bb(t,e){var n=Ad(t),r=n.Co.get(e);if(r&&r.bo)return tg().add(r.key);var i=tg(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Hb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return[4,Hm((n=Ad(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Fb(n,e.targetId,i.To),i)]}})})}function zb(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){return[2,Wm((e=Ad(t)).localStore).then(function(t){return Ub(e,t)})]})})}function Wb(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o;return Object(ou.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ad(t),r=Ad(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):gy.resolve(null)})})}((i=Ad(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Gv(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Db(i,e,r||null),Rb(i,e),function(t,e){Ad(Ad(t)._n).Gt(e)}(i.localStore,e)):kd(),s.label=4;case 4:return[4,Ub(i,o)];case 5:return s.sent(),[3,7];case 6:Sd("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Gb(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(ou.d)(this,function(c){switch(c.label){case 0:return Jb(n=Ad(t)),Xb(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Kb(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Xv(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Rv(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Pb(n,e),Bm(n.localStore,e,!0)}),Dv(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Kb(n,a)];case 5:return c.sent(),function(t){var e=Ad(t);e.Co.forEach(function(t,n){Dv(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Bp(rf.comparator)}(n),n.$o=!1,[4,Xv(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Kb(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(ou.d)(this,function(g){switch(g.label){case 0:n=Ad(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,qm(n.localStore,Yf(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Hb(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,zm(n.localStore,a)];case 8:return p=g.sent(),[4,qm(n.localStore,p)];case 9:return u=g.sent(),[4,Sb(n,$b(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function $b(t){return Hf(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Qb(t){var e=Ad(t);return Ad(Ad(e.localStore).persistence).fn()}function Zb(t,e,n,r){return Object(ou.b)(this,void 0,void 0,function(){var i,o,s;return Object(ou.d)(this,function(a){switch(a.label){case 0:return(i=Ad(t)).$o?(Sd("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Wm(i.localStore)];case 3:return o=a.sent(),s=rg.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ub(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Bm(i.localStore,e,!0)];case 6:return a.sent(),Pb(i,e,r),[3,8];case 7:kd(),a.label=8;case 8:return[2]}})})}function Yb(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(ou.d)(this,function(d){switch(d.label){case 0:if(!(r=Jb(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Sd("SyncEngine","Adding an already active target "+s),[3,5]):[4,zm(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,qm(r.localStore,a)];case 3:return u=d.sent(),[4,Sb(r,$b(a),u.targetId,!1)];case 4:d.sent(),Rv(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ou.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Bm(r.localStore,t,!1).then(function(){Dv(r.remoteStore,t),Pb(r,t)}).catch(um)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Jb(t){var e=Ad(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ib.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xb.bind(null,e),e.vo._r=hb.bind(null,e.eventManager),e.vo.Mo=db.bind(null,e.eventManager),e}function Xb(t){var e=Ad(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ab.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jb.bind(null,e),e}var t_=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return this.R=Ov(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Dm(this.persistence,new Nm,t.initialUser,this.R)},t.prototype.qo=function(t){return new nv(iv.bs,this.R)},t.prototype.Bo=function(t){return new gv},t.prototype.terminate=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),e_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ou.c)(e,t),e.prototype.initialize=function(e){return Object(ou.b)(this,void 0,void 0,function(){var n=this;return Object(ou.d)(this,function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Gm(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,Xb(this.Qo.syncEngine)];case 4:return r.sent(),[4,Gv(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He(function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()})];case 6:return r.sent(),[2]}})})},e.prototype.Ko=function(t){return Dm(this.persistence,new Nm,t.initialUser,this.R)},e.prototype.Uo=function(t){return new hm(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=km(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qy.withCacheSize(this.cacheSizeBytes):Qy.DEFAULT;return new Em(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,wv(),Cv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new gv},e}(t_),n_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ou.c)(e,t),e.prototype.initialize=function(e){return Object(ou.b)(this,void 0,void 0,function(){var n,r=this;return Object(ou.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof pv?(this.sharedClientState.syncEngine={ui:Wb.bind(null,n),ai:Zb.bind(null,n),hi:Yb.bind(null,n),fn:Qb.bind(null,n),ci:zb.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(ou.b)(r,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return[4,Gb(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=wv();if(!pv.yt(e))throw new wd(_d.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=km(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new pv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(e_),r_=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n=this;return Object(ou.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return kb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=qb.bind(null,this.syncEngine),[4,Xv(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new ub},t.prototype.createDatastore=function(t){var e=Ov(t.databaseInfo.databaseId),n=new _v(t.databaseInfo);return function(t,e,n){return new kv(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return kb(s.syncEngine,t,0)},o=mv.yt()?new mv:new yv,new Av(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Cb(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return e=Ad(t),Sd("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Nv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),i_=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),o_=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new py,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new gb(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n=this;return Object(ou.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new wd(_d.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(ou.d)(this,function(u){switch(u.label){case 0:return n=Ad(t),r=Eg(n.R)+"/documents",i={documents:e.map(function(t){return wg(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){xd(!!e.found);var n=Cg(t,e.found.name),r=vg(e.found.updateTime),i=new bf({mapValue:{fields:e.found.fields}});return wf.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){xd(!!e.missing),xd(!!e.readTime);var n=Cg(t,e.missing),r=vg(e.readTime);return wf.newNoDocument(n,r)}(t,e):kd()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());xd(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Fp(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e=this;return Object(ou.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=rf.fromPath(n);e.mutations.push(new Mp(r,e.precondition(r)))}),[4,function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return n=Ad(t),r=Eg(n.R)+"/documents",i={writes:e.map(function(t){return xg(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw kd();e=Fd.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new wd(_d.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Cp.updateTime(e):Cp.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Fd.min()))throw new wd(_d.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cp.updateTime(e)}return Cp.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),s_=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Sv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(ou.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(ou.d)(this,function(r){return t=new o_(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!tf(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Up(e)}return!1},t}(),a_=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=ov.UNAUTHENTICATED,this.clientId=Nd.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return Object(ou.b)(r,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return Sd("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new wd(_d.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new py;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ou.b)(t,void 0,void 0,function(){var t,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=rb(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function u_(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(ou.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Sd("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return Object(ou.b)(i,void 0,void 0,function(){return Object(ou.d)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Pm(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function c_(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,l_(t)];case 1:return n=i.sent(),Sd("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return Object(ou.b)(this,void 0,void 0,function(){var n,r;return Object(ou.d)(this,function(i){switch(i.label){case 0:return(n=Ad(t)).asyncQueue.verifyOperationInProgress(),Sd("RemoteStore","RemoteStore received new credentials"),r=Vv(n),n.Or.add(3),[4,Nv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,jv(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function l_(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Sd("FirestoreClient","Using default OfflineComponentProvider"),[4,u_(t,new t_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function h_(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Sd("FirestoreClient","Using default OnlineComponentProvider"),[4,c_(t,new r_)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function d_(t){return l_(t).then(function(t){return t.persistence})}function f_(t){return l_(t).then(function(t){return t.localStore})}function p_(t){return h_(t).then(function(t){return t.remoteStore})}function g_(t){return h_(t).then(function(t){return t.syncEngine})}function y_(t){return Object(ou.b)(this,void 0,void 0,function(){var e,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:return[4,h_(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ob.bind(null,e.syncEngine),n.onUnlisten=Eb.bind(null,e.syncEngine),n)]}})})}function m_(t,e,n){var r=this;void 0===n&&(n={});var i=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(r,void 0,void 0,function(){var r;return Object(ou.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new i_({next:function(o){e.enqueueAndForget(function(){return lb(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new wd(_d.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new wd(_d.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new pb(zf(n.path),o,{includeMetadataChanges:!0,so:!0});return cb(t,s)},[4,y_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function v_(t,e,n){var r=this;void 0===n&&(n={});var i=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(r,void 0,void 0,function(){var r;return Object(ou.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new i_({next:function(n){e.enqueueAndForget(function(){return lb(t,s)}),n.fromCache&&"server"===r.source?i.reject(new wd(_d.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new pb(n,o,{includeMetadataChanges:!0,so:!0});return cb(t,s)},[4,y_(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var b_=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},__=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),w_=new Map,C_=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},O_=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(ov.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),S_=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),E_=function(){function t(t){var e=this;this.currentUser=ov.UNAUTHENTICATED,this.oc=new py,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Sd("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Sd("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Sd("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(xd("string"==typeof n.accessToken),new C_(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Object(ou.b)(n,void 0,void 0,function(){return Object(ou.d)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return xd(null===t||"string"==typeof t),new ov(t)},t}(),T_=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=ov.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),I_=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new T_(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(ov.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function k_(t,e,n){if(!n)throw new wd(_d.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function x_(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new wd(_d.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function A_(t,e,n,r){if(!0===e&&!0===r)throw new wd(_d.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function j_(t){if(!rf.isDocumentKey(t))throw new wd(_d.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function N_(t){if(rf.isDocumentKey(t))throw new wd(_d.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function R_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":kd()}function D_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new wd(_d.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=R_(t);throw new wd(_d.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function P_(t,e){if(e<=0)throw new wd(_d.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var L_=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new wd(_d.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wd(_d.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,A_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),F_=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L_({}),this._settingsFrozen=!1,t instanceof __?(this._databaseId=t,this._credentials=new O_):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new wd(_d.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new __(t.options.projectId)}(t),this._credentials=new E_(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new wd(_d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new wd(_d.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L_(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new O_;switch(t.type){case"gapi":var e=t.client;return xd(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new I_(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new wd(_d.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=w_.get(this))&&(Sd("ComponentProvider","Removing Datastore"),w_.delete(this),t.terminate()),Promise.resolve();var t},t}(),M_=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new U_(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),V_=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),U_=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,zf(r))||this)._path=r,i.type="collection",i}return Object(ou.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new M_(this.firestore,null,new rf(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(V_);function q_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(lu.n)(t),k_("collection","path",e),t instanceof F_)return N_(n=Bd.fromString.apply(Bd,Object(ou.f)([e],r))),new U_(t,null,n);if(!(t instanceof M_||t instanceof U_))throw new wd(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return N_(n=Bd.fromString.apply(Bd,Object(ou.f)([t.path],r)).child(Bd.fromString(e))),new U_(t.firestore,null,n)}function B_(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(lu.n)(t),1===arguments.length&&(e=Nd.u()),k_("doc","path",e),t instanceof F_)return j_(n=Bd.fromString.apply(Bd,Object(ou.f)([e],r))),new M_(t,null,new rf(n));if(!(t instanceof M_||t instanceof U_))throw new wd(_d.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return j_(n=t._path.child(Bd.fromString.apply(Bd,Object(ou.f)([e],r)))),new M_(t.firestore,t instanceof U_?t.converter:null,new rf(n))}function H_(t,e){return t=Object(lu.n)(t),e=Object(lu.n)(e),(t instanceof M_||t instanceof U_)&&(e instanceof M_||e instanceof U_)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function z_(t,e){return t=Object(lu.n)(t),e=Object(lu.n)(e),t instanceof V_&&e instanceof V_&&t.firestore===e.firestore&&Xf(t._query,e._query)&&t.converter===e.converter}var W_=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Sv(this,"async_queue_retry"),this.Ic=function(){var e=Cv();e&&Sd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Cv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Cv();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new py;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},t.prototype.bc=function(){return Object(ou.b)(this,void 0,void 0,function(){var t,e=this;return Object(ou.d)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!_y(t=n.sent()))throw t;return Sd("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.bc()}),n.label=5;case 5:return[2]}})})},t.prototype.Rc=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,Ed("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=nb.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&kd()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(ou.b)(this,void 0,void 0,function(){var t;return Object(ou.d)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()})},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function G_(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new py,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var K_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new W_,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(ou.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Q_(this),this._firestoreClient.terminate()},e}(F_);function $_(t){return t._firestoreClient||Q_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Q_(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new b_(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new a_(t._credentials,t._queue,r)}function Z_(t,e,n){var r=this,i=new py;return t.asyncQueue.enqueue(function(){return Object(ou.b)(r,void 0,void 0,function(){var r;return Object(ou.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,u_(t,n)];case 1:return o.sent(),[4,c_(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===_d.FAILED_PRECONDITION||t.code===_d.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Y_(t){if(t._initialized||t._terminated)throw new wd(_d.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var J_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new wd(_d.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zd(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),X_=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Gd.fromBase64String(e))}catch(e){throw new wd(_d.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Gd.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),tw=function(t){this._methodName=t},ew=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new wd(_d.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new wd(_d.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Rd(this._lat,t._lat)||Rd(this._long,t._long)},t}(),nw=/^__.*__$/,rw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new jp(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ap(t,this.data,e,this.fieldTransforms)},t}(),iw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new jp(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function ow(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kd()}}var sw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Tw(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(ow(this.Nc)&&nw.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),aw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ov(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new sw({Nc:t,methodName:e,qc:n,path:zd.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function uw(t){var e=t._freezeSettings(),n=Ov(t._databaseId);return new aw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Cw("Data must be an object, but it was:",s,r);var a,u,c=_w(r,s);if(o.merge)a=new Wd(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Ow(e,d[h],n);if(!s.contains(f))throw new wd(_d.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Iw(l,f)||l.push(f)}a=new Wd(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new rw(new bf(c),a,u)}var lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(tw);function hw(t,e,n){return new sw({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype._toFieldTransform=function(t){return new _p(t.path,new dp)},e.prototype.isEqual=function(t){return t instanceof e},e}(tw),fw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(ou.c)(e,t),e.prototype._toFieldTransform=function(t){var e=hw(this,t,!0),n=this.Kc.map(function(t){return bw(t,e)}),r=new fp(n);return new _p(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tw),pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(ou.c)(e,t),e.prototype._toFieldTransform=function(t){var e=hw(this,t,!0),n=this.Kc.map(function(t){return bw(t,e)}),r=new gp(n);return new _p(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tw),gw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(ou.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new mp(t.R,ap(t.R,this.Qc));return new _p(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(tw);function yw(t,e,n,r){var i=t.Uc(1,e,n);Cw("Data must be an object, but it was:",i,r);var o=[],s=bf.empty();Vd(r,function(t,r){var a=Ew(e,t,n);r=Object(lu.n)(r);var u=i.Oc(a);if(r instanceof lw)o.push(a);else{var c=bw(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Wd(o);return new iw(s,a,i.fieldTransforms)}function mw(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[Ow(e,r,n)],u=[i];if(o.length%2!=0)throw new wd(_d.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ow(e,o[c])),u.push(o[c+1]);for(var l=[],h=bf.empty(),d=a.length-1;d>=0;--d)if(!Iw(l,a[d])){var f=a[d],p=u[d];p=Object(lu.n)(p);var g=s.Oc(f);if(p instanceof lw)l.push(f);else{var y=bw(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new Wd(l);return new iw(h,m,s.fieldTransforms)}function vw(t,e,n,r){return void 0===r&&(r=!1),bw(n,t.Uc(r?4:3,e))}function bw(t,e){if(ww(t=Object(lu.n)(t)))return Cw("Unsupported field value:",e,t),_w(t,e);if(t instanceof tw)return function(t,e){if(!ow(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=bw(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(lu.n)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ap(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ld.fromDate(t);return{timestampValue:gg(e.R,n)}}if(t instanceof Ld)return n=new Ld(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:gg(e.R,n)};if(t instanceof ew)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof X_)return{bytesValue:yg(e.R,t._byteString)};if(t instanceof M_){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:bg(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+R_(t))}(t,e)}function _w(t,e){var n={};return Ud(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vd(t,function(t,r){var i=bw(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function ww(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ld||t instanceof ew||t instanceof X_||t instanceof M_||t instanceof tw)}function Cw(t,e,n){if(!ww(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=R_(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Ow(t,e,n){if((e=Object(lu.n)(e))instanceof J_)return e._internalPath;if("string"==typeof e)return Ew(t,e);throw Tw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Sw=new RegExp("[~\\*/\\[\\]]");function Ew(t,e,n){if(e.search(Sw)>=0)throw Tw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(J_.bind.apply(J_,Object(ou.f)([void 0],e.split(".")))))._internalPath}catch(TC){throw Tw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Tw(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new wd(_d.INVALID_ARGUMENT,(a+=". ")+t+u)}function Iw(t,e){return t.some(function(t){return t.isEqual(e)})}var kw=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new M_(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Aw("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(kw);function Aw(t,e){return"string"==typeof e?Ew(t,e):e instanceof J_?e._internalPath:e._delegate._internalPath}var jw=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Nw=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(ou.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Rw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Aw("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(kw),Rw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Nw),Dw=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new jw(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Rw(n._firestore,n._userDataWriter,r.key,r,new jw(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new wd(_d.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Rw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Rw(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jw(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Pw(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Pw(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kd()}}function Lw(t,e){return t instanceof Nw&&e instanceof Nw?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Dw&&e instanceof Dw&&t._firestore===e._firestore&&z_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Fw(t){if(Gf(t)&&0===t.explicitOrderBy.length)throw new wd(_d.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mw=function(){};function Vw(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Uw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(ou.c)(e,t),e.prototype._apply=function(t){var e=uw(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new wd(_d.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Kw(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Gw(r,t,l[c]));a={arrayValue:{values:u}}}else a=Gw(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kw(s,o),a=vw(n,"where",s,"in"===o||"not-in"===o);var h=If.create(i,o,a);return function(t,e){if(e.g()){var n=$f(t);if(null!==n&&!n.isEqual(e.field))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Kf(t);null!==r&&$w(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new wd(_d.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new V_(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Mw),qw=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(ou.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new wd(_d.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new wd(_d.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Mf(e,n);return function(t,e){if(null===Kf(t)){var n=$f(t);null!==n&&$w(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new V_(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Bf(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Mw),Bw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(ou.c)(e,t),e.prototype._apply=function(t){return new V_(t.firestore,t.converter,Jf(t._query,this.Hc,this.Jc))},e}(Mw),Hw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(ou.c)(e,t),e.prototype._apply=function(t){var e=Ww(t,this.type,this.Yc,this.Xc);return new V_(t.firestore,t.converter,function(t,e){return new Bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Mw),zw=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(ou.c)(e,t),e.prototype._apply=function(t){var e=Ww(t,this.type,this.Yc,this.Xc);return new V_(t.firestore,t.converter,function(t,e){return new Bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Mw);function Ww(t,e,n,r){if(n[0]=Object(lu.n)(n[0]),n[0]instanceof kw)return function(t,e,n,r,i){if(!r)throw new wd(_d.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Zf(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(df(e,r.key));else{var c=r.data.field(u.field);if(Yd(c))throw new wd(_d.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new wd(_d.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Lf(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=uw(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new wd(_d.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new wd(_d.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Qf(t)&&-1!==c.indexOf("/"))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Bd.fromString(c));if(!rf.isDocumentKey(l))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new rf(l);a.push(df(e,h))}else{var d=vw(n,r,c);a.push(d)}}return new Lf(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Gw(t,e,n){if("string"==typeof(n=Object(lu.n)(n))){if(""===n)throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qf(e)&&-1!==n.indexOf("/"))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Bd.fromString(n));if(!rf.isDocumentKey(r))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return df(t,new rf(r))}if(n instanceof M_)return df(t,n._key);throw new wd(_d.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+R_(n)+".")}function Kw(t,e){if(!Array.isArray(t)||0===t.length)throw new wd(_d.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new wd(_d.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function $w(t,e,n){if(!n.isEqual(e))throw new wd(_d.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Qw=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),of(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qd(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw kd()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Vd(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new ew(Qd(t.latitude),Qd(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Jd(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Xd(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$d(t);return new Ld(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Bd.fromString(t);xd(zg(n));var r=new __(n.get(1),n.get(3)),i=new rf(n.popFirst(5));return r.isEqual(e)||Ed("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Zw(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Yw=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ou.c)(e,t),e.prototype.convertBytes=function(t){return new X_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new M_(this.firestore,null,e)},e}(Qw),Jw=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=uw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Xw(t,this._firestore),i=Zw(r.converter,e,n),o=cw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Cp.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Xw(t,this._firestore);return o="string"==typeof(e=Object(lu.n)(e))||e instanceof J_?mw(this._dataReader,"WriteBatch.update",s._key,e,n,r):yw(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Cp.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Xw(t,this._firestore);return this._mutations=this._mutations.concat(new Fp(e._key,Cp.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new wd(_d.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Xw(t,e){if((t=Object(lu.n)(t)).firestore!==e)throw new wd(_d.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var tC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ou.c)(e,t),e.prototype.convertBytes=function(t){return new X_(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new M_(this.firestore,null,e)},e}(Qw);function eC(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=D_(t,M_);var o=D_(t.firestore,K_),s=uw(o);return rC(o,[("string"==typeof(e=Object(lu.n)(e))||e instanceof J_?mw(s,"updateDoc",t._key,e,n,r):yw(s,"updateDoc",t._key,e)).toMutation(t._key,Cp.exists(!0))])}function nC(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(lu.n)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||G_(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(G_(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof M_)c=D_(t.firestore,K_),l=zf(t._key.path),u={next:function(e){i[a]&&i[a](iC(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=D_(t,V_);c=D_(f.firestore,K_),l=f._query;var p=new tC(c);u={next:function(t){i[a]&&i[a](new Dw(c,p,f,t))},error:i[a+1],complete:i[a+2]},Fw(t._query)}return function(t,e,n,r){var i=this,o=new i_(r),s=new pb(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(i,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return e=cb,[4,y_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(i,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return e=lb,[4,y_(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}($_(c),l,h,u)}function rC(t,e){return function(t,e){var n=this,r=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var n;return Object(ou.d)(this,function(i){switch(i.label){case 0:return n=Tb,[4,g_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}($_(t),e)}function iC(t,e,n){var r=n.docs.get(e._key),i=new tC(t);return new Nw(t,i,e._key,r,new jw(n.hasPendingWrites,n.fromCache),e.converter)}var oC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(ou.c)(e,t),e.prototype.get=function(e){var n=this,r=Xw(e,this._firestore),i=new tC(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Nw(n._firestore,i,r._key,t._document,new jw(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=uw(t)}return t.prototype.get=function(t){var e=this,n=Xw(t,this._firestore),r=new Yw(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return kd();var i=t[0];if(i.isFoundDocument())return new kw(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new kw(e._firestore,r,n._key,null,n.converter);throw kd()})},t.prototype.set=function(t,e,n){var r=Xw(t,this._firestore),i=Zw(r.converter,e,n),o=cw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Xw(t,this._firestore);return o="string"==typeof(e=Object(lu.n)(e))||e instanceof J_?mw(this._dataReader,"Transaction.update",s._key,e,n,r):yw(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Xw(t,this._firestore);return this._transaction.delete(e._key),this},t}());function sC(){if("undefined"==typeof Uint8Array)throw new wd(_d.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function aC(){if("undefined"==typeof atob)throw new wd(_d.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var uC=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return aC(),new t(X_.fromBase64String(e))},t.fromUint8Array=function(e){return sC(),new t(X_.fromUint8Array(e))},t.prototype.toBase64=function(){return aC(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return sC(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),cC=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Y_(t=D_(t,K_));var n=$_(t),r=t._freezeSettings(),i=new r_;return Z_(n,i,new e_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Y_(t=D_(t,K_));var e=$_(t),n=t._freezeSettings(),r=new r_;return Z_(e,r,new n_(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new wd(_d.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new py;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(ou.b)(e,void 0,void 0,function(){var e;return Object(ou.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ou.b)(this,void 0,void 0,function(){return Object(ou.d)(this,function(e){switch(e.label){case 0:return my.yt()?[4,my.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(km(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),lC=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof __||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Td("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var o=(t=D_(t,F_))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Td("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s,a;if("string"==typeof r.mockUserToken)s=r.mockUserToken,a=ov.MOCK_USER;else{s=Object(lu.i)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new wd(_d.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ov(u)}t._credentials=new S_(new C_(s,a))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ou.b)(e,void 0,void 0,function(){var e,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:return[4,d_(t)];case 1:return e=r.sent(),[4,p_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ad(t);return e.Or.delete(0),jv(e)}(n))]}})})})}($_(D_(this._delegate,K_)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(ou.b)(e,void 0,void 0,function(){var e,n;return Object(ou.d)(this,function(r){switch(r.label){case 0:return[4,d_(t)];case 1:return e=r.sent(),[4,p_(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(ou.b)(this,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return(e=Ad(t)).Or.add(0),[4,Nv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}($_(D_(this._delegate,K_)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&A_("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(e,void 0,void 0,function(){var e;return Object(ou.d)(this,function(r){switch(r.label){case 0:return e=Nb,[4,g_(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}($_(D_(this._delegate,K_)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new i_(e);return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ad(t).Gr.add(e),e.next()},[4,y_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var e;return Object(ou.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ad(t).Gr.delete(e)},[4,y_(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}($_(t=D_(t,K_)),G_(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new wd(_d.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new SC(this,q_(this._delegate,t))}catch(t){throw yC(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new gC(this,B_(this._delegate,t))}catch(t){throw yC(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new wC(this,function(t,e){if(t=D_(t,F_),k_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new wd(_d.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new V_(t,null,function(t){return new Bf(Bd.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw yC(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var n;return Object(ou.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return h_(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new s_(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}($_(t),function(n){return e(new oC(t,n))})}(this._delegate,function(n){return t(new dC(e,n))})},t.prototype.batch=function(){var t=this;return $_(this._delegate),new fC(new Jw(this._delegate,function(e){return rC(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new wd(_d.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new wd(_d.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),hC=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ou.c)(e,t),e.prototype.convertBytes=function(t){return new uC(new X_(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return gC.eu(e,this.firestore,null)},e}(Qw),dC=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new hC(t)}return t.prototype.get=function(t){var e=this,n=EC(t);return this._delegate.get(n).then(function(t){return new bC(e._firestore,new Nw(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=EC(t);return n?(x_("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=EC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ou.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=EC(t);return this._delegate.delete(e),this},t}(),fC=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=EC(t);return n?(x_("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=EC(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(ou.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=EC(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),pC=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Rw(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new _C(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new hC(e),n),i.set(n,o)),o},t}();pC.su=new WeakMap;var gC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new hC(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new wd(_d.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new M_(n._delegate,r,new rf(e)))},t.eu=function(e,n,r){return new t(n,new M_(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new SC(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new SC(this.firestore,q_(this._delegate,t))}catch(t){throw yC(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(lu.n)(t))instanceof M_&&H_(this._delegate,t)},t.prototype.set=function(t,e){e=x_("DocumentReference.set",e);try{return function(t,e,n){t=D_(t,M_);var r=D_(t.firestore,K_),i=Zw(t.converter,e,n);return rC(r,[cw(uw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Cp.none())])}(this._delegate,t,e)}catch(t){throw yC(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?eC(this._delegate,t):eC.apply(void 0,Object(ou.f)([this._delegate,t,e],n))}catch(t){throw yC(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return rC(D_((t=this._delegate).firestore,K_),[new Fp(t._key,Cp.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mC(e),i=vC(e,function(e){return new bC(t.firestore,new Nw(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return nC(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=D_(t,M_);var e=D_(t.firestore,K_),n=$_(e),r=new tC(e);return function(t,e){var n=this,r=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var n;return Object(ou.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i;return Object(ou.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ad(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new wd(_d.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=rb(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,f_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Nw(e,r,t._key,n,new jw(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=D_(t,M_);var e=D_(t.firestore,K_);return m_($_(e),t._key,{source:"server"}).then(function(n){return iC(e,t,n)})}(this._delegate):function(t){t=D_(t,M_);var e=D_(t.firestore,K_);return m_($_(e),t._key).then(function(n){return iC(e,t,n)})}(this._delegate)).then(function(t){return new bC(e.firestore,new Nw(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?pC.nu(this.firestore,e):null))},t}();function yC(t,e,n){return t.message=t.message.replace(e,n),t}function mC(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!G_(r))return r}return{}}function vC(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=G_(t[0])?t[0]:G_(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var bC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new gC(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Lw(this._delegate,t._delegate)},t}(),_C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ou.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(bC),wC=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new hC(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Vw(this._delegate,function(t,e,n){var r=e,i=Aw("where",t);return new Uw(i,r,n)}(e,n,r)))}catch(e){throw yC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Vw(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Aw("orderBy",t);return new qw(r,n)}(e,n)))}catch(e){throw yC(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Vw(this._delegate,function(t){return P_("limit",t),new Bw("limit",t,"F")}(e)))}catch(e){throw yC(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Vw(this._delegate,function(t){return P_("limitToLast",t),new Bw("limitToLast",t,"L")}(e)))}catch(e){throw yC(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hw("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw yC(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hw("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw yC(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zw("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw yC(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Vw(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zw("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw yC(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return z_(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=D_(t,V_);var e=D_(t.firestore,K_),n=$_(e),r=new tC(e);return function(t,e){var n=this,r=new py;return t.asyncQueue.enqueueAndForget(function(){return Object(ou.b)(n,void 0,void 0,function(){var n;return Object(ou.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ou.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(ou.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Hm(t,e,!0)];case 1:return a=u.sent(),r=new bb(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=rb(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,f_(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Dw(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=D_(t,V_);var e=D_(t.firestore,K_),n=$_(e),r=new tC(e);return v_(n,t._query,{source:"server"}).then(function(n){return new Dw(e,r,t,n)})}(this._delegate):function(t){t=D_(t,V_);var e=D_(t.firestore,K_),n=$_(e),r=new tC(e);return Fw(t._query),v_(n,t._query).then(function(n){return new Dw(e,r,t,n)})}(this._delegate)).then(function(t){return new OC(e.firestore,new Dw(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=mC(e),i=vC(e,function(e){return new OC(t.firestore,new Dw(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return nC(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?pC.nu(this.firestore,e):null))},t}(),CC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new _C(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),OC=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new wC(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new _C(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new CC(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new _C(n._firestore,r))})},t.prototype.isEqual=function(t){return Lw(this._delegate,t._delegate)},t}(),SC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(ou.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new gC(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new gC(this.firestore,void 0===t?B_(this._delegate):B_(this._delegate,t))}catch(t){throw yC(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=D_(t.firestore,K_),r=B_(t),i=Zw(t.converter,e);return rC(n,[cw(uw(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Cp.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new gC(e.firestore,t)})},e.prototype.isEqual=function(t){return H_(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?pC.nu(this.firestore,t):null))},e}(wC);function EC(t){return D_(t,M_)}var TC,IC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(J_.bind.apply(J_,Object(ou.f)([void 0],t)))}return t.documentId=function(){return new t(zd.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(lu.n)(t))instanceof J_&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),kC=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new dw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new lw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fw("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pw("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new gw("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),xC=n("/6Yf"),AC={Firestore:lC,GeoPoint:ew,Timestamp:Ld,Blob:uC,Transaction:dC,WriteBatch:fC,DocumentReference:gC,DocumentSnapshot:bC,Query:wC,QueryDocumentSnapshot:_C,QuerySnapshot:OC,CollectionReference:SC,FieldPath:IC,FieldValue:kC,setLogLevel:function(t){Cd.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function jC(t,e){return function(t,e=pn.b){return new Gt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function NC(t,e){return jC(t,e).pipe(Object($t.a)(t=>({payload:t,type:"query"})))}function RC(t,e){return NC(t,e).pipe(Jn(void 0),su(),Object($t.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function DC(t,e,n){return RC(t,n).pipe(ni((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return PC(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return PC(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PC(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Xn(),Object($t.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function PC(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function LC(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new xC.a("firestore",function(t){return function(t,e){return new lC(t,new K_(t,e),new cC)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},AC)))})(TC=cu.a),TC.registerVersion("@firebase/firestore","2.4.0");class FC{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=RC(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object($t.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Jn(void 0),su(),Wn(([t,e])=>e.length>0||!t),Object($t.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ni((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=LC(t);return DC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return NC(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Wt.a)(this.query.get(t)).pipe(Object(ai.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new MC(this.ref.doc(t),this.afs)}}class MC{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=zC(n,e);return new FC(r,i,this.afs)}snapshotChanges(){return jC(this.ref,this.afs.schedulers.outsideAngular).pipe(Jn(void 0),su(),Object($t.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object($t.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Wt.a)(this.ref.get(t)).pipe(Object(ai.b)(this.afs.schedulers.insideAngular))}}class VC{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?RC(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Wn(t=>t.length>0),this.afs.keepUnstableUntilFirst):RC(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ni((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=LC(t);return DC(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return NC(this.query,this.afs.schedulers.outsideAngular).pipe(Object($t.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Wt.a)(this.query.get(t)).pipe(Object(ai.b)(this.afs.schedulers.insideAngular))}}const UC=new r.r("angularfire2.enableFirestorePersistence"),qC=new r.r("angularfire2.firestore.persistenceSettings"),BC=new r.r("angularfire2.firestore.settings"),HC=new r.r("angularfire2.firestore.use-emulator");function zC(t,e=(t=>t)){return{query:e(t),ref:t}}let WC=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new ei.d(o),this.keepUnstableUntilFirst=Object(ei.h)(this.schedulers);const c=Object(ei.g)(t,o,e);!Ri.a.auth&&u&&Object(ei.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(ei.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!ht(i)){const e=()=>{try{return Object(Wt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(TC){return"undefined"!=typeof console&&console.warn(TC),Object(cn.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(cn.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=zC(n,e),o=this.schedulers.ngZone.run(()=>r);return new FC(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new VC(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new MC(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(UC,8),r.Zb(BC,8),r.Zb(r.C),r.Zb(r.A),r.Zb(qC,8),r.Zb(HC,8),r.Zb(Ti,8))},t.\u0275prov=r.Jb({factory:function(){return new t(r.Zb(ei.c),r.Zb(ei.b,8),r.Zb(UC,8),r.Zb(BC,8),r.Zb(r.C),r.Zb(r.A),r.Zb(qC,8),r.Zb(HC,8),r.Zb(Ti,8))},token:t,providedIn:"any"}),t})(),GC=(()=>{class t{constructor(t){this.fs=t}createUser(t){return this.fs.collection("users").doc(t.email).set(t)}getUsers(){return this.fs.collection("users").ref.get()}getUser(t){return this.fs.collection("users").doc(t).ref.get()}updateUser(t){return this.fs.collection("users").doc(t.email).update(t)}setHistory(t){return this.fs.collection("history").add(t)}timestamp(){return Ri.a.firestore.FieldValue.serverTimestamp()}searchForSender(t){return this.fs.collection("history").ref.where("senderEmail","==",t).get()}searchForReciever(t){return this.fs.collection("history").ref.where("recieverEmail","==",t).get()}}return t.\u0275fac=function(e){return new(e||t)(r.Zb(WC))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),KC=(()=>{class t{constructor(t,e,n){this.fb=t,this.fs=e,this.router=n}ngOnInit(){this.formData=this.fb.group({name:["",[ae.required]],amount:["",[ae.required]],email:["",[ae.required,ae.email]]})}submit(){return Object(ou.b)(this,void 0,void 0,function*(){if(this.formData.invalid)return void alert("Invalid Data in the form");let t=this.formData.value;yield this.fs.createUser(t),this.router.navigate([""])})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(an),r.Nb(GC),r.Nb(Pa))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-create-account"]],decls:23,vars:1,consts:[[1,"container"],[1,"row"],[1,"col"],[2,"color","#6C8BFD"],[3,"formGroup"],[1,"row","mb-3"],["for","inputEmail3",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","id","inputEmail3","formControlName","name","autocomplete","off",1,"form-control"],["type","email","id","inputEmail3","formControlName","email","autocomplete","off",1,"form-control"],["type","number","id","inputEmail3","formControlName","amount","autocomplete","off",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h2",3),r.zc(4,"Create Account"),r.Rb(),r.Sb(5,"form",4),r.Sb(6,"div",5),r.Sb(7,"label",6),r.zc(8,"Name:"),r.Rb(),r.Sb(9,"div",7),r.Ob(10,"input",8),r.Rb(),r.Rb(),r.Sb(11,"div",5),r.Sb(12,"label",6),r.zc(13,"Email:"),r.Rb(),r.Sb(14,"div",7),r.Ob(15,"input",9),r.Rb(),r.Rb(),r.Sb(16,"div",5),r.Sb(17,"label",6),r.zc(18,"Amount:"),r.Rb(),r.Sb(19,"div",7),r.Ob(20,"input",10),r.Rb(),r.Rb(),r.Sb(21,"button",11),r.cc("click",function(){return e.submit()}),r.zc(22,"Submit"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(5),r.kc("formGroup",e.formData))},directives:[$e,Ie,tn,ee,Te,nn,Ze],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:10%;padding:2%;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background-color:#eeeefe;border-radius:20px}"]}),t})();const $C=function(){return["/"]},QC=function(t){return{active:t}},ZC=function(){return["/create"]},YC=function(){return["/view"]},JC=function(){return["/history"]};let XC=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}getUrlWithoutParams(){let t=this.router.parseUrl(this.router.url);return t.queryParams={},t.toString()}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Pa))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-header"]],decls:29,vars:22,consts:[[1,"navbar","py-3","navbar-expand-lg","navbar-dark","bg-purple"],[1,"container-fluid"],["routerLinkActive","router-link-active",1,"navbar-brand",3,"routerLink"],["type","button","data-toggle","collapse","data-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto"],[1,"nav-item",3,"ngClass"],["aria-current","page","routerLinkActive","router-link-active",1,"nav-link",3,"routerLink"],[1,"sr-only"],[1,"page-footer","font-small","bg-purple-footer"],[1,"footer-copyright","text-center","py-3"],["href","https://www.freepik.com/vectors/background"]],template:function(t,e){1&t&&(r.Sb(0,"nav",0),r.Sb(1,"div",1),r.Sb(2,"a",2),r.zc(3," TSF BANKING"),r.Rb(),r.Sb(4,"button",3),r.Ob(5,"span",4),r.Rb(),r.Sb(6,"div",5),r.Sb(7,"ul",6),r.Sb(8,"li",7),r.Sb(9,"a",8),r.zc(10,"Home "),r.Sb(11,"span",9),r.zc(12,"(current)"),r.Rb(),r.Rb(),r.Rb(),r.Sb(13,"li",7),r.Sb(14,"a",8),r.zc(15,"Create Account"),r.Rb(),r.Rb(),r.Sb(16,"li",7),r.Sb(17,"a",8),r.zc(18,"View Accounts"),r.Rb(),r.Rb(),r.Sb(19,"li",7),r.Sb(20,"a",8),r.zc(21,"History"),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(22,"main"),r.Ob(23,"router-outlet"),r.Rb(),r.Sb(24,"footer",10),r.Sb(25,"div",11),r.zc(26,"\xa9 2020 Copyright: Pavan Santosh "),r.Sb(27,"a",12),r.zc(28,"Background vector created by pikisuperstar - www.freepik.com"),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(2),r.kc("routerLink",r.nc(9,$C)),r.Bb(6),r.kc("ngClass",r.oc(10,QC,"/"===e.getUrlWithoutParams())),r.Bb(1),r.kc("routerLink",r.nc(12,$C)),r.Bb(4),r.kc("ngClass",r.oc(13,QC,"/create"===e.getUrlWithoutParams())),r.Bb(1),r.kc("routerLink",r.nc(15,ZC)),r.Bb(2),r.kc("ngClass",r.oc(16,QC,"/view"===e.getUrlWithoutParams())),r.Bb(1),r.kc("routerLink",r.nc(18,YC)),r.Bb(2),r.kc("ngClass",r.oc(19,QC,"/history"===e.getUrlWithoutParams())),r.Bb(1),r.kc("routerLink",r.nc(21,JC)))},directives:[Ar,Fa,Va,ot,Ua],styles:[".bg-purple[_ngcontent-%COMP%], .bg-purple-footer[_ngcontent-%COMP%]{background-color:#3a3772}.bg-purple-footer[_ngcontent-%COMP%]{color:#fff;position:absolute;left:0;bottom:0;width:100%}"]}),t})();function tO(t,e){if(1&t&&(r.Sb(0,"tr"),r.Sb(1,"th",8),r.zc(2),r.Rb(),r.Sb(3,"td"),r.zc(4),r.Rb(),r.Sb(5,"td"),r.zc(6),r.Rb(),r.Sb(7,"td"),r.zc(8),r.Rb(),r.Sb(9,"td"),r.zc(10),r.fc(11,"date"),r.Rb(),r.Rb()),2&t){const t=e.$implicit,n=e.index;r.Bb(2),r.Ac(n+1),r.Bb(2),r.Ac(null==t?null:t.senderEmail),r.Bb(2),r.Ac(null==t?null:t.recieverEmail),r.Bb(2),r.Ac(null==t?null:t.amount),r.Bb(2),r.Ac(r.hc(11,5,null==t?null:t.timeStamp.toMillis(),"dd/MM/yyyy"))}}function eO(t,e){if(1&t&&(r.Sb(0,"tr"),r.Sb(1,"th",8),r.zc(2),r.Rb(),r.Sb(3,"td"),r.zc(4),r.Rb(),r.Sb(5,"td"),r.zc(6),r.Rb(),r.Sb(7,"td"),r.zc(8),r.Rb(),r.Sb(9,"td"),r.zc(10),r.fc(11,"date"),r.Rb(),r.Rb()),2&t){const t=e.$implicit,n=e.index;r.Bb(2),r.Ac(n+1),r.Bb(2),r.Ac(null==t?null:t.recieverEmail),r.Bb(2),r.Ac(null==t?null:t.senderEmail),r.Bb(2),r.Ac(null==t?null:t.amount),r.Bb(2),r.Ac(r.hc(11,5,null==t?null:t.timeStamp.toMillis(),"dd/MM/yyyy"))}}let nO=(()=>{class t{constructor(t,e){this.fb=t,this.fs=e,this.senders=[],this.recievers=[]}ngOnInit(){this.searchData=this.fb.group({search:["",[ae.required,ae.email]]})}submit(){return Object(ou.b)(this,void 0,void 0,function*(){if(this.searchData.invalid)return void alert("Enter the valid data");let t=this.searchData.value,e=yield this.fs.searchForSender(t.search);this.senders=e.docs.map(t=>t.data());let n=yield this.fs.searchForReciever(t.search);this.recievers=n.docs.map(t=>t.data())})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(an),r.Nb(GC))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-history"]],decls:41,vars:3,consts:[[1,"container"],[1,"form-inline","my-2","my-lg-0",2,"justify-self","center",3,"formGroup"],["type","search","placeholder","Search with Email","aria-label","Search","formControlName","search",1,"form-control","mr-sm-3",2,"width","90%"],["type","submit",1,"btn","btn-outline-success","my-2","my-sm-0",3,"click"],[2,"color","#6C8BFD"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"form",1),r.Ob(2,"input",2),r.Sb(3,"button",3),r.cc("click",function(){return e.submit()}),r.zc(4,"Search"),r.Rb(),r.Rb(),r.Rb(),r.Sb(5,"div",0),r.Sb(6,"h1",4),r.zc(7,"Sent Details:"),r.Rb(),r.Sb(8,"table",5),r.Sb(9,"thead"),r.Sb(10,"tr"),r.Sb(11,"th",6),r.zc(12,"#"),r.Rb(),r.Sb(13,"th",6),r.zc(14,"Sender Email"),r.Rb(),r.Sb(15,"th",6),r.zc(16,"Reciever Email"),r.Rb(),r.Sb(17,"th",6),r.zc(18,"Amount"),r.Rb(),r.Sb(19,"th",6),r.zc(20,"Date and Time"),r.Rb(),r.Rb(),r.Rb(),r.Sb(21,"tbody"),r.xc(22,tO,12,8,"tr",7),r.Rb(),r.Rb(),r.Rb(),r.Sb(23,"div",0),r.Sb(24,"h1",4),r.zc(25,"Recieved Details:"),r.Rb(),r.Sb(26,"table",5),r.Sb(27,"thead"),r.Sb(28,"tr"),r.Sb(29,"th",6),r.zc(30,"#"),r.Rb(),r.Sb(31,"th",6),r.zc(32,"Reciever Email"),r.Rb(),r.Sb(33,"th",6),r.zc(34,"Sender Email"),r.Rb(),r.Sb(35,"th",6),r.zc(36,"Amount"),r.Rb(),r.Sb(37,"th",6),r.zc(38,"Date and Time"),r.Rb(),r.Rb(),r.Rb(),r.Sb(39,"tbody"),r.xc(40,eO,12,8,"tr",7),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(1),r.kc("formGroup",e.searchData),r.Bb(21),r.kc("ngForOf",e.senders),r.Bb(18),r.kc("ngForOf",e.recievers))},directives:[$e,Ie,tn,ee,Te,nn,at],pipes:[ct],styles:[".container[_ngcontent-%COMP%]{margin-top:3%}"]}),t})(),rO=(()=>{class t{constructor(t,e,n){this.activeModal=t,this.fb=e,this.fs=n}ngOnInit(){this.transferData=this.fb.group({senderEmail:["",[ae.required,ae.email]],recieverEmail:["",[ae.required,ae.email]],amount:["",[ae.required,ae.pattern("^[0-9]*$")]]})}submit(){return Object(ou.b)(this,void 0,void 0,function*(){if(this.transferData.invalid)return void alert("Enter the valid data");let t=this.transferData.value,e=t.senderEmail,n=t.recieverEmail,r=t.amount,i=(yield this.fs.getUser(e)).data();if(!i)return void alert("Sender not found");let o=(yield this.fs.getUser(n)).data();o?((null==i?void 0:i.amount)||0)<r?alert("Sender amount is not enough"):(i.amount-=r,o.amount+=r,this.fs.updateUser(i),this.fs.updateUser(o),t.timeStamp=this.fs.timestamp(),this.fs.setHistory(t),this.activeModal.close("Close click"),alert("Amount transferred")):alert("Reciever not found")})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Fr),r.Nb(an),r.Nb(GC))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-transfer"]],decls:30,vars:1,consts:[[1,"modal-header","form"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","form"],[1,"row"],[1,"col"],[3,"formGroup"],[1,"row","mb-3"],["for","inputEmail3",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","id","inputEmail3","formControlName","senderEmail",1,"form-control"],["type","text","id","inputEmail3","formControlName","recieverEmail",1,"form-control"],["type","number","id","inputEmail3","formControlName","amount",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"h4",1),r.zc(2,"Enter Transfer data"),r.Rb(),r.Sb(3,"button",2),r.cc("click",function(){return e.activeModal.dismiss("Cross click")}),r.Sb(4,"span",3),r.zc(5,"\xd7"),r.Rb(),r.Rb(),r.Rb(),r.Sb(6,"div",4),r.Sb(7,"div",5),r.Sb(8,"div",6),r.Sb(9,"form",7),r.Sb(10,"div",8),r.Sb(11,"label",9),r.zc(12,"Sender Email"),r.Rb(),r.Sb(13,"div",10),r.Ob(14,"input",11),r.Rb(),r.Rb(),r.Sb(15,"div",8),r.Sb(16,"label",9),r.zc(17,"Reciever Email"),r.Rb(),r.Sb(18,"div",10),r.Ob(19,"input",12),r.Rb(),r.Rb(),r.Sb(20,"div",8),r.Sb(21,"label",9),r.zc(22,"Amount"),r.Rb(),r.Sb(23,"div",10),r.Ob(24,"input",13),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Rb(),r.Sb(25,"div",14),r.Sb(26,"button",15),r.cc("click",function(){return e.submit()}),r.zc(27,"Submit"),r.Rb(),r.Sb(28,"button",16),r.cc("click",function(){return e.activeModal.close("Close click")}),r.zc(29,"Close"),r.Rb(),r.Rb()),2&t&&(r.Bb(9),r.kc("formGroup",e.transferData))},directives:[$e,Ie,tn,ee,Te,nn,Ze],styles:[".form[_ngcontent-%COMP%]{color:#000}"]}),t})();function iO(t,e){if(1&t&&(r.Sb(0,"tr"),r.Sb(1,"th",5),r.zc(2),r.Rb(),r.Sb(3,"td"),r.zc(4),r.Rb(),r.Sb(5,"td"),r.zc(6),r.Rb(),r.Sb(7,"td"),r.zc(8),r.Rb(),r.Rb()),2&t){const t=e.$implicit,n=e.index;r.Bb(2),r.Ac(n+1),r.Bb(2),r.Ac(null==t?null:t.name),r.Bb(2),r.Ac(null==t?null:t.email),r.Bb(2),r.Ac(null==t?null:t.amount)}}const oO=[{path:"",component:XC,children:[{path:"",component:(()=>{class t{constructor(t){this.modalService=t}ngOnInit(){}open(){this.modalService.open(rO).componentInstance.name="World"}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(Br))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-home"]],decls:10,vars:0,consts:[[1,"p-3","mb-4","banner-div"],[1,"d-flex","align-items-center","justify-content-center","text-style",2,"height","350px"],[1,"p-2","bd-highlight","col-example","home-head"],["type","button",1,"btn","btn-primary",3,"click"],[1,"banner"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"div",2),r.Sb(3,"h1"),r.zc(4,"Welcome to TSF BANKING"),r.Rb(),r.Sb(5,"p"),r.zc(6," TSF-Banking web site is a new stage for banking where money can be transfered in just seconds of entering data of people. this website is user friendly and very helpfull "),r.Rb(),r.Sb(7,"button",3),r.cc("click",function(){return e.open()}),r.zc(8," Transfer "),r.Rb(),r.Rb(),r.Ob(9,"div",4),r.Rb(),r.Rb())},styles:[".banner[_ngcontent-%COMP%]{background-image:url(bank.82b18050bb555fb81fb7.svg);background-repeat:no-repeat;background-position:50%;background-size:cover;padding-top:10%;height:150%;width:100%}.banner-div[_ngcontent-%COMP%]{margin-top:5%}.home-head[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#6c8bfd;padding-bottom:25px}.text-style[_ngcontent-%COMP%]{padding:30px}@media only screen and (max-width:1000px){.banner[_ngcontent-%COMP%]{display:none}}"]}),t})()},{path:"create",component:KC},{path:"history",component:nO},{path:"view",component:(()=>{class t{constructor(t){this.fs=t,this.users=[]}ngOnInit(){return Object(ou.b)(this,void 0,void 0,function*(){let t=yield this.fs.getUsers();this.users=t.docs.map(t=>t.data())})}}return t.\u0275fac=function(e){return new(e||t)(r.Nb(GC))},t.\u0275cmp=r.Hb({type:t,selectors:[["app-view-accounts"]],decls:16,vars:1,consts:[[1,"container"],[2,"color","#6C8BFD"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"h1",1),r.zc(2," View All Accounts: "),r.Rb(),r.Sb(3,"table",2),r.Sb(4,"thead"),r.Sb(5,"tr"),r.Sb(6,"th",3),r.zc(7,"#"),r.Rb(),r.Sb(8,"th",3),r.zc(9,"Name"),r.Rb(),r.Sb(10,"th",3),r.zc(11,"Email"),r.Rb(),r.Sb(12,"th",3),r.zc(13,"Amount"),r.Rb(),r.Rb(),r.Rb(),r.Sb(14,"tbody"),r.xc(15,iO,9,4,"tr",4),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Bb(15),r.kc("ngForOf",e.users))},directives:[at],styles:[""]}),t})()}]}];let sO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({imports:[[Za.forRoot(oO)],Za]}),t})(),aO=(()=>{class t{constructor(){this.title="Angular"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Ob(0,"router-outlet")},directives:[Ua],styles:[""],encapsulation:2}),t})(),uO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Lb({type:t,bootstrap:[aO]}),t.\u0275inj=r.Kb({providers:[],imports:[[zt,sO,Wr,Cr,ti,sn,on,ei.a.initializeApp(Zi),Qi]]}),t})();Object(r.T)(),Bt().bootstrapModule(uO).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);